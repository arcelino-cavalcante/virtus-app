(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Yu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Up(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var D0={exports:{}},Hc={},j0={exports:{}},we={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _l=Symbol.for("react.element"),YT=Symbol.for("react.portal"),JT=Symbol.for("react.fragment"),ZT=Symbol.for("react.strict_mode"),eb=Symbol.for("react.profiler"),tb=Symbol.for("react.provider"),nb=Symbol.for("react.context"),rb=Symbol.for("react.forward_ref"),ib=Symbol.for("react.suspense"),sb=Symbol.for("react.memo"),ob=Symbol.for("react.lazy"),Qy=Symbol.iterator;function ab(t){return t===null||typeof t!="object"?null:(t=Qy&&t[Qy]||t["@@iterator"],typeof t=="function"?t:null)}var O0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L0=Object.assign,M0={};function Co(t,e,n){this.props=t,this.context=e,this.refs=M0,this.updater=n||O0}Co.prototype.isReactComponent={};Co.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Co.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V0(){}V0.prototype=Co.prototype;function zp(t,e,n){this.props=t,this.context=e,this.refs=M0,this.updater=n||O0}var Bp=zp.prototype=new V0;Bp.constructor=zp;L0(Bp,Co.prototype);Bp.isPureReactComponent=!0;var Xy=Array.isArray,F0=Object.prototype.hasOwnProperty,$p={current:null},U0={key:!0,ref:!0,__self:!0,__source:!0};function z0(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)F0.call(e,r)&&!U0.hasOwnProperty(r)&&(i[r]=e[r]);var a=arguments.length-2;if(a===1)i.children=n;else if(1<a){for(var u=Array(a),c=0;c<a;c++)u[c]=arguments[c+2];i.children=u}if(t&&t.defaultProps)for(r in a=t.defaultProps,a)i[r]===void 0&&(i[r]=a[r]);return{$$typeof:_l,type:t,key:s,ref:o,props:i,_owner:$p.current}}function lb(t,e){return{$$typeof:_l,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function qp(t){return typeof t=="object"&&t!==null&&t.$$typeof===_l}function ub(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Yy=/\/+/g;function ud(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ub(""+t.key):e.toString(36)}function Au(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case _l:case YT:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+ud(o,0):r,Xy(i)?(n="",t!=null&&(n=t.replace(Yy,"$&/")+"/"),Au(i,e,n,"",function(c){return c})):i!=null&&(qp(i)&&(i=lb(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Yy,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Xy(t))for(var a=0;a<t.length;a++){s=t[a];var u=r+ud(s,a);o+=Au(s,e,n,u,i)}else if(u=ab(t),typeof u=="function")for(t=u.call(t),a=0;!(s=t.next()).done;)s=s.value,u=r+ud(s,a++),o+=Au(s,e,n,u,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Jl(t,e,n){if(t==null)return t;var r=[],i=0;return Au(t,r,"","",function(s){return e.call(n,s,i++)}),r}function cb(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var zt={current:null},Cu={transition:null},hb={ReactCurrentDispatcher:zt,ReactCurrentBatchConfig:Cu,ReactCurrentOwner:$p};function B0(){throw Error("act(...) is not supported in production builds of React.")}we.Children={map:Jl,forEach:function(t,e,n){Jl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Jl(t,function(){e++}),e},toArray:function(t){return Jl(t,function(e){return e})||[]},only:function(t){if(!qp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};we.Component=Co;we.Fragment=JT;we.Profiler=eb;we.PureComponent=zp;we.StrictMode=ZT;we.Suspense=ib;we.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=hb;we.act=B0;we.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=L0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=$p.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(u in e)F0.call(e,u)&&!U0.hasOwnProperty(u)&&(r[u]=e[u]===void 0&&a!==void 0?a[u]:e[u])}var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){a=Array(u);for(var c=0;c<u;c++)a[c]=arguments[c+2];r.children=a}return{$$typeof:_l,type:t.type,key:i,ref:s,props:r,_owner:o}};we.createContext=function(t){return t={$$typeof:nb,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:tb,_context:t},t.Consumer=t};we.createElement=z0;we.createFactory=function(t){var e=z0.bind(null,t);return e.type=t,e};we.createRef=function(){return{current:null}};we.forwardRef=function(t){return{$$typeof:rb,render:t}};we.isValidElement=qp;we.lazy=function(t){return{$$typeof:ob,_payload:{_status:-1,_result:t},_init:cb}};we.memo=function(t,e){return{$$typeof:sb,type:t,compare:e===void 0?null:e}};we.startTransition=function(t){var e=Cu.transition;Cu.transition={};try{t()}finally{Cu.transition=e}};we.unstable_act=B0;we.useCallback=function(t,e){return zt.current.useCallback(t,e)};we.useContext=function(t){return zt.current.useContext(t)};we.useDebugValue=function(){};we.useDeferredValue=function(t){return zt.current.useDeferredValue(t)};we.useEffect=function(t,e){return zt.current.useEffect(t,e)};we.useId=function(){return zt.current.useId()};we.useImperativeHandle=function(t,e,n){return zt.current.useImperativeHandle(t,e,n)};we.useInsertionEffect=function(t,e){return zt.current.useInsertionEffect(t,e)};we.useLayoutEffect=function(t,e){return zt.current.useLayoutEffect(t,e)};we.useMemo=function(t,e){return zt.current.useMemo(t,e)};we.useReducer=function(t,e,n){return zt.current.useReducer(t,e,n)};we.useRef=function(t){return zt.current.useRef(t)};we.useState=function(t){return zt.current.useState(t)};we.useSyncExternalStore=function(t,e,n){return zt.current.useSyncExternalStore(t,e,n)};we.useTransition=function(){return zt.current.useTransition()};we.version="18.3.1";j0.exports=we;var F=j0.exports;const $0=Up(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var db=F,fb=Symbol.for("react.element"),pb=Symbol.for("react.fragment"),mb=Object.prototype.hasOwnProperty,gb=db.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,yb={key:!0,ref:!0,__self:!0,__source:!0};function q0(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)mb.call(e,r)&&!yb.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:fb,type:t,key:s,ref:o,props:i,_owner:gb.current}}Hc.Fragment=pb;Hc.jsx=q0;Hc.jsxs=q0;D0.exports=Hc;var h=D0.exports,lf={},H0={exports:{}},yn={},W0={exports:{}},G0={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(B,Y){var N=B.length;B.push(Y);e:for(;0<N;){var ue=N-1>>>1,me=B[ue];if(0<i(me,Y))B[ue]=Y,B[N]=me,N=ue;else break e}}function n(B){return B.length===0?null:B[0]}function r(B){if(B.length===0)return null;var Y=B[0],N=B.pop();if(N!==Y){B[0]=N;e:for(var ue=0,me=B.length,j=me>>>1;ue<j;){var be=2*(ue+1)-1,De=B[be],Ee=be+1,ft=B[Ee];if(0>i(De,N))Ee<me&&0>i(ft,De)?(B[ue]=ft,B[Ee]=N,ue=Ee):(B[ue]=De,B[be]=N,ue=be);else if(Ee<me&&0>i(ft,N))B[ue]=ft,B[Ee]=N,ue=Ee;else break e}}return Y}function i(B,Y){var N=B.sortIndex-Y.sortIndex;return N!==0?N:B.id-Y.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var u=[],c=[],d=1,f=null,m=3,g=!1,_=!1,b=!1,P=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(B){for(var Y=n(c);Y!==null;){if(Y.callback===null)r(c);else if(Y.startTime<=B)r(c),Y.sortIndex=Y.expirationTime,e(u,Y);else break;Y=n(c)}}function O(B){if(b=!1,E(B),!_)if(n(u)!==null)_=!0,X(M);else{var Y=n(c);Y!==null&&W(O,Y.startTime-B)}}function M(B,Y){_=!1,b&&(b=!1,x(w),w=-1),g=!0;var N=m;try{for(E(Y),f=n(u);f!==null&&(!(f.expirationTime>Y)||B&&!A());){var ue=f.callback;if(typeof ue=="function"){f.callback=null,m=f.priorityLevel;var me=ue(f.expirationTime<=Y);Y=t.unstable_now(),typeof me=="function"?f.callback=me:f===n(u)&&r(u),E(Y)}else r(u);f=n(u)}if(f!==null)var j=!0;else{var be=n(c);be!==null&&W(O,be.startTime-Y),j=!1}return j}finally{f=null,m=N,g=!1}}var D=!1,v=null,w=-1,I=5,S=-1;function A(){return!(t.unstable_now()-S<I)}function R(){if(v!==null){var B=t.unstable_now();S=B;var Y=!0;try{Y=v(!0,B)}finally{Y?C():(D=!1,v=null)}}else D=!1}var C;if(typeof k=="function")C=function(){k(R)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ne=te.port2;te.port1.onmessage=R,C=function(){ne.postMessage(null)}}else C=function(){P(R,0)};function X(B){v=B,D||(D=!0,C())}function W(B,Y){w=P(function(){B(t.unstable_now())},Y)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(B){B.callback=null},t.unstable_continueExecution=function(){_||g||(_=!0,X(M))},t.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<B?Math.floor(1e3/B):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(u)},t.unstable_next=function(B){switch(m){case 1:case 2:case 3:var Y=3;break;default:Y=m}var N=m;m=Y;try{return B()}finally{m=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(B,Y){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var N=m;m=B;try{return Y()}finally{m=N}},t.unstable_scheduleCallback=function(B,Y,N){var ue=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?ue+N:ue):N=ue,B){case 1:var me=-1;break;case 2:me=250;break;case 5:me=1073741823;break;case 4:me=1e4;break;default:me=5e3}return me=N+me,B={id:d++,callback:Y,priorityLevel:B,startTime:N,expirationTime:me,sortIndex:-1},N>ue?(B.sortIndex=N,e(c,B),n(u)===null&&B===n(c)&&(b?(x(w),w=-1):b=!0,W(O,N-ue))):(B.sortIndex=me,e(u,B),_||g||(_=!0,X(M))),B},t.unstable_shouldYield=A,t.unstable_wrapCallback=function(B){var Y=m;return function(){var N=m;m=Y;try{return B.apply(this,arguments)}finally{m=N}}}})(G0);W0.exports=G0;var wb=W0.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _b=F,gn=wb;function q(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K0=new Set,Ha={};function ms(t,e){uo(t,e),uo(t+"Capture",e)}function uo(t,e){for(Ha[t]=e,t=0;t<e.length;t++)K0.add(e[t])}var Ar=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),uf=Object.prototype.hasOwnProperty,vb=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Jy={},Zy={};function xb(t){return uf.call(Zy,t)?!0:uf.call(Jy,t)?!1:vb.test(t)?Zy[t]=!0:(Jy[t]=!0,!1)}function Eb(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function kb(t,e,n,r){if(e===null||typeof e>"u"||Eb(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Bt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var It={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){It[t]=new Bt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];It[e]=new Bt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){It[t]=new Bt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){It[t]=new Bt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){It[t]=new Bt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){It[t]=new Bt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){It[t]=new Bt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){It[t]=new Bt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){It[t]=new Bt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Hp=/[\-:]([a-z])/g;function Wp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Hp,Wp);It[e]=new Bt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Hp,Wp);It[e]=new Bt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Hp,Wp);It[e]=new Bt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){It[t]=new Bt(t,1,!1,t.toLowerCase(),null,!1,!1)});It.xlinkHref=new Bt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){It[t]=new Bt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Gp(t,e,n,r){var i=It.hasOwnProperty(e)?It[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(kb(e,n,i,r)&&(n=null),r||i===null?xb(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Mr=_b.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Zl=Symbol.for("react.element"),Ms=Symbol.for("react.portal"),Vs=Symbol.for("react.fragment"),Kp=Symbol.for("react.strict_mode"),cf=Symbol.for("react.profiler"),Q0=Symbol.for("react.provider"),X0=Symbol.for("react.context"),Qp=Symbol.for("react.forward_ref"),hf=Symbol.for("react.suspense"),df=Symbol.for("react.suspense_list"),Xp=Symbol.for("react.memo"),Gr=Symbol.for("react.lazy"),Y0=Symbol.for("react.offscreen"),ew=Symbol.iterator;function ra(t){return t===null||typeof t!="object"?null:(t=ew&&t[ew]||t["@@iterator"],typeof t=="function"?t:null)}var We=Object.assign,cd;function ma(t){if(cd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);cd=e&&e[1]||""}return`
`+cd+t}var hd=!1;function dd(t,e){if(!t||hd)return"";hd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,a=s.length-1;1<=o&&0<=a&&i[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(i[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||i[o]!==s[a]){var u=`
`+i[o].replace(" at new "," at ");return t.displayName&&u.includes("<anonymous>")&&(u=u.replace("<anonymous>",t.displayName)),u}while(1<=o&&0<=a);break}}}finally{hd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?ma(t):""}function Ib(t){switch(t.tag){case 5:return ma(t.type);case 16:return ma("Lazy");case 13:return ma("Suspense");case 19:return ma("SuspenseList");case 0:case 2:case 15:return t=dd(t.type,!1),t;case 11:return t=dd(t.type.render,!1),t;case 1:return t=dd(t.type,!0),t;default:return""}}function ff(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Vs:return"Fragment";case Ms:return"Portal";case cf:return"Profiler";case Kp:return"StrictMode";case hf:return"Suspense";case df:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case X0:return(t.displayName||"Context")+".Consumer";case Q0:return(t._context.displayName||"Context")+".Provider";case Qp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Xp:return e=t.displayName||null,e!==null?e:ff(t.type)||"Memo";case Gr:e=t._payload,t=t._init;try{return ff(t(e))}catch{}}return null}function Tb(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ff(e);case 8:return e===Kp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function _i(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function J0(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function bb(t){var e=J0(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function eu(t){t._valueTracker||(t._valueTracker=bb(t))}function Z0(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=J0(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ju(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function pf(t,e){var n=e.checked;return We({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function tw(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=_i(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function ex(t,e){e=e.checked,e!=null&&Gp(t,"checked",e,!1)}function mf(t,e){ex(t,e);var n=_i(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gf(t,e.type,n):e.hasOwnProperty("defaultValue")&&gf(t,e.type,_i(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function nw(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function gf(t,e,n){(e!=="number"||Ju(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ga=Array.isArray;function Xs(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+_i(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function yf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(q(91));return We({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function rw(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(q(92));if(ga(n)){if(1<n.length)throw Error(q(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:_i(n)}}function tx(t,e){var n=_i(e.value),r=_i(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function iw(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function nx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function wf(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?nx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var tu,rx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(tu=tu||document.createElement("div"),tu.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=tu.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Wa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var Ta={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Sb=["Webkit","ms","Moz","O"];Object.keys(Ta).forEach(function(t){Sb.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Ta[e]=Ta[t]})});function ix(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||Ta.hasOwnProperty(t)&&Ta[t]?(""+e).trim():e+"px"}function sx(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=ix(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Ab=We({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function _f(t,e){if(e){if(Ab[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(q(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(q(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(q(61))}if(e.style!=null&&typeof e.style!="object")throw Error(q(62))}}function vf(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var xf=null;function Yp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Ef=null,Ys=null,Js=null;function sw(t){if(t=El(t)){if(typeof Ef!="function")throw Error(q(280));var e=t.stateNode;e&&(e=Xc(e),Ef(t.stateNode,t.type,e))}}function ox(t){Ys?Js?Js.push(t):Js=[t]:Ys=t}function ax(){if(Ys){var t=Ys,e=Js;if(Js=Ys=null,sw(t),e)for(t=0;t<e.length;t++)sw(e[t])}}function lx(t,e){return t(e)}function ux(){}var fd=!1;function cx(t,e,n){if(fd)return t(e,n);fd=!0;try{return lx(t,e,n)}finally{fd=!1,(Ys!==null||Js!==null)&&(ux(),ax())}}function Ga(t,e){var n=t.stateNode;if(n===null)return null;var r=Xc(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(q(231,e,typeof n));return n}var kf=!1;if(Ar)try{var ia={};Object.defineProperty(ia,"passive",{get:function(){kf=!0}}),window.addEventListener("test",ia,ia),window.removeEventListener("test",ia,ia)}catch{kf=!1}function Cb(t,e,n,r,i,s,o,a,u){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(d){this.onError(d)}}var ba=!1,Zu=null,ec=!1,If=null,Nb={onError:function(t){ba=!0,Zu=t}};function Rb(t,e,n,r,i,s,o,a,u){ba=!1,Zu=null,Cb.apply(Nb,arguments)}function Pb(t,e,n,r,i,s,o,a,u){if(Rb.apply(this,arguments),ba){if(ba){var c=Zu;ba=!1,Zu=null}else throw Error(q(198));ec||(ec=!0,If=c)}}function gs(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function hx(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ow(t){if(gs(t)!==t)throw Error(q(188))}function Db(t){var e=t.alternate;if(!e){if(e=gs(t),e===null)throw Error(q(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ow(i),t;if(s===r)return ow(i),e;s=s.sibling}throw Error(q(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,a=i.child;a;){if(a===n){o=!0,n=i,r=s;break}if(a===r){o=!0,r=i,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,r=i;break}if(a===r){o=!0,r=s,n=i;break}a=a.sibling}if(!o)throw Error(q(189))}}if(n.alternate!==r)throw Error(q(190))}if(n.tag!==3)throw Error(q(188));return n.stateNode.current===n?t:e}function dx(t){return t=Db(t),t!==null?fx(t):null}function fx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=fx(t);if(e!==null)return e;t=t.sibling}return null}var px=gn.unstable_scheduleCallback,aw=gn.unstable_cancelCallback,jb=gn.unstable_shouldYield,Ob=gn.unstable_requestPaint,tt=gn.unstable_now,Lb=gn.unstable_getCurrentPriorityLevel,Jp=gn.unstable_ImmediatePriority,mx=gn.unstable_UserBlockingPriority,tc=gn.unstable_NormalPriority,Mb=gn.unstable_LowPriority,gx=gn.unstable_IdlePriority,Wc=null,ir=null;function Vb(t){if(ir&&typeof ir.onCommitFiberRoot=="function")try{ir.onCommitFiberRoot(Wc,t,void 0,(t.current.flags&128)===128)}catch{}}var On=Math.clz32?Math.clz32:zb,Fb=Math.log,Ub=Math.LN2;function zb(t){return t>>>=0,t===0?32:31-(Fb(t)/Ub|0)|0}var nu=64,ru=4194304;function ya(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function nc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~i;a!==0?r=ya(a):(s&=o,s!==0&&(r=ya(s)))}else o=n&~i,o!==0?r=ya(o):s!==0&&(r=ya(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-On(e),i=1<<n,r|=t[n],e&=~i;return r}function Bb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $b(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-On(s),a=1<<o,u=i[o];u===-1?(!(a&n)||a&r)&&(i[o]=Bb(a,e)):u<=e&&(t.expiredLanes|=a),s&=~a}}function Tf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function yx(){var t=nu;return nu<<=1,!(nu&4194240)&&(nu=64),t}function pd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function vl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-On(e),t[e]=n}function qb(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-On(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Zp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-On(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Ne=0;function wx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _x,em,vx,xx,Ex,bf=!1,iu=[],si=null,oi=null,ai=null,Ka=new Map,Qa=new Map,Qr=[],Hb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function lw(t,e){switch(t){case"focusin":case"focusout":si=null;break;case"dragenter":case"dragleave":oi=null;break;case"mouseover":case"mouseout":ai=null;break;case"pointerover":case"pointerout":Ka.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qa.delete(e.pointerId)}}function sa(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=El(e),e!==null&&em(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function Wb(t,e,n,r,i){switch(e){case"focusin":return si=sa(si,t,e,n,r,i),!0;case"dragenter":return oi=sa(oi,t,e,n,r,i),!0;case"mouseover":return ai=sa(ai,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return Ka.set(s,sa(Ka.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,Qa.set(s,sa(Qa.get(s)||null,t,e,n,r,i)),!0}return!1}function kx(t){var e=Gi(t.target);if(e!==null){var n=gs(e);if(n!==null){if(e=n.tag,e===13){if(e=hx(n),e!==null){t.blockedOn=e,Ex(t.priority,function(){vx(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nu(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Sf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);xf=r,n.target.dispatchEvent(r),xf=null}else return e=El(n),e!==null&&em(e),t.blockedOn=n,!1;e.shift()}return!0}function uw(t,e,n){Nu(t)&&n.delete(e)}function Gb(){bf=!1,si!==null&&Nu(si)&&(si=null),oi!==null&&Nu(oi)&&(oi=null),ai!==null&&Nu(ai)&&(ai=null),Ka.forEach(uw),Qa.forEach(uw)}function oa(t,e){t.blockedOn===e&&(t.blockedOn=null,bf||(bf=!0,gn.unstable_scheduleCallback(gn.unstable_NormalPriority,Gb)))}function Xa(t){function e(i){return oa(i,t)}if(0<iu.length){oa(iu[0],t);for(var n=1;n<iu.length;n++){var r=iu[n];r.blockedOn===t&&(r.blockedOn=null)}}for(si!==null&&oa(si,t),oi!==null&&oa(oi,t),ai!==null&&oa(ai,t),Ka.forEach(e),Qa.forEach(e),n=0;n<Qr.length;n++)r=Qr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Qr.length&&(n=Qr[0],n.blockedOn===null);)kx(n),n.blockedOn===null&&Qr.shift()}var Zs=Mr.ReactCurrentBatchConfig,rc=!0;function Kb(t,e,n,r){var i=Ne,s=Zs.transition;Zs.transition=null;try{Ne=1,tm(t,e,n,r)}finally{Ne=i,Zs.transition=s}}function Qb(t,e,n,r){var i=Ne,s=Zs.transition;Zs.transition=null;try{Ne=4,tm(t,e,n,r)}finally{Ne=i,Zs.transition=s}}function tm(t,e,n,r){if(rc){var i=Sf(t,e,n,r);if(i===null)Id(t,e,r,ic,n),lw(t,r);else if(Wb(i,t,e,n,r))r.stopPropagation();else if(lw(t,r),e&4&&-1<Hb.indexOf(t)){for(;i!==null;){var s=El(i);if(s!==null&&_x(s),s=Sf(t,e,n,r),s===null&&Id(t,e,r,ic,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Id(t,e,r,null,n)}}var ic=null;function Sf(t,e,n,r){if(ic=null,t=Yp(r),t=Gi(t),t!==null)if(e=gs(t),e===null)t=null;else if(n=e.tag,n===13){if(t=hx(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return ic=t,null}function Ix(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Lb()){case Jp:return 1;case mx:return 4;case tc:case Mb:return 16;case gx:return 536870912;default:return 16}default:return 16}}var ni=null,nm=null,Ru=null;function Tx(){if(Ru)return Ru;var t,e=nm,n=e.length,r,i="value"in ni?ni.value:ni.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Ru=i.slice(t,1<r?1-r:void 0)}function Pu(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function su(){return!0}function cw(){return!1}function wn(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?su:cw,this.isPropagationStopped=cw,this}return We(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=su)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=su)},persist:function(){},isPersistent:su}),e}var No={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},rm=wn(No),xl=We({},No,{view:0,detail:0}),Xb=wn(xl),md,gd,aa,Gc=We({},xl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:im,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==aa&&(aa&&t.type==="mousemove"?(md=t.screenX-aa.screenX,gd=t.screenY-aa.screenY):gd=md=0,aa=t),md)},movementY:function(t){return"movementY"in t?t.movementY:gd}}),hw=wn(Gc),Yb=We({},Gc,{dataTransfer:0}),Jb=wn(Yb),Zb=We({},xl,{relatedTarget:0}),yd=wn(Zb),eS=We({},No,{animationName:0,elapsedTime:0,pseudoElement:0}),tS=wn(eS),nS=We({},No,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),rS=wn(nS),iS=We({},No,{data:0}),dw=wn(iS),sS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},oS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},aS={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function lS(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=aS[t])?!!e[t]:!1}function im(){return lS}var uS=We({},xl,{key:function(t){if(t.key){var e=sS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pu(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?oS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:im,charCode:function(t){return t.type==="keypress"?Pu(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pu(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),cS=wn(uS),hS=We({},Gc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),fw=wn(hS),dS=We({},xl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:im}),fS=wn(dS),pS=We({},No,{propertyName:0,elapsedTime:0,pseudoElement:0}),mS=wn(pS),gS=We({},Gc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),yS=wn(gS),wS=[9,13,27,32],sm=Ar&&"CompositionEvent"in window,Sa=null;Ar&&"documentMode"in document&&(Sa=document.documentMode);var _S=Ar&&"TextEvent"in window&&!Sa,bx=Ar&&(!sm||Sa&&8<Sa&&11>=Sa),pw=" ",mw=!1;function Sx(t,e){switch(t){case"keyup":return wS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ax(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Fs=!1;function vS(t,e){switch(t){case"compositionend":return Ax(e);case"keypress":return e.which!==32?null:(mw=!0,pw);case"textInput":return t=e.data,t===pw&&mw?null:t;default:return null}}function xS(t,e){if(Fs)return t==="compositionend"||!sm&&Sx(t,e)?(t=Tx(),Ru=nm=ni=null,Fs=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return bx&&e.locale!=="ko"?null:e.data;default:return null}}var ES={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function gw(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!ES[t.type]:e==="textarea"}function Cx(t,e,n,r){ox(r),e=sc(e,"onChange"),0<e.length&&(n=new rm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Aa=null,Ya=null;function kS(t){Ux(t,0)}function Kc(t){var e=Bs(t);if(Z0(e))return t}function IS(t,e){if(t==="change")return e}var Nx=!1;if(Ar){var wd;if(Ar){var _d="oninput"in document;if(!_d){var yw=document.createElement("div");yw.setAttribute("oninput","return;"),_d=typeof yw.oninput=="function"}wd=_d}else wd=!1;Nx=wd&&(!document.documentMode||9<document.documentMode)}function ww(){Aa&&(Aa.detachEvent("onpropertychange",Rx),Ya=Aa=null)}function Rx(t){if(t.propertyName==="value"&&Kc(Ya)){var e=[];Cx(e,Ya,t,Yp(t)),cx(kS,e)}}function TS(t,e,n){t==="focusin"?(ww(),Aa=e,Ya=n,Aa.attachEvent("onpropertychange",Rx)):t==="focusout"&&ww()}function bS(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Kc(Ya)}function SS(t,e){if(t==="click")return Kc(e)}function AS(t,e){if(t==="input"||t==="change")return Kc(e)}function CS(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var zn=typeof Object.is=="function"?Object.is:CS;function Ja(t,e){if(zn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!uf.call(e,i)||!zn(t[i],e[i]))return!1}return!0}function _w(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function vw(t,e){var n=_w(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=_w(n)}}function Px(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Px(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Dx(){for(var t=window,e=Ju();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ju(t.document)}return e}function om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function NS(t){var e=Dx(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Px(n.ownerDocument.documentElement,n)){if(r!==null&&om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=vw(n,s);var o=vw(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var RS=Ar&&"documentMode"in document&&11>=document.documentMode,Us=null,Af=null,Ca=null,Cf=!1;function xw(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Cf||Us==null||Us!==Ju(r)||(r=Us,"selectionStart"in r&&om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),Ca&&Ja(Ca,r)||(Ca=r,r=sc(Af,"onSelect"),0<r.length&&(e=new rm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Us)))}function ou(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var zs={animationend:ou("Animation","AnimationEnd"),animationiteration:ou("Animation","AnimationIteration"),animationstart:ou("Animation","AnimationStart"),transitionend:ou("Transition","TransitionEnd")},vd={},jx={};Ar&&(jx=document.createElement("div").style,"AnimationEvent"in window||(delete zs.animationend.animation,delete zs.animationiteration.animation,delete zs.animationstart.animation),"TransitionEvent"in window||delete zs.transitionend.transition);function Qc(t){if(vd[t])return vd[t];if(!zs[t])return t;var e=zs[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in jx)return vd[t]=e[n];return t}var Ox=Qc("animationend"),Lx=Qc("animationiteration"),Mx=Qc("animationstart"),Vx=Qc("transitionend"),Fx=new Map,Ew="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ai(t,e){Fx.set(t,e),ms(e,[t])}for(var xd=0;xd<Ew.length;xd++){var Ed=Ew[xd],PS=Ed.toLowerCase(),DS=Ed[0].toUpperCase()+Ed.slice(1);Ai(PS,"on"+DS)}Ai(Ox,"onAnimationEnd");Ai(Lx,"onAnimationIteration");Ai(Mx,"onAnimationStart");Ai("dblclick","onDoubleClick");Ai("focusin","onFocus");Ai("focusout","onBlur");Ai(Vx,"onTransitionEnd");uo("onMouseEnter",["mouseout","mouseover"]);uo("onMouseLeave",["mouseout","mouseover"]);uo("onPointerEnter",["pointerout","pointerover"]);uo("onPointerLeave",["pointerout","pointerover"]);ms("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ms("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ms("onBeforeInput",["compositionend","keypress","textInput","paste"]);ms("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ms("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var wa="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),jS=new Set("cancel close invalid load scroll toggle".split(" ").concat(wa));function kw(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,Pb(r,e,void 0,t),t.currentTarget=null}function Ux(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var a=r[o],u=a.instance,c=a.currentTarget;if(a=a.listener,u!==s&&i.isPropagationStopped())break e;kw(i,a,c),s=u}else for(o=0;o<r.length;o++){if(a=r[o],u=a.instance,c=a.currentTarget,a=a.listener,u!==s&&i.isPropagationStopped())break e;kw(i,a,c),s=u}}}if(ec)throw t=If,ec=!1,If=null,t}function Ue(t,e){var n=e[jf];n===void 0&&(n=e[jf]=new Set);var r=t+"__bubble";n.has(r)||(zx(e,t,2,!1),n.add(r))}function kd(t,e,n){var r=0;e&&(r|=4),zx(n,t,r,e)}var au="_reactListening"+Math.random().toString(36).slice(2);function Za(t){if(!t[au]){t[au]=!0,K0.forEach(function(n){n!=="selectionchange"&&(jS.has(n)||kd(n,!1,t),kd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[au]||(e[au]=!0,kd("selectionchange",!1,e))}}function zx(t,e,n,r){switch(Ix(e)){case 1:var i=Kb;break;case 4:i=Qb;break;default:i=tm}n=i.bind(null,e,n,t),i=void 0,!kf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Id(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var a=r.stateNode.containerInfo;if(a===i||a.nodeType===8&&a.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var u=o.tag;if((u===3||u===4)&&(u=o.stateNode.containerInfo,u===i||u.nodeType===8&&u.parentNode===i))return;o=o.return}for(;a!==null;){if(o=Gi(a),o===null)return;if(u=o.tag,u===5||u===6){r=s=o;continue e}a=a.parentNode}}r=r.return}cx(function(){var c=s,d=Yp(n),f=[];e:{var m=Fx.get(t);if(m!==void 0){var g=rm,_=t;switch(t){case"keypress":if(Pu(n)===0)break e;case"keydown":case"keyup":g=cS;break;case"focusin":_="focus",g=yd;break;case"focusout":_="blur",g=yd;break;case"beforeblur":case"afterblur":g=yd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=hw;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=Jb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=fS;break;case Ox:case Lx:case Mx:g=tS;break;case Vx:g=mS;break;case"scroll":g=Xb;break;case"wheel":g=yS;break;case"copy":case"cut":case"paste":g=rS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=fw}var b=(e&4)!==0,P=!b&&t==="scroll",x=b?m!==null?m+"Capture":null:m;b=[];for(var k=c,E;k!==null;){E=k;var O=E.stateNode;if(E.tag===5&&O!==null&&(E=O,x!==null&&(O=Ga(k,x),O!=null&&b.push(el(k,O,E)))),P)break;k=k.return}0<b.length&&(m=new g(m,_,null,n,d),f.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",m&&n!==xf&&(_=n.relatedTarget||n.fromElement)&&(Gi(_)||_[Cr]))break e;if((g||m)&&(m=d.window===d?d:(m=d.ownerDocument)?m.defaultView||m.parentWindow:window,g?(_=n.relatedTarget||n.toElement,g=c,_=_?Gi(_):null,_!==null&&(P=gs(_),_!==P||_.tag!==5&&_.tag!==6)&&(_=null)):(g=null,_=c),g!==_)){if(b=hw,O="onMouseLeave",x="onMouseEnter",k="mouse",(t==="pointerout"||t==="pointerover")&&(b=fw,O="onPointerLeave",x="onPointerEnter",k="pointer"),P=g==null?m:Bs(g),E=_==null?m:Bs(_),m=new b(O,k+"leave",g,n,d),m.target=P,m.relatedTarget=E,O=null,Gi(d)===c&&(b=new b(x,k+"enter",_,n,d),b.target=E,b.relatedTarget=P,O=b),P=O,g&&_)t:{for(b=g,x=_,k=0,E=b;E;E=Rs(E))k++;for(E=0,O=x;O;O=Rs(O))E++;for(;0<k-E;)b=Rs(b),k--;for(;0<E-k;)x=Rs(x),E--;for(;k--;){if(b===x||x!==null&&b===x.alternate)break t;b=Rs(b),x=Rs(x)}b=null}else b=null;g!==null&&Iw(f,m,g,b,!1),_!==null&&P!==null&&Iw(f,P,_,b,!0)}}e:{if(m=c?Bs(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var M=IS;else if(gw(m))if(Nx)M=AS;else{M=bS;var D=TS}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(M=SS);if(M&&(M=M(t,c))){Cx(f,M,n,d);break e}D&&D(t,m,c),t==="focusout"&&(D=m._wrapperState)&&D.controlled&&m.type==="number"&&gf(m,"number",m.value)}switch(D=c?Bs(c):window,t){case"focusin":(gw(D)||D.contentEditable==="true")&&(Us=D,Af=c,Ca=null);break;case"focusout":Ca=Af=Us=null;break;case"mousedown":Cf=!0;break;case"contextmenu":case"mouseup":case"dragend":Cf=!1,xw(f,n,d);break;case"selectionchange":if(RS)break;case"keydown":case"keyup":xw(f,n,d)}var v;if(sm)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else Fs?Sx(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(bx&&n.locale!=="ko"&&(Fs||w!=="onCompositionStart"?w==="onCompositionEnd"&&Fs&&(v=Tx()):(ni=d,nm="value"in ni?ni.value:ni.textContent,Fs=!0)),D=sc(c,w),0<D.length&&(w=new dw(w,t,null,n,d),f.push({event:w,listeners:D}),v?w.data=v:(v=Ax(n),v!==null&&(w.data=v)))),(v=_S?vS(t,n):xS(t,n))&&(c=sc(c,"onBeforeInput"),0<c.length&&(d=new dw("onBeforeInput","beforeinput",null,n,d),f.push({event:d,listeners:c}),d.data=v))}Ux(f,e)})}function el(t,e,n){return{instance:t,listener:e,currentTarget:n}}function sc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Ga(t,n),s!=null&&r.unshift(el(t,s,i)),s=Ga(t,e),s!=null&&r.push(el(t,s,i))),t=t.return}return r}function Rs(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Iw(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var a=n,u=a.alternate,c=a.stateNode;if(u!==null&&u===r)break;a.tag===5&&c!==null&&(a=c,i?(u=Ga(n,s),u!=null&&o.unshift(el(n,u,a))):i||(u=Ga(n,s),u!=null&&o.push(el(n,u,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var OS=/\r\n?/g,LS=/\u0000|\uFFFD/g;function Tw(t){return(typeof t=="string"?t:""+t).replace(OS,`
`).replace(LS,"")}function lu(t,e,n){if(e=Tw(e),Tw(t)!==e&&n)throw Error(q(425))}function oc(){}var Nf=null,Rf=null;function Pf(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Df=typeof setTimeout=="function"?setTimeout:void 0,MS=typeof clearTimeout=="function"?clearTimeout:void 0,bw=typeof Promise=="function"?Promise:void 0,VS=typeof queueMicrotask=="function"?queueMicrotask:typeof bw<"u"?function(t){return bw.resolve(null).then(t).catch(FS)}:Df;function FS(t){setTimeout(function(){throw t})}function Td(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Xa(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Xa(e)}function li(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Sw(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ro=Math.random().toString(36).slice(2),tr="__reactFiber$"+Ro,tl="__reactProps$"+Ro,Cr="__reactContainer$"+Ro,jf="__reactEvents$"+Ro,US="__reactListeners$"+Ro,zS="__reactHandles$"+Ro;function Gi(t){var e=t[tr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Cr]||n[tr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Sw(t);t!==null;){if(n=t[tr])return n;t=Sw(t)}return e}t=n,n=t.parentNode}return null}function El(t){return t=t[tr]||t[Cr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Bs(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(q(33))}function Xc(t){return t[tl]||null}var Of=[],$s=-1;function Ci(t){return{current:t}}function ze(t){0>$s||(t.current=Of[$s],Of[$s]=null,$s--)}function Le(t,e){$s++,Of[$s]=t.current,t.current=e}var vi={},Pt=Ci(vi),Jt=Ci(!1),rs=vi;function co(t,e){var n=t.type.contextTypes;if(!n)return vi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Zt(t){return t=t.childContextTypes,t!=null}function ac(){ze(Jt),ze(Pt)}function Aw(t,e,n){if(Pt.current!==vi)throw Error(q(168));Le(Pt,e),Le(Jt,n)}function Bx(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(q(108,Tb(t)||"Unknown",i));return We({},n,r)}function lc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||vi,rs=Pt.current,Le(Pt,t),Le(Jt,Jt.current),!0}function Cw(t,e,n){var r=t.stateNode;if(!r)throw Error(q(169));n?(t=Bx(t,e,rs),r.__reactInternalMemoizedMergedChildContext=t,ze(Jt),ze(Pt),Le(Pt,t)):ze(Jt),Le(Jt,n)}var wr=null,Yc=!1,bd=!1;function $x(t){wr===null?wr=[t]:wr.push(t)}function BS(t){Yc=!0,$x(t)}function Ni(){if(!bd&&wr!==null){bd=!0;var t=0,e=Ne;try{var n=wr;for(Ne=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}wr=null,Yc=!1}catch(i){throw wr!==null&&(wr=wr.slice(t+1)),px(Jp,Ni),i}finally{Ne=e,bd=!1}}return null}var qs=[],Hs=0,uc=null,cc=0,xn=[],En=0,is=null,vr=1,xr="";function Bi(t,e){qs[Hs++]=cc,qs[Hs++]=uc,uc=t,cc=e}function qx(t,e,n){xn[En++]=vr,xn[En++]=xr,xn[En++]=is,is=t;var r=vr;t=xr;var i=32-On(r)-1;r&=~(1<<i),n+=1;var s=32-On(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,vr=1<<32-On(e)+i|n<<i|r,xr=s+t}else vr=1<<s|n<<i|r,xr=t}function am(t){t.return!==null&&(Bi(t,1),qx(t,1,0))}function lm(t){for(;t===uc;)uc=qs[--Hs],qs[Hs]=null,cc=qs[--Hs],qs[Hs]=null;for(;t===is;)is=xn[--En],xn[En]=null,xr=xn[--En],xn[En]=null,vr=xn[--En],xn[En]=null}var pn=null,cn=null,Be=!1,Dn=null;function Hx(t,e){var n=In(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Nw(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,pn=t,cn=li(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,pn=t,cn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=is!==null?{id:vr,overflow:xr}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=In(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,pn=t,cn=null,!0):!1;default:return!1}}function Lf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Mf(t){if(Be){var e=cn;if(e){var n=e;if(!Nw(t,e)){if(Lf(t))throw Error(q(418));e=li(n.nextSibling);var r=pn;e&&Nw(t,e)?Hx(r,n):(t.flags=t.flags&-4097|2,Be=!1,pn=t)}}else{if(Lf(t))throw Error(q(418));t.flags=t.flags&-4097|2,Be=!1,pn=t}}}function Rw(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;pn=t}function uu(t){if(t!==pn)return!1;if(!Be)return Rw(t),Be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Pf(t.type,t.memoizedProps)),e&&(e=cn)){if(Lf(t))throw Wx(),Error(q(418));for(;e;)Hx(t,e),e=li(e.nextSibling)}if(Rw(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(q(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){cn=li(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}cn=null}}else cn=pn?li(t.stateNode.nextSibling):null;return!0}function Wx(){for(var t=cn;t;)t=li(t.nextSibling)}function ho(){cn=pn=null,Be=!1}function um(t){Dn===null?Dn=[t]:Dn.push(t)}var $S=Mr.ReactCurrentBatchConfig;function la(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(q(309));var r=n.stateNode}if(!r)throw Error(q(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=i.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(q(284));if(!n._owner)throw Error(q(290,t))}return t}function cu(t,e){throw t=Object.prototype.toString.call(e),Error(q(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Pw(t){var e=t._init;return e(t._payload)}function Gx(t){function e(x,k){if(t){var E=x.deletions;E===null?(x.deletions=[k],x.flags|=16):E.push(k)}}function n(x,k){if(!t)return null;for(;k!==null;)e(x,k),k=k.sibling;return null}function r(x,k){for(x=new Map;k!==null;)k.key!==null?x.set(k.key,k):x.set(k.index,k),k=k.sibling;return x}function i(x,k){return x=di(x,k),x.index=0,x.sibling=null,x}function s(x,k,E){return x.index=E,t?(E=x.alternate,E!==null?(E=E.index,E<k?(x.flags|=2,k):E):(x.flags|=2,k)):(x.flags|=1048576,k)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function a(x,k,E,O){return k===null||k.tag!==6?(k=Dd(E,x.mode,O),k.return=x,k):(k=i(k,E),k.return=x,k)}function u(x,k,E,O){var M=E.type;return M===Vs?d(x,k,E.props.children,O,E.key):k!==null&&(k.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Gr&&Pw(M)===k.type)?(O=i(k,E.props),O.ref=la(x,k,E),O.return=x,O):(O=Fu(E.type,E.key,E.props,null,x.mode,O),O.ref=la(x,k,E),O.return=x,O)}function c(x,k,E,O){return k===null||k.tag!==4||k.stateNode.containerInfo!==E.containerInfo||k.stateNode.implementation!==E.implementation?(k=jd(E,x.mode,O),k.return=x,k):(k=i(k,E.children||[]),k.return=x,k)}function d(x,k,E,O,M){return k===null||k.tag!==7?(k=Zi(E,x.mode,O,M),k.return=x,k):(k=i(k,E),k.return=x,k)}function f(x,k,E){if(typeof k=="string"&&k!==""||typeof k=="number")return k=Dd(""+k,x.mode,E),k.return=x,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case Zl:return E=Fu(k.type,k.key,k.props,null,x.mode,E),E.ref=la(x,null,k),E.return=x,E;case Ms:return k=jd(k,x.mode,E),k.return=x,k;case Gr:var O=k._init;return f(x,O(k._payload),E)}if(ga(k)||ra(k))return k=Zi(k,x.mode,E,null),k.return=x,k;cu(x,k)}return null}function m(x,k,E,O){var M=k!==null?k.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return M!==null?null:a(x,k,""+E,O);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Zl:return E.key===M?u(x,k,E,O):null;case Ms:return E.key===M?c(x,k,E,O):null;case Gr:return M=E._init,m(x,k,M(E._payload),O)}if(ga(E)||ra(E))return M!==null?null:d(x,k,E,O,null);cu(x,E)}return null}function g(x,k,E,O,M){if(typeof O=="string"&&O!==""||typeof O=="number")return x=x.get(E)||null,a(k,x,""+O,M);if(typeof O=="object"&&O!==null){switch(O.$$typeof){case Zl:return x=x.get(O.key===null?E:O.key)||null,u(k,x,O,M);case Ms:return x=x.get(O.key===null?E:O.key)||null,c(k,x,O,M);case Gr:var D=O._init;return g(x,k,E,D(O._payload),M)}if(ga(O)||ra(O))return x=x.get(E)||null,d(k,x,O,M,null);cu(k,O)}return null}function _(x,k,E,O){for(var M=null,D=null,v=k,w=k=0,I=null;v!==null&&w<E.length;w++){v.index>w?(I=v,v=null):I=v.sibling;var S=m(x,v,E[w],O);if(S===null){v===null&&(v=I);break}t&&v&&S.alternate===null&&e(x,v),k=s(S,k,w),D===null?M=S:D.sibling=S,D=S,v=I}if(w===E.length)return n(x,v),Be&&Bi(x,w),M;if(v===null){for(;w<E.length;w++)v=f(x,E[w],O),v!==null&&(k=s(v,k,w),D===null?M=v:D.sibling=v,D=v);return Be&&Bi(x,w),M}for(v=r(x,v);w<E.length;w++)I=g(v,x,w,E[w],O),I!==null&&(t&&I.alternate!==null&&v.delete(I.key===null?w:I.key),k=s(I,k,w),D===null?M=I:D.sibling=I,D=I);return t&&v.forEach(function(A){return e(x,A)}),Be&&Bi(x,w),M}function b(x,k,E,O){var M=ra(E);if(typeof M!="function")throw Error(q(150));if(E=M.call(E),E==null)throw Error(q(151));for(var D=M=null,v=k,w=k=0,I=null,S=E.next();v!==null&&!S.done;w++,S=E.next()){v.index>w?(I=v,v=null):I=v.sibling;var A=m(x,v,S.value,O);if(A===null){v===null&&(v=I);break}t&&v&&A.alternate===null&&e(x,v),k=s(A,k,w),D===null?M=A:D.sibling=A,D=A,v=I}if(S.done)return n(x,v),Be&&Bi(x,w),M;if(v===null){for(;!S.done;w++,S=E.next())S=f(x,S.value,O),S!==null&&(k=s(S,k,w),D===null?M=S:D.sibling=S,D=S);return Be&&Bi(x,w),M}for(v=r(x,v);!S.done;w++,S=E.next())S=g(v,x,w,S.value,O),S!==null&&(t&&S.alternate!==null&&v.delete(S.key===null?w:S.key),k=s(S,k,w),D===null?M=S:D.sibling=S,D=S);return t&&v.forEach(function(R){return e(x,R)}),Be&&Bi(x,w),M}function P(x,k,E,O){if(typeof E=="object"&&E!==null&&E.type===Vs&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Zl:e:{for(var M=E.key,D=k;D!==null;){if(D.key===M){if(M=E.type,M===Vs){if(D.tag===7){n(x,D.sibling),k=i(D,E.props.children),k.return=x,x=k;break e}}else if(D.elementType===M||typeof M=="object"&&M!==null&&M.$$typeof===Gr&&Pw(M)===D.type){n(x,D.sibling),k=i(D,E.props),k.ref=la(x,D,E),k.return=x,x=k;break e}n(x,D);break}else e(x,D);D=D.sibling}E.type===Vs?(k=Zi(E.props.children,x.mode,O,E.key),k.return=x,x=k):(O=Fu(E.type,E.key,E.props,null,x.mode,O),O.ref=la(x,k,E),O.return=x,x=O)}return o(x);case Ms:e:{for(D=E.key;k!==null;){if(k.key===D)if(k.tag===4&&k.stateNode.containerInfo===E.containerInfo&&k.stateNode.implementation===E.implementation){n(x,k.sibling),k=i(k,E.children||[]),k.return=x,x=k;break e}else{n(x,k);break}else e(x,k);k=k.sibling}k=jd(E,x.mode,O),k.return=x,x=k}return o(x);case Gr:return D=E._init,P(x,k,D(E._payload),O)}if(ga(E))return _(x,k,E,O);if(ra(E))return b(x,k,E,O);cu(x,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,k!==null&&k.tag===6?(n(x,k.sibling),k=i(k,E),k.return=x,x=k):(n(x,k),k=Dd(E,x.mode,O),k.return=x,x=k),o(x)):n(x,k)}return P}var fo=Gx(!0),Kx=Gx(!1),hc=Ci(null),dc=null,Ws=null,cm=null;function hm(){cm=Ws=dc=null}function dm(t){var e=hc.current;ze(hc),t._currentValue=e}function Vf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function eo(t,e){dc=t,cm=Ws=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Yt=!0),t.firstContext=null)}function bn(t){var e=t._currentValue;if(cm!==t)if(t={context:t,memoizedValue:e,next:null},Ws===null){if(dc===null)throw Error(q(308));Ws=t,dc.dependencies={lanes:0,firstContext:t}}else Ws=Ws.next=t;return e}var Ki=null;function fm(t){Ki===null?Ki=[t]:Ki.push(t)}function Qx(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,fm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Nr(t,r)}function Nr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Kr=!1;function pm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Xx(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Ir(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function ui(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,Te&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Nr(t,n)}return i=r.interleaved,i===null?(e.next=e,fm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Nr(t,n)}function Du(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zp(t,n)}}function Dw(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function fc(t,e,n,r){var i=t.updateQueue;Kr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,a=i.shared.pending;if(a!==null){i.shared.pending=null;var u=a,c=u.next;u.next=null,o===null?s=c:o.next=c,o=u;var d=t.alternate;d!==null&&(d=d.updateQueue,a=d.lastBaseUpdate,a!==o&&(a===null?d.firstBaseUpdate=c:a.next=c,d.lastBaseUpdate=u))}if(s!==null){var f=i.baseState;o=0,d=c=u=null,a=s;do{var m=a.lane,g=a.eventTime;if((r&m)===m){d!==null&&(d=d.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var _=t,b=a;switch(m=e,g=n,b.tag){case 1:if(_=b.payload,typeof _=="function"){f=_.call(g,f,m);break e}f=_;break e;case 3:_.flags=_.flags&-65537|128;case 0:if(_=b.payload,m=typeof _=="function"?_.call(g,f,m):_,m==null)break e;f=We({},f,m);break e;case 2:Kr=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,m=i.effects,m===null?i.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},d===null?(c=d=g,u=f):d=d.next=g,o|=m;if(a=a.next,a===null){if(a=i.shared.pending,a===null)break;m=a,a=m.next,m.next=null,i.lastBaseUpdate=m,i.shared.pending=null}}while(!0);if(d===null&&(u=f),i.baseState=u,i.firstBaseUpdate=c,i.lastBaseUpdate=d,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);os|=o,t.lanes=o,t.memoizedState=f}}function jw(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(q(191,i));i.call(r)}}}var kl={},sr=Ci(kl),nl=Ci(kl),rl=Ci(kl);function Qi(t){if(t===kl)throw Error(q(174));return t}function mm(t,e){switch(Le(rl,e),Le(nl,t),Le(sr,kl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:wf(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=wf(e,t)}ze(sr),Le(sr,e)}function po(){ze(sr),ze(nl),ze(rl)}function Yx(t){Qi(rl.current);var e=Qi(sr.current),n=wf(e,t.type);e!==n&&(Le(nl,t),Le(sr,n))}function gm(t){nl.current===t&&(ze(sr),ze(nl))}var $e=Ci(0);function pc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function ym(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var ju=Mr.ReactCurrentDispatcher,Ad=Mr.ReactCurrentBatchConfig,ss=0,He=null,ut=null,yt=null,mc=!1,Na=!1,il=0,qS=0;function Tt(){throw Error(q(321))}function wm(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!zn(t[n],e[n]))return!1;return!0}function _m(t,e,n,r,i,s){if(ss=s,He=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,ju.current=t===null||t.memoizedState===null?KS:QS,t=n(r,i),Na){s=0;do{if(Na=!1,il=0,25<=s)throw Error(q(301));s+=1,yt=ut=null,e.updateQueue=null,ju.current=XS,t=n(r,i)}while(Na)}if(ju.current=gc,e=ut!==null&&ut.next!==null,ss=0,yt=ut=He=null,mc=!1,e)throw Error(q(300));return t}function vm(){var t=il!==0;return il=0,t}function Jn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return yt===null?He.memoizedState=yt=t:yt=yt.next=t,yt}function Sn(){if(ut===null){var t=He.alternate;t=t!==null?t.memoizedState:null}else t=ut.next;var e=yt===null?He.memoizedState:yt.next;if(e!==null)yt=e,ut=t;else{if(t===null)throw Error(q(310));ut=t,t={memoizedState:ut.memoizedState,baseState:ut.baseState,baseQueue:ut.baseQueue,queue:ut.queue,next:null},yt===null?He.memoizedState=yt=t:yt=yt.next=t}return yt}function sl(t,e){return typeof e=="function"?e(t):e}function Cd(t){var e=Sn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=ut,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var a=o=null,u=null,c=s;do{var d=c.lane;if((ss&d)===d)u!==null&&(u=u.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var f={lane:d,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};u===null?(a=u=f,o=r):u=u.next=f,He.lanes|=d,os|=d}c=c.next}while(c!==null&&c!==s);u===null?o=r:u.next=a,zn(r,e.memoizedState)||(Yt=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=u,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,He.lanes|=s,os|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Nd(t){var e=Sn(),n=e.queue;if(n===null)throw Error(q(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);zn(s,e.memoizedState)||(Yt=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Jx(){}function Zx(t,e){var n=He,r=Sn(),i=e(),s=!zn(r.memoizedState,i);if(s&&(r.memoizedState=i,Yt=!0),r=r.queue,xm(n1.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||yt!==null&&yt.memoizedState.tag&1){if(n.flags|=2048,ol(9,t1.bind(null,n,r,i,e),void 0,null),_t===null)throw Error(q(349));ss&30||e1(n,e,i)}return i}function e1(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function t1(t,e,n,r){e.value=n,e.getSnapshot=r,r1(e)&&i1(t)}function n1(t,e,n){return n(function(){r1(e)&&i1(t)})}function r1(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!zn(t,n)}catch{return!0}}function i1(t){var e=Nr(t,1);e!==null&&Ln(e,t,1,-1)}function Ow(t){var e=Jn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sl,lastRenderedState:t},e.queue=t,t=t.dispatch=GS.bind(null,He,t),[e.memoizedState,t]}function ol(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=He.updateQueue,e===null?(e={lastEffect:null,stores:null},He.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function s1(){return Sn().memoizedState}function Ou(t,e,n,r){var i=Jn();He.flags|=t,i.memoizedState=ol(1|e,n,void 0,r===void 0?null:r)}function Jc(t,e,n,r){var i=Sn();r=r===void 0?null:r;var s=void 0;if(ut!==null){var o=ut.memoizedState;if(s=o.destroy,r!==null&&wm(r,o.deps)){i.memoizedState=ol(e,n,s,r);return}}He.flags|=t,i.memoizedState=ol(1|e,n,s,r)}function Lw(t,e){return Ou(8390656,8,t,e)}function xm(t,e){return Jc(2048,8,t,e)}function o1(t,e){return Jc(4,2,t,e)}function a1(t,e){return Jc(4,4,t,e)}function l1(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function u1(t,e,n){return n=n!=null?n.concat([t]):null,Jc(4,4,l1.bind(null,e,t),n)}function Em(){}function c1(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wm(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function h1(t,e){var n=Sn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&wm(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function d1(t,e,n){return ss&21?(zn(n,e)||(n=yx(),He.lanes|=n,os|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Yt=!0),t.memoizedState=n)}function HS(t,e){var n=Ne;Ne=n!==0&&4>n?n:4,t(!0);var r=Ad.transition;Ad.transition={};try{t(!1),e()}finally{Ne=n,Ad.transition=r}}function f1(){return Sn().memoizedState}function WS(t,e,n){var r=hi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},p1(t))m1(e,n);else if(n=Qx(t,e,n,r),n!==null){var i=Ft();Ln(n,t,r,i),g1(n,e,r)}}function GS(t,e,n){var r=hi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(p1(t))m1(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(i.hasEagerState=!0,i.eagerState=a,zn(a,o)){var u=e.interleaved;u===null?(i.next=i,fm(e)):(i.next=u.next,u.next=i),e.interleaved=i;return}}catch{}finally{}n=Qx(t,e,i,r),n!==null&&(i=Ft(),Ln(n,t,r,i),g1(n,e,r))}}function p1(t){var e=t.alternate;return t===He||e!==null&&e===He}function m1(t,e){Na=mc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function g1(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Zp(t,n)}}var gc={readContext:bn,useCallback:Tt,useContext:Tt,useEffect:Tt,useImperativeHandle:Tt,useInsertionEffect:Tt,useLayoutEffect:Tt,useMemo:Tt,useReducer:Tt,useRef:Tt,useState:Tt,useDebugValue:Tt,useDeferredValue:Tt,useTransition:Tt,useMutableSource:Tt,useSyncExternalStore:Tt,useId:Tt,unstable_isNewReconciler:!1},KS={readContext:bn,useCallback:function(t,e){return Jn().memoizedState=[t,e===void 0?null:e],t},useContext:bn,useEffect:Lw,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ou(4194308,4,l1.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ou(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ou(4,2,t,e)},useMemo:function(t,e){var n=Jn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=Jn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=WS.bind(null,He,t),[r.memoizedState,t]},useRef:function(t){var e=Jn();return t={current:t},e.memoizedState=t},useState:Ow,useDebugValue:Em,useDeferredValue:function(t){return Jn().memoizedState=t},useTransition:function(){var t=Ow(!1),e=t[0];return t=HS.bind(null,t[1]),Jn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=He,i=Jn();if(Be){if(n===void 0)throw Error(q(407));n=n()}else{if(n=e(),_t===null)throw Error(q(349));ss&30||e1(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Lw(n1.bind(null,r,s,t),[t]),r.flags|=2048,ol(9,t1.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=Jn(),e=_t.identifierPrefix;if(Be){var n=xr,r=vr;n=(r&~(1<<32-On(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=il++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=qS++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},QS={readContext:bn,useCallback:c1,useContext:bn,useEffect:xm,useImperativeHandle:u1,useInsertionEffect:o1,useLayoutEffect:a1,useMemo:h1,useReducer:Cd,useRef:s1,useState:function(){return Cd(sl)},useDebugValue:Em,useDeferredValue:function(t){var e=Sn();return d1(e,ut.memoizedState,t)},useTransition:function(){var t=Cd(sl)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:Jx,useSyncExternalStore:Zx,useId:f1,unstable_isNewReconciler:!1},XS={readContext:bn,useCallback:c1,useContext:bn,useEffect:xm,useImperativeHandle:u1,useInsertionEffect:o1,useLayoutEffect:a1,useMemo:h1,useReducer:Nd,useRef:s1,useState:function(){return Nd(sl)},useDebugValue:Em,useDeferredValue:function(t){var e=Sn();return ut===null?e.memoizedState=t:d1(e,ut.memoizedState,t)},useTransition:function(){var t=Nd(sl)[0],e=Sn().memoizedState;return[t,e]},useMutableSource:Jx,useSyncExternalStore:Zx,useId:f1,unstable_isNewReconciler:!1};function Rn(t,e){if(t&&t.defaultProps){e=We({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ff(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:We({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Zc={isMounted:function(t){return(t=t._reactInternals)?gs(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=hi(t),s=Ir(r,i);s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(Ln(e,t,i,r),Du(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Ft(),i=hi(t),s=Ir(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=ui(t,s,i),e!==null&&(Ln(e,t,i,r),Du(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Ft(),r=hi(t),i=Ir(n,r);i.tag=2,e!=null&&(i.callback=e),e=ui(t,i,r),e!==null&&(Ln(e,t,r,n),Du(e,t,r))}};function Mw(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ja(n,r)||!Ja(i,s):!0}function y1(t,e,n){var r=!1,i=vi,s=e.contextType;return typeof s=="object"&&s!==null?s=bn(s):(i=Zt(e)?rs:Pt.current,r=e.contextTypes,s=(r=r!=null)?co(t,i):vi),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Zc,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Vw(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Zc.enqueueReplaceState(e,e.state,null)}function Uf(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},pm(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=bn(s):(s=Zt(e)?rs:Pt.current,i.context=co(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ff(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Zc.enqueueReplaceState(i,i.state,null),fc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function mo(t,e){try{var n="",r=e;do n+=Ib(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function zf(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var YS=typeof WeakMap=="function"?WeakMap:Map;function w1(t,e,n){n=Ir(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){wc||(wc=!0,Yf=r),zf(t,e)},n}function _1(t,e,n){n=Ir(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){zf(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){zf(t,e),typeof r!="function"&&(ci===null?ci=new Set([this]):ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Fw(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new YS;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=hA.bind(null,t,e,n),e.then(t,t))}function Uw(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function zw(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Ir(-1,1),e.tag=2,ui(n,e,1))),n.lanes|=1),t)}var JS=Mr.ReactCurrentOwner,Yt=!1;function Vt(t,e,n,r){e.child=t===null?Kx(e,null,n,r):fo(e,t.child,n,r)}function Bw(t,e,n,r,i){n=n.render;var s=e.ref;return eo(e,i),r=_m(t,e,n,r,s,i),n=vm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rr(t,e,i)):(Be&&n&&am(e),e.flags|=1,Vt(t,e,r,i),e.child)}function $w(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Nm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,v1(t,e,s,r,i)):(t=Fu(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ja,n(o,r)&&t.ref===e.ref)return Rr(t,e,i)}return e.flags|=1,t=di(s,r),t.ref=e.ref,t.return=e,e.child=t}function v1(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ja(s,r)&&t.ref===e.ref)if(Yt=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Yt=!0);else return e.lanes=t.lanes,Rr(t,e,i)}return Bf(t,e,n,r,i)}function x1(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(Ks,an),an|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(Ks,an),an|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Le(Ks,an),an|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Le(Ks,an),an|=r;return Vt(t,e,i,n),e.child}function E1(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Bf(t,e,n,r,i){var s=Zt(n)?rs:Pt.current;return s=co(e,s),eo(e,i),n=_m(t,e,n,r,s,i),r=vm(),t!==null&&!Yt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Rr(t,e,i)):(Be&&r&&am(e),e.flags|=1,Vt(t,e,n,i),e.child)}function qw(t,e,n,r,i){if(Zt(n)){var s=!0;lc(e)}else s=!1;if(eo(e,i),e.stateNode===null)Lu(t,e),y1(e,n,r),Uf(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var u=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=bn(c):(c=Zt(n)?rs:Pt.current,c=co(e,c));var d=n.getDerivedStateFromProps,f=typeof d=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==r||u!==c)&&Vw(e,o,r,c),Kr=!1;var m=e.memoizedState;o.state=m,fc(e,r,o,i),u=e.memoizedState,a!==r||m!==u||Jt.current||Kr?(typeof d=="function"&&(Ff(e,n,d,r),u=e.memoizedState),(a=Kr||Mw(e,n,a,r,m,u,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=u),o.props=r,o.state=u,o.context=c,r=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Xx(t,e),a=e.memoizedProps,c=e.type===e.elementType?a:Rn(e.type,a),o.props=c,f=e.pendingProps,m=o.context,u=n.contextType,typeof u=="object"&&u!==null?u=bn(u):(u=Zt(n)?rs:Pt.current,u=co(e,u));var g=n.getDerivedStateFromProps;(d=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==u)&&Vw(e,o,r,u),Kr=!1,m=e.memoizedState,o.state=m,fc(e,r,o,i);var _=e.memoizedState;a!==f||m!==_||Jt.current||Kr?(typeof g=="function"&&(Ff(e,n,g,r),_=e.memoizedState),(c=Kr||Mw(e,n,c,r,m,_,u)||!1)?(d||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,_,u),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,_,u)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=_),o.props=r,o.state=_,o.context=u,r=c):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),r=!1)}return $f(t,e,n,r,s,i)}function $f(t,e,n,r,i,s){E1(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Cw(e,n,!1),Rr(t,e,s);r=e.stateNode,JS.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=fo(e,t.child,null,s),e.child=fo(e,null,a,s)):Vt(t,e,a,s),e.memoizedState=r.state,i&&Cw(e,n,!0),e.child}function k1(t){var e=t.stateNode;e.pendingContext?Aw(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Aw(t,e.context,!1),mm(t,e.containerInfo)}function Hw(t,e,n,r,i){return ho(),um(i),e.flags|=256,Vt(t,e,n,r),e.child}var qf={dehydrated:null,treeContext:null,retryLane:0};function Hf(t){return{baseLanes:t,cachePool:null,transitions:null}}function I1(t,e,n){var r=e.pendingProps,i=$e.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(i&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Le($e,i&1),t===null)return Mf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=nh(o,r,0,null),t=Zi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Hf(n),e.memoizedState=qf,t):km(e,o));if(i=t.memoizedState,i!==null&&(a=i.dehydrated,a!==null))return ZS(t,e,o,r,a,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,a=i.sibling;var u={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=u,e.deletions=null):(r=di(i,u),r.subtreeFlags=i.subtreeFlags&14680064),a!==null?s=di(a,s):(s=Zi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Hf(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=qf,r}return s=t.child,t=s.sibling,r=di(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function km(t,e){return e=nh({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hu(t,e,n,r){return r!==null&&um(r),fo(e,t.child,null,n),t=km(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function ZS(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rd(Error(q(422))),hu(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=nh({mode:"visible",children:r.children},i,0,null),s=Zi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&fo(e,t.child,null,o),e.child.memoizedState=Hf(o),e.memoizedState=qf,s);if(!(e.mode&1))return hu(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var a=r.dgst;return r=a,s=Error(q(419)),r=Rd(s,r,void 0),hu(t,e,o,r)}if(a=(o&t.childLanes)!==0,Yt||a){if(r=_t,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Nr(t,i),Ln(r,t,i,-1))}return Cm(),r=Rd(Error(q(421))),hu(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=dA.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,cn=li(i.nextSibling),pn=e,Be=!0,Dn=null,t!==null&&(xn[En++]=vr,xn[En++]=xr,xn[En++]=is,vr=t.id,xr=t.overflow,is=e),e=km(e,r.children),e.flags|=4096,e)}function Ww(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Vf(t.return,e,n)}function Pd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function T1(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Vt(t,e,r.children,n),r=$e.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ww(t,n,e);else if(t.tag===19)Ww(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Le($e,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&pc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Pd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&pc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Pd(e,!0,n,null,s);break;case"together":Pd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Lu(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Rr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),os|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(q(153));if(e.child!==null){for(t=e.child,n=di(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=di(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function eA(t,e,n){switch(e.tag){case 3:k1(e),ho();break;case 5:Yx(e);break;case 1:Zt(e.type)&&lc(e);break;case 4:mm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Le(hc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Le($e,$e.current&1),e.flags|=128,null):n&e.child.childLanes?I1(t,e,n):(Le($e,$e.current&1),t=Rr(t,e,n),t!==null?t.sibling:null);Le($e,$e.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return T1(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Le($e,$e.current),r)break;return null;case 22:case 23:return e.lanes=0,x1(t,e,n)}return Rr(t,e,n)}var b1,Wf,S1,A1;b1=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Wf=function(){};S1=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Qi(sr.current);var s=null;switch(n){case"input":i=pf(t,i),r=pf(t,r),s=[];break;case"select":i=We({},i,{value:void 0}),r=We({},r,{value:void 0}),s=[];break;case"textarea":i=yf(t,i),r=yf(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=oc)}_f(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var a=i[c];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ha.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var u=r[c];if(a=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&u!==a&&(u!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||u&&u.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in u)u.hasOwnProperty(o)&&a[o]!==u[o]&&(n||(n={}),n[o]=u[o])}else n||(s||(s=[]),s.push(c,n)),n=u;else c==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,a=a?a.__html:void 0,u!=null&&a!==u&&(s=s||[]).push(c,u)):c==="children"?typeof u!="string"&&typeof u!="number"||(s=s||[]).push(c,""+u):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ha.hasOwnProperty(c)?(u!=null&&c==="onScroll"&&Ue("scroll",t),s||a===u||(s=[])):(s=s||[]).push(c,u))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};A1=function(t,e,n,r){n!==r&&(e.flags|=4)};function ua(t,e){if(!Be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function tA(t,e,n){var r=e.pendingProps;switch(lm(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return Zt(e.type)&&ac(),bt(e),null;case 3:return r=e.stateNode,po(),ze(Jt),ze(Pt),ym(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(uu(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Dn!==null&&(ep(Dn),Dn=null))),Wf(t,e),bt(e),null;case 5:gm(e);var i=Qi(rl.current);if(n=e.type,t!==null&&e.stateNode!=null)S1(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(q(166));return bt(e),null}if(t=Qi(sr.current),uu(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[tr]=e,r[tl]=s,t=(e.mode&1)!==0,n){case"dialog":Ue("cancel",r),Ue("close",r);break;case"iframe":case"object":case"embed":Ue("load",r);break;case"video":case"audio":for(i=0;i<wa.length;i++)Ue(wa[i],r);break;case"source":Ue("error",r);break;case"img":case"image":case"link":Ue("error",r),Ue("load",r);break;case"details":Ue("toggle",r);break;case"input":tw(r,s),Ue("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Ue("invalid",r);break;case"textarea":rw(r,s),Ue("invalid",r)}_f(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?r.textContent!==a&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,a,t),i=["children",a]):typeof a=="number"&&r.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&lu(r.textContent,a,t),i=["children",""+a]):Ha.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Ue("scroll",r)}switch(n){case"input":eu(r),nw(r,s,!0);break;case"textarea":eu(r),iw(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=oc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=nx(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[tr]=e,t[tl]=r,b1(t,e,!1,!1),e.stateNode=t;e:{switch(o=vf(n,r),n){case"dialog":Ue("cancel",t),Ue("close",t),i=r;break;case"iframe":case"object":case"embed":Ue("load",t),i=r;break;case"video":case"audio":for(i=0;i<wa.length;i++)Ue(wa[i],t);i=r;break;case"source":Ue("error",t),i=r;break;case"img":case"image":case"link":Ue("error",t),Ue("load",t),i=r;break;case"details":Ue("toggle",t),i=r;break;case"input":tw(t,r),i=pf(t,r),Ue("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=We({},r,{value:void 0}),Ue("invalid",t);break;case"textarea":rw(t,r),i=yf(t,r),Ue("invalid",t);break;default:i=r}_f(n,i),a=i;for(s in a)if(a.hasOwnProperty(s)){var u=a[s];s==="style"?sx(t,u):s==="dangerouslySetInnerHTML"?(u=u?u.__html:void 0,u!=null&&rx(t,u)):s==="children"?typeof u=="string"?(n!=="textarea"||u!=="")&&Wa(t,u):typeof u=="number"&&Wa(t,""+u):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Ha.hasOwnProperty(s)?u!=null&&s==="onScroll"&&Ue("scroll",t):u!=null&&Gp(t,s,u,o))}switch(n){case"input":eu(t),nw(t,r,!1);break;case"textarea":eu(t),iw(t);break;case"option":r.value!=null&&t.setAttribute("value",""+_i(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?Xs(t,!!r.multiple,s,!1):r.defaultValue!=null&&Xs(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=oc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)A1(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(q(166));if(n=Qi(rl.current),Qi(sr.current),uu(e)){if(r=e.stateNode,n=e.memoizedProps,r[tr]=e,(s=r.nodeValue!==n)&&(t=pn,t!==null))switch(t.tag){case 3:lu(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&lu(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[tr]=e,e.stateNode=r}return bt(e),null;case 13:if(ze($e),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Be&&cn!==null&&e.mode&1&&!(e.flags&128))Wx(),ho(),e.flags|=98560,s=!1;else if(s=uu(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(q(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(q(317));s[tr]=e}else ho(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),s=!1}else Dn!==null&&(ep(Dn),Dn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||$e.current&1?ct===0&&(ct=3):Cm())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return po(),Wf(t,e),t===null&&Za(e.stateNode.containerInfo),bt(e),null;case 10:return dm(e.type._context),bt(e),null;case 17:return Zt(e.type)&&ac(),bt(e),null;case 19:if(ze($e),s=e.memoizedState,s===null)return bt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)ua(s,!1);else{if(ct!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=pc(t),o!==null){for(e.flags|=128,ua(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Le($e,$e.current&1|2),e.child}t=t.sibling}s.tail!==null&&tt()>go&&(e.flags|=128,r=!0,ua(s,!1),e.lanes=4194304)}else{if(!r)if(t=pc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),ua(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Be)return bt(e),null}else 2*tt()-s.renderingStartTime>go&&n!==1073741824&&(e.flags|=128,r=!0,ua(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=tt(),e.sibling=null,n=$e.current,Le($e,r?n&1|2:n&1),e):(bt(e),null);case 22:case 23:return Am(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?an&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(q(156,e.tag))}function nA(t,e){switch(lm(e),e.tag){case 1:return Zt(e.type)&&ac(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return po(),ze(Jt),ze(Pt),ym(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return gm(e),null;case 13:if(ze($e),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(q(340));ho()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return ze($e),null;case 4:return po(),null;case 10:return dm(e.type._context),null;case 22:case 23:return Am(),null;case 24:return null;default:return null}}var du=!1,Ct=!1,rA=typeof WeakSet=="function"?WeakSet:Set,Z=null;function Gs(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Qe(t,e,r)}else n.current=null}function Gf(t,e,n){try{n()}catch(r){Qe(t,e,r)}}var Gw=!1;function iA(t,e){if(Nf=rc,t=Dx(),om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,u=-1,c=0,d=0,f=t,m=null;t:for(;;){for(var g;f!==n||i!==0&&f.nodeType!==3||(a=o+i),f!==s||r!==0&&f.nodeType!==3||(u=o+r),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===t)break t;if(m===n&&++c===i&&(a=o),m===s&&++d===r&&(u=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}n=a===-1||u===-1?null:{start:a,end:u}}else n=null}n=n||{start:0,end:0}}else n=null;for(Rf={focusedElem:t,selectionRange:n},rc=!1,Z=e;Z!==null;)if(e=Z,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Z=t;else for(;Z!==null;){e=Z;try{var _=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var b=_.memoizedProps,P=_.memoizedState,x=e.stateNode,k=x.getSnapshotBeforeUpdate(e.elementType===e.type?b:Rn(e.type,b),P);x.__reactInternalSnapshotBeforeUpdate=k}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(q(163))}}catch(O){Qe(e,e.return,O)}if(t=e.sibling,t!==null){t.return=e.return,Z=t;break}Z=e.return}return _=Gw,Gw=!1,_}function Ra(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Gf(e,n,s)}i=i.next}while(i!==r)}}function eh(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Kf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function C1(t){var e=t.alternate;e!==null&&(t.alternate=null,C1(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[tr],delete e[tl],delete e[jf],delete e[US],delete e[zS])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function N1(t){return t.tag===5||t.tag===3||t.tag===4}function Kw(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||N1(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Qf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=oc));else if(r!==4&&(t=t.child,t!==null))for(Qf(t,e,n),t=t.sibling;t!==null;)Qf(t,e,n),t=t.sibling}function Xf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Xf(t,e,n),t=t.sibling;t!==null;)Xf(t,e,n),t=t.sibling}var xt=null,Pn=!1;function qr(t,e,n){for(n=n.child;n!==null;)R1(t,e,n),n=n.sibling}function R1(t,e,n){if(ir&&typeof ir.onCommitFiberUnmount=="function")try{ir.onCommitFiberUnmount(Wc,n)}catch{}switch(n.tag){case 5:Ct||Gs(n,e);case 6:var r=xt,i=Pn;xt=null,qr(t,e,n),xt=r,Pn=i,xt!==null&&(Pn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(Pn?(t=xt,n=n.stateNode,t.nodeType===8?Td(t.parentNode,n):t.nodeType===1&&Td(t,n),Xa(t)):Td(xt,n.stateNode));break;case 4:r=xt,i=Pn,xt=n.stateNode.containerInfo,Pn=!0,qr(t,e,n),xt=r,Pn=i;break;case 0:case 11:case 14:case 15:if(!Ct&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Gf(n,e,o),i=i.next}while(i!==r)}qr(t,e,n);break;case 1:if(!Ct&&(Gs(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(a){Qe(n,e,a)}qr(t,e,n);break;case 21:qr(t,e,n);break;case 22:n.mode&1?(Ct=(r=Ct)||n.memoizedState!==null,qr(t,e,n),Ct=r):qr(t,e,n);break;default:qr(t,e,n)}}function Qw(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new rA),e.forEach(function(r){var i=fA.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Nn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:xt=a.stateNode,Pn=!1;break e;case 3:xt=a.stateNode.containerInfo,Pn=!0;break e;case 4:xt=a.stateNode.containerInfo,Pn=!0;break e}a=a.return}if(xt===null)throw Error(q(160));R1(s,o,i),xt=null,Pn=!1;var u=i.alternate;u!==null&&(u.return=null),i.return=null}catch(c){Qe(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)P1(e,t),e=e.sibling}function P1(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Nn(e,t),Yn(t),r&4){try{Ra(3,t,t.return),eh(3,t)}catch(b){Qe(t,t.return,b)}try{Ra(5,t,t.return)}catch(b){Qe(t,t.return,b)}}break;case 1:Nn(e,t),Yn(t),r&512&&n!==null&&Gs(n,n.return);break;case 5:if(Nn(e,t),Yn(t),r&512&&n!==null&&Gs(n,n.return),t.flags&32){var i=t.stateNode;try{Wa(i,"")}catch(b){Qe(t,t.return,b)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,u=t.updateQueue;if(t.updateQueue=null,u!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&ex(i,s),vf(a,o);var c=vf(a,s);for(o=0;o<u.length;o+=2){var d=u[o],f=u[o+1];d==="style"?sx(i,f):d==="dangerouslySetInnerHTML"?rx(i,f):d==="children"?Wa(i,f):Gp(i,d,f,c)}switch(a){case"input":mf(i,s);break;case"textarea":tx(i,s);break;case"select":var m=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Xs(i,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Xs(i,!!s.multiple,s.defaultValue,!0):Xs(i,!!s.multiple,s.multiple?[]:"",!1))}i[tl]=s}catch(b){Qe(t,t.return,b)}}break;case 6:if(Nn(e,t),Yn(t),r&4){if(t.stateNode===null)throw Error(q(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(b){Qe(t,t.return,b)}}break;case 3:if(Nn(e,t),Yn(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Xa(e.containerInfo)}catch(b){Qe(t,t.return,b)}break;case 4:Nn(e,t),Yn(t);break;case 13:Nn(e,t),Yn(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(bm=tt())),r&4&&Qw(t);break;case 22:if(d=n!==null&&n.memoizedState!==null,t.mode&1?(Ct=(c=Ct)||d,Nn(e,t),Ct=c):Nn(e,t),Yn(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!d&&t.mode&1)for(Z=t,d=t.child;d!==null;){for(f=Z=d;Z!==null;){switch(m=Z,g=m.child,m.tag){case 0:case 11:case 14:case 15:Ra(4,m,m.return);break;case 1:Gs(m,m.return);var _=m.stateNode;if(typeof _.componentWillUnmount=="function"){r=m,n=m.return;try{e=r,_.props=e.memoizedProps,_.state=e.memoizedState,_.componentWillUnmount()}catch(b){Qe(r,n,b)}}break;case 5:Gs(m,m.return);break;case 22:if(m.memoizedState!==null){Yw(f);continue}}g!==null?(g.return=m,Z=g):Yw(f)}d=d.sibling}e:for(d=null,f=t;;){if(f.tag===5){if(d===null){d=f;try{i=f.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,u=f.memoizedProps.style,o=u!=null&&u.hasOwnProperty("display")?u.display:null,a.style.display=ix("display",o))}catch(b){Qe(t,t.return,b)}}}else if(f.tag===6){if(d===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){Qe(t,t.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===t)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===t)break e;for(;f.sibling===null;){if(f.return===null||f.return===t)break e;d===f&&(d=null),f=f.return}d===f&&(d=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:Nn(e,t),Yn(t),r&4&&Qw(t);break;case 21:break;default:Nn(e,t),Yn(t)}}function Yn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(N1(n)){var r=n;break e}n=n.return}throw Error(q(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Wa(i,""),r.flags&=-33);var s=Kw(t);Xf(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,a=Kw(t);Qf(t,a,o);break;default:throw Error(q(161))}}catch(u){Qe(t,t.return,u)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function sA(t,e,n){Z=t,D1(t)}function D1(t,e,n){for(var r=(t.mode&1)!==0;Z!==null;){var i=Z,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||du;if(!o){var a=i.alternate,u=a!==null&&a.memoizedState!==null||Ct;a=du;var c=Ct;if(du=o,(Ct=u)&&!c)for(Z=i;Z!==null;)o=Z,u=o.child,o.tag===22&&o.memoizedState!==null?Jw(i):u!==null?(u.return=o,Z=u):Jw(i);for(;s!==null;)Z=s,D1(s),s=s.sibling;Z=i,du=a,Ct=c}Xw(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,Z=s):Xw(t)}}function Xw(t){for(;Z!==null;){var e=Z;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ct||eh(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ct)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:Rn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&jw(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}jw(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var u=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":u.autoFocus&&n.focus();break;case"img":u.src&&(n.src=u.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var d=c.memoizedState;if(d!==null){var f=d.dehydrated;f!==null&&Xa(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(q(163))}Ct||e.flags&512&&Kf(e)}catch(m){Qe(e,e.return,m)}}if(e===t){Z=null;break}if(n=e.sibling,n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Yw(t){for(;Z!==null;){var e=Z;if(e===t){Z=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Z=n;break}Z=e.return}}function Jw(t){for(;Z!==null;){var e=Z;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{eh(4,e)}catch(u){Qe(e,n,u)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(u){Qe(e,i,u)}}var s=e.return;try{Kf(e)}catch(u){Qe(e,s,u)}break;case 5:var o=e.return;try{Kf(e)}catch(u){Qe(e,o,u)}}}catch(u){Qe(e,e.return,u)}if(e===t){Z=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Z=a;break}Z=e.return}}var oA=Math.ceil,yc=Mr.ReactCurrentDispatcher,Im=Mr.ReactCurrentOwner,Tn=Mr.ReactCurrentBatchConfig,Te=0,_t=null,it=null,kt=0,an=0,Ks=Ci(0),ct=0,al=null,os=0,th=0,Tm=0,Pa=null,Qt=null,bm=0,go=1/0,yr=null,wc=!1,Yf=null,ci=null,fu=!1,ri=null,_c=0,Da=0,Jf=null,Mu=-1,Vu=0;function Ft(){return Te&6?tt():Mu!==-1?Mu:Mu=tt()}function hi(t){return t.mode&1?Te&2&&kt!==0?kt&-kt:$S.transition!==null?(Vu===0&&(Vu=yx()),Vu):(t=Ne,t!==0||(t=window.event,t=t===void 0?16:Ix(t.type)),t):1}function Ln(t,e,n,r){if(50<Da)throw Da=0,Jf=null,Error(q(185));vl(t,n,r),(!(Te&2)||t!==_t)&&(t===_t&&(!(Te&2)&&(th|=n),ct===4&&Xr(t,kt)),en(t,r),n===1&&Te===0&&!(e.mode&1)&&(go=tt()+500,Yc&&Ni()))}function en(t,e){var n=t.callbackNode;$b(t,e);var r=nc(t,t===_t?kt:0);if(r===0)n!==null&&aw(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&aw(n),e===1)t.tag===0?BS(Zw.bind(null,t)):$x(Zw.bind(null,t)),VS(function(){!(Te&6)&&Ni()}),n=null;else{switch(wx(r)){case 1:n=Jp;break;case 4:n=mx;break;case 16:n=tc;break;case 536870912:n=gx;break;default:n=tc}n=z1(n,j1.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function j1(t,e){if(Mu=-1,Vu=0,Te&6)throw Error(q(327));var n=t.callbackNode;if(to()&&t.callbackNode!==n)return null;var r=nc(t,t===_t?kt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=vc(t,r);else{e=r;var i=Te;Te|=2;var s=L1();(_t!==t||kt!==e)&&(yr=null,go=tt()+500,Ji(t,e));do try{uA();break}catch(a){O1(t,a)}while(!0);hm(),yc.current=s,Te=i,it!==null?e=0:(_t=null,kt=0,e=ct)}if(e!==0){if(e===2&&(i=Tf(t),i!==0&&(r=i,e=Zf(t,i))),e===1)throw n=al,Ji(t,0),Xr(t,r),en(t,tt()),n;if(e===6)Xr(t,r);else{if(i=t.current.alternate,!(r&30)&&!aA(i)&&(e=vc(t,r),e===2&&(s=Tf(t),s!==0&&(r=s,e=Zf(t,s))),e===1))throw n=al,Ji(t,0),Xr(t,r),en(t,tt()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(q(345));case 2:$i(t,Qt,yr);break;case 3:if(Xr(t,r),(r&130023424)===r&&(e=bm+500-tt(),10<e)){if(nc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Ft(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Df($i.bind(null,t,Qt,yr),e);break}$i(t,Qt,yr);break;case 4:if(Xr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-On(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=tt()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*oA(r/1960))-r,10<r){t.timeoutHandle=Df($i.bind(null,t,Qt,yr),r);break}$i(t,Qt,yr);break;case 5:$i(t,Qt,yr);break;default:throw Error(q(329))}}}return en(t,tt()),t.callbackNode===n?j1.bind(null,t):null}function Zf(t,e){var n=Pa;return t.current.memoizedState.isDehydrated&&(Ji(t,e).flags|=256),t=vc(t,e),t!==2&&(e=Qt,Qt=n,e!==null&&ep(e)),t}function ep(t){Qt===null?Qt=t:Qt.push.apply(Qt,t)}function aA(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!zn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Xr(t,e){for(e&=~Tm,e&=~th,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-On(e),r=1<<n;t[n]=-1,e&=~r}}function Zw(t){if(Te&6)throw Error(q(327));to();var e=nc(t,0);if(!(e&1))return en(t,tt()),null;var n=vc(t,e);if(t.tag!==0&&n===2){var r=Tf(t);r!==0&&(e=r,n=Zf(t,r))}if(n===1)throw n=al,Ji(t,0),Xr(t,e),en(t,tt()),n;if(n===6)throw Error(q(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,$i(t,Qt,yr),en(t,tt()),null}function Sm(t,e){var n=Te;Te|=1;try{return t(e)}finally{Te=n,Te===0&&(go=tt()+500,Yc&&Ni())}}function as(t){ri!==null&&ri.tag===0&&!(Te&6)&&to();var e=Te;Te|=1;var n=Tn.transition,r=Ne;try{if(Tn.transition=null,Ne=1,t)return t()}finally{Ne=r,Tn.transition=n,Te=e,!(Te&6)&&Ni()}}function Am(){an=Ks.current,ze(Ks)}function Ji(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,MS(n)),it!==null)for(n=it.return;n!==null;){var r=n;switch(lm(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ac();break;case 3:po(),ze(Jt),ze(Pt),ym();break;case 5:gm(r);break;case 4:po();break;case 13:ze($e);break;case 19:ze($e);break;case 10:dm(r.type._context);break;case 22:case 23:Am()}n=n.return}if(_t=t,it=t=di(t.current,null),kt=an=e,ct=0,al=null,Tm=th=os=0,Qt=Pa=null,Ki!==null){for(e=0;e<Ki.length;e++)if(n=Ki[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}Ki=null}return t}function O1(t,e){do{var n=it;try{if(hm(),ju.current=gc,mc){for(var r=He.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}mc=!1}if(ss=0,yt=ut=He=null,Na=!1,il=0,Im.current=null,n===null||n.return===null){ct=1,al=e,it=null;break}e:{var s=t,o=n.return,a=n,u=e;if(e=kt,a.flags|=32768,u!==null&&typeof u=="object"&&typeof u.then=="function"){var c=u,d=a,f=d.tag;if(!(d.mode&1)&&(f===0||f===11||f===15)){var m=d.alternate;m?(d.updateQueue=m.updateQueue,d.memoizedState=m.memoizedState,d.lanes=m.lanes):(d.updateQueue=null,d.memoizedState=null)}var g=Uw(o);if(g!==null){g.flags&=-257,zw(g,o,a,s,e),g.mode&1&&Fw(s,c,e),e=g,u=c;var _=e.updateQueue;if(_===null){var b=new Set;b.add(u),e.updateQueue=b}else _.add(u);break e}else{if(!(e&1)){Fw(s,c,e),Cm();break e}u=Error(q(426))}}else if(Be&&a.mode&1){var P=Uw(o);if(P!==null){!(P.flags&65536)&&(P.flags|=256),zw(P,o,a,s,e),um(mo(u,a));break e}}s=u=mo(u,a),ct!==4&&(ct=2),Pa===null?Pa=[s]:Pa.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var x=w1(s,u,e);Dw(s,x);break e;case 1:a=u;var k=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof k.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(ci===null||!ci.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var O=_1(s,a,e);Dw(s,O);break e}}s=s.return}while(s!==null)}V1(n)}catch(M){e=M,it===n&&n!==null&&(it=n=n.return);continue}break}while(!0)}function L1(){var t=yc.current;return yc.current=gc,t===null?gc:t}function Cm(){(ct===0||ct===3||ct===2)&&(ct=4),_t===null||!(os&268435455)&&!(th&268435455)||Xr(_t,kt)}function vc(t,e){var n=Te;Te|=2;var r=L1();(_t!==t||kt!==e)&&(yr=null,Ji(t,e));do try{lA();break}catch(i){O1(t,i)}while(!0);if(hm(),Te=n,yc.current=r,it!==null)throw Error(q(261));return _t=null,kt=0,ct}function lA(){for(;it!==null;)M1(it)}function uA(){for(;it!==null&&!jb();)M1(it)}function M1(t){var e=U1(t.alternate,t,an);t.memoizedProps=t.pendingProps,e===null?V1(t):it=e,Im.current=null}function V1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=nA(n,e),n!==null){n.flags&=32767,it=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{ct=6,it=null;return}}else if(n=tA(n,e,an),n!==null){it=n;return}if(e=e.sibling,e!==null){it=e;return}it=e=t}while(e!==null);ct===0&&(ct=5)}function $i(t,e,n){var r=Ne,i=Tn.transition;try{Tn.transition=null,Ne=1,cA(t,e,n,r)}finally{Tn.transition=i,Ne=r}return null}function cA(t,e,n,r){do to();while(ri!==null);if(Te&6)throw Error(q(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(q(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(qb(t,s),t===_t&&(it=_t=null,kt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||fu||(fu=!0,z1(tc,function(){return to(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Tn.transition,Tn.transition=null;var o=Ne;Ne=1;var a=Te;Te|=4,Im.current=null,iA(t,n),P1(n,t),NS(Rf),rc=!!Nf,Rf=Nf=null,t.current=n,sA(n),Ob(),Te=a,Ne=o,Tn.transition=s}else t.current=n;if(fu&&(fu=!1,ri=t,_c=i),s=t.pendingLanes,s===0&&(ci=null),Vb(n.stateNode),en(t,tt()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(wc)throw wc=!1,t=Yf,Yf=null,t;return _c&1&&t.tag!==0&&to(),s=t.pendingLanes,s&1?t===Jf?Da++:(Da=0,Jf=t):Da=0,Ni(),null}function to(){if(ri!==null){var t=wx(_c),e=Tn.transition,n=Ne;try{if(Tn.transition=null,Ne=16>t?16:t,ri===null)var r=!1;else{if(t=ri,ri=null,_c=0,Te&6)throw Error(q(331));var i=Te;for(Te|=4,Z=t.current;Z!==null;){var s=Z,o=s.child;if(Z.flags&16){var a=s.deletions;if(a!==null){for(var u=0;u<a.length;u++){var c=a[u];for(Z=c;Z!==null;){var d=Z;switch(d.tag){case 0:case 11:case 15:Ra(8,d,s)}var f=d.child;if(f!==null)f.return=d,Z=f;else for(;Z!==null;){d=Z;var m=d.sibling,g=d.return;if(C1(d),d===c){Z=null;break}if(m!==null){m.return=g,Z=m;break}Z=g}}}var _=s.alternate;if(_!==null){var b=_.child;if(b!==null){_.child=null;do{var P=b.sibling;b.sibling=null,b=P}while(b!==null)}}Z=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Z=o;else e:for(;Z!==null;){if(s=Z,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ra(9,s,s.return)}var x=s.sibling;if(x!==null){x.return=s.return,Z=x;break e}Z=s.return}}var k=t.current;for(Z=k;Z!==null;){o=Z;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,Z=E;else e:for(o=k;Z!==null;){if(a=Z,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:eh(9,a)}}catch(M){Qe(a,a.return,M)}if(a===o){Z=null;break e}var O=a.sibling;if(O!==null){O.return=a.return,Z=O;break e}Z=a.return}}if(Te=i,Ni(),ir&&typeof ir.onPostCommitFiberRoot=="function")try{ir.onPostCommitFiberRoot(Wc,t)}catch{}r=!0}return r}finally{Ne=n,Tn.transition=e}}return!1}function e_(t,e,n){e=mo(n,e),e=w1(t,e,1),t=ui(t,e,1),e=Ft(),t!==null&&(vl(t,1,e),en(t,e))}function Qe(t,e,n){if(t.tag===3)e_(t,t,n);else for(;e!==null;){if(e.tag===3){e_(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(ci===null||!ci.has(r))){t=mo(n,t),t=_1(e,t,1),e=ui(e,t,1),t=Ft(),e!==null&&(vl(e,1,t),en(e,t));break}}e=e.return}}function hA(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Ft(),t.pingedLanes|=t.suspendedLanes&n,_t===t&&(kt&n)===n&&(ct===4||ct===3&&(kt&130023424)===kt&&500>tt()-bm?Ji(t,0):Tm|=n),en(t,e)}function F1(t,e){e===0&&(t.mode&1?(e=ru,ru<<=1,!(ru&130023424)&&(ru=4194304)):e=1);var n=Ft();t=Nr(t,e),t!==null&&(vl(t,e,n),en(t,n))}function dA(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),F1(t,n)}function fA(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(q(314))}r!==null&&r.delete(e),F1(t,n)}var U1;U1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Jt.current)Yt=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Yt=!1,eA(t,e,n);Yt=!!(t.flags&131072)}else Yt=!1,Be&&e.flags&1048576&&qx(e,cc,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Lu(t,e),t=e.pendingProps;var i=co(e,Pt.current);eo(e,n),i=_m(null,e,r,t,i,n);var s=vm();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Zt(r)?(s=!0,lc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,pm(e),i.updater=Zc,e.stateNode=i,i._reactInternals=e,Uf(e,r,t,n),e=$f(null,e,r,!0,s,n)):(e.tag=0,Be&&s&&am(e),Vt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Lu(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=mA(r),t=Rn(r,t),i){case 0:e=Bf(null,e,r,t,n);break e;case 1:e=qw(null,e,r,t,n);break e;case 11:e=Bw(null,e,r,t,n);break e;case 14:e=$w(null,e,r,Rn(r.type,t),n);break e}throw Error(q(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),Bf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),qw(t,e,r,i,n);case 3:e:{if(k1(e),t===null)throw Error(q(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Xx(t,e),fc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=mo(Error(q(423)),e),e=Hw(t,e,r,n,i);break e}else if(r!==i){i=mo(Error(q(424)),e),e=Hw(t,e,r,n,i);break e}else for(cn=li(e.stateNode.containerInfo.firstChild),pn=e,Be=!0,Dn=null,n=Kx(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ho(),r===i){e=Rr(t,e,n);break e}Vt(t,e,r,n)}e=e.child}return e;case 5:return Yx(e),t===null&&Mf(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Pf(r,i)?o=null:s!==null&&Pf(r,s)&&(e.flags|=32),E1(t,e),Vt(t,e,o,n),e.child;case 6:return t===null&&Mf(e),null;case 13:return I1(t,e,n);case 4:return mm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=fo(e,null,r,n):Vt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),Bw(t,e,r,i,n);case 7:return Vt(t,e,e.pendingProps,n),e.child;case 8:return Vt(t,e,e.pendingProps.children,n),e.child;case 12:return Vt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Le(hc,r._currentValue),r._currentValue=o,s!==null)if(zn(s.value,o)){if(s.children===i.children&&!Jt.current){e=Rr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var u=a.firstContext;u!==null;){if(u.context===r){if(s.tag===1){u=Ir(-1,n&-n),u.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var d=c.pending;d===null?u.next=u:(u.next=d.next,d.next=u),c.pending=u}}s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Vf(s.return,n,e),a.lanes|=n;break}u=u.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(q(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Vf(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Vt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,eo(e,n),i=bn(i),r=r(i),e.flags|=1,Vt(t,e,r,n),e.child;case 14:return r=e.type,i=Rn(r,e.pendingProps),i=Rn(r.type,i),$w(t,e,r,i,n);case 15:return v1(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:Rn(r,i),Lu(t,e),e.tag=1,Zt(r)?(t=!0,lc(e)):t=!1,eo(e,n),y1(e,r,i),Uf(e,r,i,n),$f(null,e,r,!0,t,n);case 19:return T1(t,e,n);case 22:return x1(t,e,n)}throw Error(q(156,e.tag))};function z1(t,e){return px(t,e)}function pA(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function In(t,e,n,r){return new pA(t,e,n,r)}function Nm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function mA(t){if(typeof t=="function")return Nm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Qp)return 11;if(t===Xp)return 14}return 2}function di(t,e){var n=t.alternate;return n===null?(n=In(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Fu(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Nm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Vs:return Zi(n.children,i,s,e);case Kp:o=8,i|=8;break;case cf:return t=In(12,n,e,i|2),t.elementType=cf,t.lanes=s,t;case hf:return t=In(13,n,e,i),t.elementType=hf,t.lanes=s,t;case df:return t=In(19,n,e,i),t.elementType=df,t.lanes=s,t;case Y0:return nh(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Q0:o=10;break e;case X0:o=9;break e;case Qp:o=11;break e;case Xp:o=14;break e;case Gr:o=16,r=null;break e}throw Error(q(130,t==null?t:typeof t,""))}return e=In(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Zi(t,e,n,r){return t=In(7,t,r,e),t.lanes=n,t}function nh(t,e,n,r){return t=In(22,t,r,e),t.elementType=Y0,t.lanes=n,t.stateNode={isHidden:!1},t}function Dd(t,e,n){return t=In(6,t,null,e),t.lanes=n,t}function jd(t,e,n){return e=In(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function gA(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=pd(0),this.expirationTimes=pd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=pd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function Rm(t,e,n,r,i,s,o,a,u){return t=new gA(t,e,n,a,u),e===1?(e=1,s===!0&&(e|=8)):e=0,s=In(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},pm(s),t}function yA(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ms,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function B1(t){if(!t)return vi;t=t._reactInternals;e:{if(gs(t)!==t||t.tag!==1)throw Error(q(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Zt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(q(171))}if(t.tag===1){var n=t.type;if(Zt(n))return Bx(t,n,e)}return e}function $1(t,e,n,r,i,s,o,a,u){return t=Rm(n,r,!0,t,i,s,o,a,u),t.context=B1(null),n=t.current,r=Ft(),i=hi(n),s=Ir(r,i),s.callback=e??null,ui(n,s,i),t.current.lanes=i,vl(t,i,r),en(t,r),t}function rh(t,e,n,r){var i=e.current,s=Ft(),o=hi(i);return n=B1(n),e.context===null?e.context=n:e.pendingContext=n,e=Ir(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=ui(i,e,o),t!==null&&(Ln(t,i,o,s),Du(t,i,o)),o}function xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function t_(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Pm(t,e){t_(t,e),(t=t.alternate)&&t_(t,e)}function wA(){return null}var q1=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dm(t){this._internalRoot=t}ih.prototype.render=Dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(q(409));rh(t,e,null,null)};ih.prototype.unmount=Dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;as(function(){rh(null,t,null,null)}),e[Cr]=null}};function ih(t){this._internalRoot=t}ih.prototype.unstable_scheduleHydration=function(t){if(t){var e=xx();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Qr.length&&e!==0&&e<Qr[n].priority;n++);Qr.splice(n,0,t),n===0&&kx(t)}};function jm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function sh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function n_(){}function _A(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=xc(o);s.call(c)}}var o=$1(e,r,t,0,null,!1,!1,"",n_);return t._reactRootContainer=o,t[Cr]=o.current,Za(t.nodeType===8?t.parentNode:t),as(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var a=r;r=function(){var c=xc(u);a.call(c)}}var u=Rm(t,0,!1,null,null,!1,!1,"",n_);return t._reactRootContainer=u,t[Cr]=u.current,Za(t.nodeType===8?t.parentNode:t),as(function(){rh(e,u,n,r)}),u}function oh(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var a=i;i=function(){var u=xc(o);a.call(u)}}rh(e,o,t,i)}else o=_A(n,e,t,i,r);return xc(o)}_x=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ya(e.pendingLanes);n!==0&&(Zp(e,n|1),en(e,tt()),!(Te&6)&&(go=tt()+500,Ni()))}break;case 13:as(function(){var r=Nr(t,1);if(r!==null){var i=Ft();Ln(r,t,1,i)}}),Pm(t,1)}};em=function(t){if(t.tag===13){var e=Nr(t,134217728);if(e!==null){var n=Ft();Ln(e,t,134217728,n)}Pm(t,134217728)}};vx=function(t){if(t.tag===13){var e=hi(t),n=Nr(t,e);if(n!==null){var r=Ft();Ln(n,t,e,r)}Pm(t,e)}};xx=function(){return Ne};Ex=function(t,e){var n=Ne;try{return Ne=t,e()}finally{Ne=n}};Ef=function(t,e,n){switch(e){case"input":if(mf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xc(r);if(!i)throw Error(q(90));Z0(r),mf(r,i)}}}break;case"textarea":tx(t,n);break;case"select":e=n.value,e!=null&&Xs(t,!!n.multiple,e,!1)}};lx=Sm;ux=as;var vA={usingClientEntryPoint:!1,Events:[El,Bs,Xc,ox,ax,Sm]},ca={findFiberByHostInstance:Gi,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},xA={bundleType:ca.bundleType,version:ca.version,rendererPackageName:ca.rendererPackageName,rendererConfig:ca.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=dx(t),t===null?null:t.stateNode},findFiberByHostInstance:ca.findFiberByHostInstance||wA,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var pu=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!pu.isDisabled&&pu.supportsFiber)try{Wc=pu.inject(xA),ir=pu}catch{}}yn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=vA;yn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!jm(e))throw Error(q(200));return yA(t,e,null,n)};yn.createRoot=function(t,e){if(!jm(t))throw Error(q(299));var n=!1,r="",i=q1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=Rm(t,1,!1,null,null,n,!1,r,i),t[Cr]=e.current,Za(t.nodeType===8?t.parentNode:t),new Dm(e)};yn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(q(188)):(t=Object.keys(t).join(","),Error(q(268,t)));return t=dx(e),t=t===null?null:t.stateNode,t};yn.flushSync=function(t){return as(t)};yn.hydrate=function(t,e,n){if(!sh(e))throw Error(q(200));return oh(null,t,e,!0,n)};yn.hydrateRoot=function(t,e,n){if(!jm(t))throw Error(q(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=q1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=$1(e,null,t,1,n??null,i,!1,s,o),t[Cr]=e.current,Za(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new ih(e)};yn.render=function(t,e,n){if(!sh(e))throw Error(q(200));return oh(null,t,e,!1,n)};yn.unmountComponentAtNode=function(t){if(!sh(t))throw Error(q(40));return t._reactRootContainer?(as(function(){oh(null,null,t,!1,function(){t._reactRootContainer=null,t[Cr]=null})}),!0):!1};yn.unstable_batchedUpdates=Sm;yn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!sh(n))throw Error(q(200));if(t==null||t._reactInternals===void 0)throw Error(q(38));return oh(t,e,n,!1,r)};yn.version="18.3.1-next-f1338f8080-20240426";function H1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(H1)}catch(t){console.error(t)}}H1(),H0.exports=yn;var EA=H0.exports,r_=EA;lf.createRoot=r_.createRoot,lf.hydrateRoot=r_.hydrateRoot;const kA="modulepreload",IA=function(t,e){return new URL(t,e).href},i_={},Gt=function(e,n,r){let i=Promise.resolve();if(n&&n.length>0){const o=document.getElementsByTagName("link"),a=document.querySelector("meta[property=csp-nonce]"),u=(a==null?void 0:a.nonce)||(a==null?void 0:a.getAttribute("nonce"));i=Promise.allSettled(n.map(c=>{if(c=IA(c,r),c in i_)return;i_[c]=!0;const d=c.endsWith(".css"),f=d?'[rel="stylesheet"]':"";if(!!r)for(let _=o.length-1;_>=0;_--){const b=o[_];if(b.href===c&&(!d||b.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${c}"]${f}`))return;const g=document.createElement("link");if(g.rel=d?"stylesheet":kA,d||(g.as="script"),g.crossOrigin="",g.href=c,u&&g.setAttribute("nonce",u),document.head.appendChild(g),d)return new Promise((_,b)=>{g.addEventListener("load",_),g.addEventListener("error",()=>b(new Error(`Unable to preload CSS for ${c}`)))})}))}function s(o){const a=new Event("vite:preloadError",{cancelable:!0});if(a.payload=o,window.dispatchEvent(a),!a.defaultPrevented)throw o}return i.then(o=>{for(const a of o||[])a.status==="rejected"&&s(a.reason);return e().catch(s)})};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var TA={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bA=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase().trim(),le=(t,e)=>{const n=F.forwardRef(({color:r="currentColor",size:i=24,strokeWidth:s=2,absoluteStrokeWidth:o,className:a="",children:u,...c},d)=>F.createElement("svg",{ref:d,...TA,width:i,height:i,stroke:r,strokeWidth:o?Number(s)*24/Number(i):s,className:["lucide",`lucide-${bA(t)}`,a].join(" "),...c},[...e.map(([f,m])=>F.createElement(f,m)),...Array.isArray(u)?u:[u]]));return n.displayName=`${t}`,n};/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SA=le("ArrowDown",[["path",{d:"M12 5v14",key:"s699le"}],["path",{d:"m19 12-7 7-7-7",key:"1idqje"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Hi=le("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AA=le("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CA=le("ArrowUp",[["path",{d:"m5 12 7-7 7 7",key:"hav0vg"}],["path",{d:"M12 19V5",key:"x0mq9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NA=le("Ban",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m4.9 4.9 14.2 14.2",key:"1m5liu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RA=le("Bold",[["path",{d:"M14 12a4 4 0 0 0 0-8H6v8",key:"v2sylx"}],["path",{d:"M15 20a4 4 0 0 0 0-8H6v8Z",key:"1ef5ya"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Om=le("Bookmark",[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PA=le("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DA=le("Camera",[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jA=le("CheckCircle2",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OA=le("CheckSquare",[["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}],["path",{d:"M21 12v7a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11",key:"1jnkn4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LA=le("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MA=le("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W1=le("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const G1=le("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ec=le("Crown",[["path",{d:"m2 4 3 12h14l3-12-6 7-4-7-4 7-6-7zm3 16h14",key:"zkxr6b"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VA=le("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FA=le("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UA=le("Feather",[["path",{d:"M20.24 12.24a6 6 0 0 0-8.49-8.49L5 10.5V19h8.5z",key:"u4sw5n"}],["line",{x1:"16",x2:"2",y1:"8",y2:"22",key:"1c47m2"}],["line",{x1:"17.5",x2:"9",y1:"15",y2:"15",key:"2fj3pr"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zA=le("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BA=le("Heading1",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"m17 12 3-2v8",key:"1hhhft"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $A=le("Heading2",[["path",{d:"M4 12h8",key:"17cfdx"}],["path",{d:"M4 18V6",key:"1rz3zl"}],["path",{d:"M12 18V6",key:"zqpxq5"}],["path",{d:"M21 18h-4c0-4 4-3 4-6 0-1.5-2-2.5-4-1",key:"9jr5yi"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const K1=le("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qA=le("Home",[["path",{d:"m3 9 9-7 9 7v11a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"y5dka4"}],["polyline",{points:"9 22 9 12 15 12 15 22",key:"e2us08"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tp=le("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HA=le("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WA=le("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GA=le("Link",[["path",{d:"M10 13a5 5 0 0 0 7.54.54l3-3a5 5 0 0 0-7.07-7.07l-1.72 1.71",key:"1cjeqo"}],["path",{d:"M14 11a5 5 0 0 0-7.54-.54l-3 3a5 5 0 0 0 7.07 7.07l1.71-1.71",key:"19qd67"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KA=le("List",[["line",{x1:"8",x2:"21",y1:"6",y2:"6",key:"7ey8pc"}],["line",{x1:"8",x2:"21",y1:"12",y2:"12",key:"rjfblc"}],["line",{x1:"8",x2:"21",y1:"18",y2:"18",key:"c3b1m8"}],["line",{x1:"3",x2:"3.01",y1:"6",y2:"6",key:"1g7gq3"}],["line",{x1:"3",x2:"3.01",y1:"12",y2:"12",key:"1pjlvk"}],["line",{x1:"3",x2:"3.01",y1:"18",y2:"18",key:"28t2mc"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s_=le("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ah=le("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Lm=le("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QA=le("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XA=le("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Q1=le("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lh=le("Pen",[["path",{d:"M17 3a2.85 2.83 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5Z",key:"5qss01"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o_=le("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const es=le("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YA=le("Quote",[["path",{d:"M3 21c3 0 7-1 7-8V5c0-1.25-.756-2.017-2-2H4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2 1 0 1 0 1 1v1c0 1-1 2-2 2s-1 .008-1 1.031V20c0 1 0 1 1 1z",key:"4rm80e"}],["path",{d:"M15 21c3 0 7-1 7-8V5c0-1.25-.757-2.017-2-2h-4c-1.25 0-2 .75-2 1.972V11c0 1.25.75 2 2 2h.75c0 2.25.25 4-2.75 4v3c0 1 0 1 1 1z",key:"10za9r"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JA=le("Save",[["path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z",key:"1owoqh"}],["polyline",{points:"17 21 17 13 7 13 7 21",key:"1md35c"}],["polyline",{points:"7 3 7 8 15 8",key:"8nz8an"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZA=le("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eC=le("Share2",[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const X1=le("Tag",[["path",{d:"M12 2H2v10l9.29 9.29c.94.94 2.48.94 3.42 0l6.58-6.58c.94-.94.94-2.48 0-3.42L12 2Z",key:"14b2ls"}],["path",{d:"M7 7h.01",key:"7u93v4"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yo=le("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tC=le("Trophy",[["path",{d:"M6 9H4.5a2.5 2.5 0 0 1 0-5H6",key:"17hqa7"}],["path",{d:"M18 9h1.5a2.5 2.5 0 0 0 0-5H18",key:"lmptdp"}],["path",{d:"M4 22h16",key:"57wxv0"}],["path",{d:"M10 14.66V17c0 .55-.47.98-.97 1.21C7.85 18.75 7 20.24 7 22",key:"1nw9bq"}],["path",{d:"M14 14.66V17c0 .55.47.98.97 1.21C16.15 18.75 17 20.24 17 22",key:"1np0yb"}],["path",{d:"M18 2H6v7a6 6 0 0 0 12 0V2Z",key:"u46fv3"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ys=le("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ts=le("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bn=le("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.294.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nC=le("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),rC=()=>{};var a_={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y1=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},iC=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],a=t[n++],u=((i&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[r++]=String.fromCharCode(55296+(u>>10)),e[r++]=String.fromCharCode(56320+(u&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},J1={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,a=o?t[i+1]:0,u=i+2<t.length,c=u?t[i+2]:0,d=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;u||(g=64,o||(m=64)),r.push(n[d],n[f],n[m],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Y1(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):iC(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],a=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const f=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||a==null||c==null||f==null)throw new sC;const m=s<<2|a>>4;if(r.push(m),c!==64){const g=a<<4&240|c>>2;if(r.push(g),f!==64){const _=c<<6&192|f;r.push(_)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sC extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const oC=function(t){const e=Y1(t);return J1.encodeByteArray(e,!0)},kc=function(t){return oC(t).replace(/\./g,"")},Z1=function(t){try{return J1.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aC(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lC=()=>aC().__FIREBASE_DEFAULTS__,uC=()=>{if(typeof process>"u"||typeof a_>"u")return;const t=a_.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},cC=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Z1(t[1]);return e&&JSON.parse(e)},uh=()=>{try{return rC()||lC()||uC()||cC()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},eE=t=>{var e,n;return(n=(e=uh())==null?void 0:e.emulatorHosts)==null?void 0:n[t]},tE=t=>{const e=eE(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},nE=()=>{var t;return(t=uh())==null?void 0:t.config},rE=t=>{var e;return(e=uh())==null?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ri(t){try{return(t.startsWith("http://")||t.startsWith("https://")?new URL(t).hostname:t).endsWith(".cloudworkstations.dev")}catch{return!1}}async function Mm(t){return(await fetch(t,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iE(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o={iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}},...t};return[kc(JSON.stringify(n)),kc(JSON.stringify(o)),""].join(".")}const ja={};function dC(){const t={prod:[],emulator:[]};for(const e of Object.keys(ja))ja[e]?t.emulator.push(e):t.prod.push(e);return t}function fC(t){let e=document.getElementById(t),n=!1;return e||(e=document.createElement("div"),e.setAttribute("id",t),n=!0),{created:n,element:e}}let l_=!1;function Vm(t,e){if(typeof window>"u"||typeof document>"u"||!Ri(window.location.host)||ja[t]===e||ja[t]||l_)return;ja[t]=e;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",s=dC().prod.length>0;function o(){const m=document.getElementById(r);m&&m.remove()}function a(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function u(m,g){m.setAttribute("width","24"),m.setAttribute("id",g),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function c(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{l_=!0,o()},m}function d(m,g){m.setAttribute("id",g),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function f(){const m=fC(r),g=n("text"),_=document.getElementById(g)||document.createElement("span"),b=n("learnmore"),P=document.getElementById(b)||document.createElement("a"),x=n("preprendIcon"),k=document.getElementById(x)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const E=m.element;a(E),d(P,b);const O=c();u(k,x),E.append(k,_,P,O),document.body.appendChild(E)}s?(_.innerText="Preview backend disconnected.",k.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(k.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,_.innerText="Preview backend running in this workspace."),_.setAttribute("id",g)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",f):f()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Dt(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function pC(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Dt())}function mC(){var e;const t=(e=uh())==null?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function gC(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function yC(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function wC(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function _C(){const t=Dt();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function vC(){return!mC()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function xC(){try{return typeof indexedDB=="object"}catch{return!1}}function EC(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)==null?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC="FirebaseError";class dr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kC,Object.setPrototypeOf(this,dr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Il.prototype.create)}}class Il{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?IC(s,r):"Error",a=`${this.serviceName}: ${o} (${i}).`;return new dr(i,a,r)}}function IC(t,e){return t.replace(TC,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const TC=/\{\$([^}]+)}/g;function bC(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Pr(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(u_(s)&&u_(o)){if(!Pr(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function u_(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function _a(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function va(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function SC(t,e){const n=new AC(t,e);return n.subscribe.bind(n)}class AC{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");CC(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Od),i.error===void 0&&(i.error=Od),i.complete===void 0&&(i.complete=Od);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function CC(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Od(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ve(t){return t&&t._delegate?t._delegate:t}class xi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NC{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new hC;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){const n=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),r=(e==null?void 0:e.optional)??!1;if(this.isInitialized(n)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:n})}catch(i){if(r)return null;throw i}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(PC(e))try{this.getOrInitializeService({instanceIdentifier:qi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=qi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=qi){return this.instances.has(e)}getOptions(e=qi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);r===a&&o.resolve(i)}return i}onInit(e,n){const r=this.normalizeInstanceIdentifier(n),i=this.onInitCallbacks.get(r)??new Set;i.add(e),this.onInitCallbacks.set(r,i);const s=this.instances.get(r);return s&&e(s,r),()=>{i.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:RC(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=qi){return this.component?this.component.multipleInstances?e:qi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function RC(t){return t===qi?void 0:t}function PC(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DC{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new NC(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _e;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(_e||(_e={}));const jC={debug:_e.DEBUG,verbose:_e.VERBOSE,info:_e.INFO,warn:_e.WARN,error:_e.ERROR,silent:_e.SILENT},OC=_e.INFO,LC={[_e.DEBUG]:"log",[_e.VERBOSE]:"log",[_e.INFO]:"info",[_e.WARN]:"warn",[_e.ERROR]:"error"},MC=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=LC[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Fm{constructor(e){this.name=e,this._logLevel=OC,this._logHandler=MC,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in _e))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?jC[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,_e.DEBUG,...e),this._logHandler(this,_e.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,_e.VERBOSE,...e),this._logHandler(this,_e.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,_e.INFO,...e),this._logHandler(this,_e.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,_e.WARN,...e),this._logHandler(this,_e.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,_e.ERROR,...e),this._logHandler(this,_e.ERROR,...e)}}const VC=(t,e)=>e.some(n=>t instanceof n);let c_,h_;function FC(){return c_||(c_=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UC(){return h_||(h_=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sE=new WeakMap,np=new WeakMap,oE=new WeakMap,Ld=new WeakMap,Um=new WeakMap;function zC(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(fi(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&sE.set(n,t)}).catch(()=>{}),Um.set(e,t),e}function BC(t){if(np.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});np.set(t,e)}let rp={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return np.get(t);if(e==="objectStoreNames")return t.objectStoreNames||oE.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return fi(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function $C(t){rp=t(rp)}function qC(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Md(this),e,...n);return oE.set(r,e.sort?e.sort():[e]),fi(r)}:UC().includes(t)?function(...e){return t.apply(Md(this),e),fi(sE.get(this))}:function(...e){return fi(t.apply(Md(this),e))}}function HC(t){return typeof t=="function"?qC(t):(t instanceof IDBTransaction&&BC(t),VC(t,FC())?new Proxy(t,rp):t)}function fi(t){if(t instanceof IDBRequest)return zC(t);if(Ld.has(t))return Ld.get(t);const e=HC(t);return e!==t&&(Ld.set(t,e),Um.set(e,t)),e}const Md=t=>Um.get(t);function WC(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),a=fi(o);return r&&o.addEventListener("upgradeneeded",u=>{r(fi(o.result),u.oldVersion,u.newVersion,fi(o.transaction),u)}),n&&o.addEventListener("blocked",u=>n(u.oldVersion,u.newVersion,u)),a.then(u=>{s&&u.addEventListener("close",()=>s()),i&&u.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const GC=["get","getKey","getAll","getAllKeys","count"],KC=["put","add","delete","clear"],Vd=new Map;function d_(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Vd.get(e))return Vd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=KC.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||GC.includes(n)))return;const s=async function(o,...a){const u=this.transaction(o,i?"readwrite":"readonly");let c=u.store;return r&&(c=c.index(a.shift())),(await Promise.all([c[n](...a),i&&u.done]))[0]};return Vd.set(e,s),s}$C(t=>({...t,get:(e,n,r)=>d_(e,n)||t.get(e,n,r),has:(e,n)=>!!d_(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QC{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(XC(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function XC(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const ip="@firebase/app",f_="0.14.6";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dr=new Fm("@firebase/app"),YC="@firebase/app-compat",JC="@firebase/analytics-compat",ZC="@firebase/analytics",eN="@firebase/app-check-compat",tN="@firebase/app-check",nN="@firebase/auth",rN="@firebase/auth-compat",iN="@firebase/database",sN="@firebase/data-connect",oN="@firebase/database-compat",aN="@firebase/functions",lN="@firebase/functions-compat",uN="@firebase/installations",cN="@firebase/installations-compat",hN="@firebase/messaging",dN="@firebase/messaging-compat",fN="@firebase/performance",pN="@firebase/performance-compat",mN="@firebase/remote-config",gN="@firebase/remote-config-compat",yN="@firebase/storage",wN="@firebase/storage-compat",_N="@firebase/firestore",vN="@firebase/ai",xN="@firebase/firestore-compat",EN="firebase",kN="12.6.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",IN={[ip]:"fire-core",[YC]:"fire-core-compat",[ZC]:"fire-analytics",[JC]:"fire-analytics-compat",[tN]:"fire-app-check",[eN]:"fire-app-check-compat",[nN]:"fire-auth",[rN]:"fire-auth-compat",[iN]:"fire-rtdb",[sN]:"fire-data-connect",[oN]:"fire-rtdb-compat",[aN]:"fire-fn",[lN]:"fire-fn-compat",[uN]:"fire-iid",[cN]:"fire-iid-compat",[hN]:"fire-fcm",[dN]:"fire-fcm-compat",[fN]:"fire-perf",[pN]:"fire-perf-compat",[mN]:"fire-rc",[gN]:"fire-rc-compat",[yN]:"fire-gcs",[wN]:"fire-gcs-compat",[_N]:"fire-fst",[xN]:"fire-fst-compat",[vN]:"fire-vertex","fire-js":"fire-js",[EN]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ic=new Map,TN=new Map,op=new Map;function p_(t,e){try{t.container.addComponent(e)}catch(n){Dr.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function ls(t){const e=t.name;if(op.has(e))return Dr.debug(`There were multiple attempts to register component ${e}.`),!1;op.set(e,t);for(const n of Ic.values())p_(n,t);for(const n of TN.values())p_(n,t);return!0}function ch(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}function ln(t){return t==null?!1:t.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bN={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},pi=new Il("app","Firebase",bN);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SN{constructor(e,n,r){this._isDeleted=!1,this._options={...e},this._config={...n},this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new xi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw pi.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=kN;function aE(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r={name:sp,automaticDataCollectionEnabled:!0,...e},i=r.name;if(typeof i!="string"||!i)throw pi.create("bad-app-name",{appName:String(i)});if(n||(n=nE()),!n)throw pi.create("no-options");const s=Ic.get(i);if(s){if(Pr(n,s.options)&&Pr(r,s.config))return s;throw pi.create("duplicate-app",{appName:i})}const o=new DC(i);for(const u of op.values())o.addComponent(u);const a=new SN(n,r,o);return Ic.set(i,a),a}function zm(t=sp){const e=Ic.get(t);if(!e&&t===sp&&nE())return aE();if(!e)throw pi.create("no-app",{appName:t});return e}function or(t,e,n){let r=IN[t]??t;n&&(r+=`-${n}`);const i=r.match(/\s|\//),s=e.match(/\s|\//);if(i||s){const o=[`Unable to register library "${r}" with version "${e}":`];i&&o.push(`library name "${r}" contains illegal characters (whitespace or "/")`),i&&s&&o.push("and"),s&&o.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dr.warn(o.join(" "));return}ls(new xi(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const AN="firebase-heartbeat-database",CN=1,ll="firebase-heartbeat-store";let Fd=null;function lE(){return Fd||(Fd=WC(AN,CN,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(ll)}catch(n){console.warn(n)}}}}).catch(t=>{throw pi.create("idb-open",{originalErrorMessage:t.message})})),Fd}async function NN(t){try{const n=(await lE()).transaction(ll),r=await n.objectStore(ll).get(uE(t));return await n.done,r}catch(e){if(e instanceof dr)Dr.warn(e.message);else{const n=pi.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dr.warn(n.message)}}}async function m_(t,e){try{const r=(await lE()).transaction(ll,"readwrite");await r.objectStore(ll).put(e,uE(t)),await r.done}catch(n){if(n instanceof dr)Dr.warn(n.message);else{const r=pi.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dr.warn(r.message)}}}function uE(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RN=1024,PN=30;class DN{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new ON(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=g_();if(((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)==null?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats.length>PN){const o=LN(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){Dr.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)==null?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=g_(),{heartbeatsToSend:r,unsentEntries:i}=jN(this._heartbeatsCache.heartbeats),s=kc(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dr.warn(n),""}}}function g_(){return new Date().toISOString().substring(0,10)}function jN(t,e=RN){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),y_(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),y_(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class ON{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return xC()?EC().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await NN(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){if(await this._canUseIndexedDBPromise){const r=await this.read();return m_(this.app,{lastSentHeartbeatDate:e.lastSentHeartbeatDate??r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function y_(t){return kc(JSON.stringify({version:2,heartbeats:t})).length}function LN(t){if(t.length===0)return-1;let e=0,n=t[0].date;for(let r=1;r<t.length;r++)t[r].date<n&&(n=t[r].date,e=r);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MN(t){ls(new xi("platform-logger",e=>new QC(e),"PRIVATE")),ls(new xi("heartbeat",e=>new DN(e),"PRIVATE")),or(ip,f_,t),or(ip,f_,"esm2020"),or("fire-js","")}MN("");var VN="firebase",FN="12.7.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */or(VN,FN,"app");function cE(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const UN=cE,hE=new Il("auth","Firebase",cE());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tc=new Fm("@firebase/auth");function zN(t,...e){Tc.logLevel<=_e.WARN&&Tc.warn(`Auth (${ws}): ${t}`,...e)}function Uu(t,...e){Tc.logLevel<=_e.ERROR&&Tc.error(`Auth (${ws}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function An(t,...e){throw $m(t,...e)}function Mn(t,...e){return $m(t,...e)}function Bm(t,e,n){const r={...UN(),[e]:n};return new Il("auth","Firebase",r).create(e,{appName:t.name})}function mi(t){return Bm(t,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function BN(t,e,n){const r=n;if(!(e instanceof r))throw r.name!==e.constructor.name&&An(t,"argument-error"),Bm(t,"argument-error",`Type of ${e.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function $m(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hE.create(t,...e)}function oe(t,e,...n){if(!t)throw $m(e,...n)}function Er(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Uu(e),new Error(e)}function jr(t,e){t||Er(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ap(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.href)||""}function $N(){return w_()==="http:"||w_()==="https:"}function w_(){var t;return typeof self<"u"&&((t=self.location)==null?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qN(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&($N()||yC()||"connection"in navigator)?navigator.onLine:!0}function HN(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(e,n){this.shortDelay=e,this.longDelay=n,jr(n>e,"Short delay should be less than long delay!"),this.isMobile=pC()||wC()}get(){return qN()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qm(t,e){jr(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dE{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Er("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Er("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Er("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GN=["/v1/accounts:signInWithCustomToken","/v1/accounts:signInWithEmailLink","/v1/accounts:signInWithIdp","/v1/accounts:signInWithPassword","/v1/accounts:signInWithPhoneNumber","/v1/token"],KN=new bl(3e4,6e4);function _s(t,e){return t.tenantId&&!e.tenantId?{...e,tenantId:t.tenantId}:e}async function Pi(t,e,n,r,i={}){return fE(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const a=Tl({key:t.config.apiKey,...o}).slice(1),u=await t._getAdditionalHeaders();u["Content-Type"]="application/json",t.languageCode&&(u["X-Firebase-Locale"]=t.languageCode);const c={method:e,headers:u,...s};return gC()||(c.referrerPolicy="no-referrer"),t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(c.credentials="include"),dE.fetch()(await pE(t,t.config.apiHost,n,a),c)})}async function fE(t,e,n){t._canInitEmulator=!1;const r={...WN,...e};try{const i=new XN(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw mu(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[u,c]=a.split(" : ");if(u==="FEDERATED_USER_ID_ALREADY_LINKED")throw mu(t,"credential-already-in-use",o);if(u==="EMAIL_EXISTS")throw mu(t,"email-already-in-use",o);if(u==="USER_DISABLED")throw mu(t,"user-disabled",o);const d=r[u]||u.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Bm(t,d,c);An(t,d)}}catch(i){if(i instanceof dr)throw i;An(t,"network-request-failed",{message:String(i)})}}async function hh(t,e,n,r,i={}){const s=await Pi(t,e,n,r,i);return"mfaPendingCredential"in s&&An(t,"multi-factor-auth-required",{_serverResponse:s}),s}async function pE(t,e,n,r){const i=`${e}${n}?${r}`,s=t,o=s.config.emulator?qm(t.config,i):`${t.config.apiScheme}://${i}`;return GN.includes(n)&&(await s._persistenceManagerAvailable,s._getPersistenceType()==="COOKIE")?s._getPersistence()._getFinalTarget(o).toString():o}function QN(t){switch(t){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class XN{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Mn(this.auth,"network-request-failed")),KN.get())})}}function mu(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Mn(t,e,r);return i.customData._tokenResponse=n,i}function __(t){return t!==void 0&&t.enterprise!==void 0}class YN{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const n of this.recaptchaEnforcementState)if(n.provider&&n.provider===e)return QN(n.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function JN(t,e){return Pi(t,"GET","/v2/recaptchaConfig",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ZN(t,e){return Pi(t,"POST","/v1/accounts:delete",e)}async function bc(t,e){return Pi(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oa(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function eR(t,e=!1){const n=Ve(t),r=await n.getIdToken(e),i=Hm(r);oe(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:Oa(Ud(i.auth_time)),issuedAtTime:Oa(Ud(i.iat)),expirationTime:Oa(Ud(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Ud(t){return Number(t)*1e3}function Hm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Uu("JWT malformed, contained fewer than 3 sections"),null;try{const i=Z1(n);return i?JSON.parse(i):(Uu("Failed to decode base64 JWT payload"),null)}catch(i){return Uu("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function v_(t){const e=Hm(t);return oe(e,"internal-error"),oe(typeof e.exp<"u","internal-error"),oe(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ul(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof dr&&tR(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function tR({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nR{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){if(e){const n=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),n}else{this.errorBackoff=3e4;const r=(this.user.stsTokenManager.expirationTime??0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lp{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Oa(this.lastLoginAt),this.creationTime=Oa(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sc(t){var f;const e=t.auth,n=await t.getIdToken(),r=await ul(t,bc(e,{idToken:n}));oe(r==null?void 0:r.users.length,e,"internal-error");const i=r.users[0];t._notifyReloadListener(i);const s=(f=i.providerUserInfo)!=null&&f.length?mE(i.providerUserInfo):[],o=iR(t.providerData,s),a=t.isAnonymous,u=!(t.email&&i.passwordHash)&&!(o!=null&&o.length),c=a?u:!1,d={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:o,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:c};Object.assign(t,d)}async function rR(t){const e=Ve(t);await Sc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function iR(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function mE(t){return t.map(({providerId:e,...n})=>({providerId:e,uid:n.rawId||"",displayName:n.displayName||null,email:n.email||null,phoneNumber:n.phoneNumber||null,photoURL:n.photoUrl||null}))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function sR(t,e){const n=await fE(t,{},async()=>{const r=Tl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=await pE(t,i,"/v1/token",`key=${s}`),a=await t._getAdditionalHeaders();a["Content-Type"]="application/x-www-form-urlencoded";const u={method:"POST",headers:a,body:r};return t.emulatorConfig&&Ri(t.emulatorConfig.host)&&(u.credentials="include"),dE.fetch()(o,u)});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}async function oR(t,e){return Pi(t,"POST","/v2/accounts:revokeToken",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class no{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){oe(e.idToken,"internal-error"),oe(typeof e.idToken<"u","internal-error"),oe(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):v_(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}updateFromIdToken(e){oe(e.length!==0,"internal-error");const n=v_(e);this.updateTokensAndExpiration(e,null,n)}async getToken(e,n=!1){return!n&&this.accessToken&&!this.isExpired?this.accessToken:(oe(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await sR(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new no;return r&&(oe(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(oe(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(oe(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new no,this.toJSON())}_performRefresh(){return Er("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hr(t,e){oe(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class jn{constructor({uid:e,auth:n,stsTokenManager:r,...i}){this.providerId="firebase",this.proactiveRefresh=new nR(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=e,this.auth=n,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=i.displayName||null,this.email=i.email||null,this.emailVerified=i.emailVerified||!1,this.phoneNumber=i.phoneNumber||null,this.photoURL=i.photoURL||null,this.isAnonymous=i.isAnonymous||!1,this.tenantId=i.tenantId||null,this.providerData=i.providerData?[...i.providerData]:[],this.metadata=new lp(i.createdAt||void 0,i.lastLoginAt||void 0)}async getIdToken(e){const n=await ul(this,this.stsTokenManager.getToken(this.auth,e));return oe(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return eR(this,e)}reload(){return rR(this)}_assign(e){this!==e&&(oe(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>({...n})),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new jn({...this,auth:e,stsTokenManager:this.stsTokenManager._clone()});return n.metadata._copy(this.metadata),n}_onReload(e){oe(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Sc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(ln(this.auth.app))return Promise.reject(mi(this.auth));const e=await this.getIdToken();return await ul(this,ZN(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return{uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>({...e})),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId,...this.metadata.toJSON(),apiKey:this.auth.config.apiKey,appName:this.auth.name}}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){const r=n.displayName??void 0,i=n.email??void 0,s=n.phoneNumber??void 0,o=n.photoURL??void 0,a=n.tenantId??void 0,u=n._redirectEventId??void 0,c=n.createdAt??void 0,d=n.lastLoginAt??void 0,{uid:f,emailVerified:m,isAnonymous:g,providerData:_,stsTokenManager:b}=n;oe(f&&b,e,"internal-error");const P=no.fromJSON(this.name,b);oe(typeof f=="string",e,"internal-error"),Hr(r,e.name),Hr(i,e.name),oe(typeof m=="boolean",e,"internal-error"),oe(typeof g=="boolean",e,"internal-error"),Hr(s,e.name),Hr(o,e.name),Hr(a,e.name),Hr(u,e.name),Hr(c,e.name),Hr(d,e.name);const x=new jn({uid:f,auth:e,email:i,emailVerified:m,displayName:r,isAnonymous:g,photoURL:o,phoneNumber:s,tenantId:a,stsTokenManager:P,createdAt:c,lastLoginAt:d});return _&&Array.isArray(_)&&(x.providerData=_.map(k=>({...k}))),u&&(x._redirectEventId=u),x}static async _fromIdTokenResponse(e,n,r=!1){const i=new no;i.updateFromServerResponse(n);const s=new jn({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Sc(s),s}static async _fromGetAccountInfoResponse(e,n,r){const i=n.users[0];oe(i.localId!==void 0,"internal-error");const s=i.providerUserInfo!==void 0?mE(i.providerUserInfo):[],o=!(i.email&&i.passwordHash)&&!(s!=null&&s.length),a=new no;a.updateFromIdToken(r);const u=new jn({uid:i.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:i.localId,displayName:i.displayName||null,photoURL:i.photoUrl||null,email:i.email||null,emailVerified:i.emailVerified||!1,phoneNumber:i.phoneNumber||null,tenantId:i.tenantId||null,providerData:s,metadata:new lp(i.createdAt,i.lastLoginAt),isAnonymous:!(i.email&&i.passwordHash)&&!(s!=null&&s.length)};return Object.assign(u,c),u}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x_=new Map;function kr(t){jr(t instanceof Function,"Expected a class definition");let e=x_.get(t);return e?(jr(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,x_.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gE{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}gE.type="NONE";const E_=gE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zu(t,e,n){return`firebase:${t}:${e}:${n}`}class ro{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=zu(this.userKey,i.apiKey,s),this.fullPersistenceKey=zu("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);if(!e)return null;if(typeof e=="string"){const n=await bc(this.auth,{idToken:e}).catch(()=>{});return n?jn._fromGetAccountInfoResponse(this.auth,n,e):null}return jn._fromJSON(this.auth,e)}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new ro(kr(E_),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||kr(E_);const o=zu(r,e.config.apiKey,e.name);let a=null;for(const c of n)try{const d=await c._get(o);if(d){let f;if(typeof d=="string"){const m=await bc(e,{idToken:d}).catch(()=>{});if(!m)break;f=await jn._fromGetAccountInfoResponse(e,m,d)}else f=jn._fromJSON(e,d);c!==s&&(a=f),s=c;break}}catch{}const u=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!u.length?new ro(s,e,r):(s=u[0],a&&await s._set(o,a.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new ro(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function k_(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(vE(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yE(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(EE(e))return"Blackberry";if(kE(e))return"Webos";if(wE(e))return"Safari";if((e.includes("chrome/")||_E(e))&&!e.includes("edge/"))return"Chrome";if(xE(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function yE(t=Dt()){return/firefox\//i.test(t)}function wE(t=Dt()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _E(t=Dt()){return/crios\//i.test(t)}function vE(t=Dt()){return/iemobile/i.test(t)}function xE(t=Dt()){return/android/i.test(t)}function EE(t=Dt()){return/blackberry/i.test(t)}function kE(t=Dt()){return/webos/i.test(t)}function Wm(t=Dt()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function aR(t=Dt()){var e;return Wm(t)&&!!((e=window.navigator)!=null&&e.standalone)}function lR(){return _C()&&document.documentMode===10}function IE(t=Dt()){return Wm(t)||xE(t)||kE(t)||EE(t)||/windows phone/i.test(t)||vE(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function TE(t,e=[]){let n;switch(t){case"Browser":n=k_(Dt());break;case"Worker":n=`${k_(Dt())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${ws}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uR{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,a)=>{try{const u=e(s);o(u)}catch(u){a(u)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function cR(t,e={}){return Pi(t,"GET","/v2/passwordPolicy",_s(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hR=6;class dR{constructor(e){var r;const n=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=n.minPasswordLength??hR,n.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=n.maxPasswordLength),n.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=n.containsLowercaseCharacter),n.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=n.containsUppercaseCharacter),n.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=n.containsNumericCharacter),n.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=n.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=((r=e.allowedNonAlphanumericCharacters)==null?void 0:r.join(""))??"",this.forceUpgradeOnSignin=e.forceUpgradeOnSignin??!1,this.schemaVersion=e.schemaVersion}validatePassword(e){const n={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,n),this.validatePasswordCharacterOptions(e,n),n.isValid&&(n.isValid=n.meetsMinPasswordLength??!0),n.isValid&&(n.isValid=n.meetsMaxPasswordLength??!0),n.isValid&&(n.isValid=n.containsLowercaseLetter??!0),n.isValid&&(n.isValid=n.containsUppercaseLetter??!0),n.isValid&&(n.isValid=n.containsNumericCharacter??!0),n.isValid&&(n.isValid=n.containsNonAlphanumericCharacter??!0),n}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fR{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new I_(this),this.idTokenSubscription=new I_(this),this.beforeStateQueue=new uR(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hE,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this._resolvePersistenceManagerAvailable=void 0,this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion,this._persistenceManagerAvailable=new Promise(s=>this._resolvePersistenceManagerAvailable=s)}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=kr(n)),this._initializationPromise=this.queue(async()=>{var r,i,s;if(!this._deleted&&(this.persistenceManager=await ro.create(this,e),(r=this._resolvePersistenceManagerAvailable)==null||r.call(this),!this._deleted)){if((i=this._popupRedirectResolver)!=null&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((s=this.currentUser)==null?void 0:s.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const n=await bc(this,{idToken:e}),r=await jn._fromGetAccountInfoResponse(this,n,e);await this.directlySetCurrentUser(r)}catch(n){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",n),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var s;if(ln(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const n=await this.assertedPersistence.getCurrentUser();let r=n,i=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(s=this.redirectUser)==null?void 0:s._redirectEventId,a=r==null?void 0:r._redirectEventId,u=await this.tryRedirectSignIn(e);(!o||o===a)&&(u!=null&&u.user)&&(r=u.user,i=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(i)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=n,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return oe(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Sc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=HN()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(ln(this.app))return Promise.reject(mi(this));const n=e?Ve(e):null;return n&&oe(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&oe(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return ln(this.app)?Promise.reject(mi(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return ln(this.app)?Promise.reject(mi(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(kr(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await cR(this),n=new dR(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistenceType(){return this.assertedPersistence.persistence.type}_getPersistence(){return this.assertedPersistence.persistence}_updateErrorMap(e){this._errorFactory=new Il("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}async revokeAccessToken(e){if(this.currentUser){const n=await this.currentUser.getIdToken(),r={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:n};this.tenantId!=null&&(r.tenantId=this.tenantId),await oR(this,r)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)==null?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&kr(e)||this._popupRedirectResolver;oe(n,this,"argument-error"),this.redirectPersistenceManager=await ro.create(this,[kr(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)==null?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)==null?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const e=((n=this.currentUser)==null?void 0:n.uid)??null;this.lastNotifiedUid!==e&&(this.lastNotifiedUid=e,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(oe(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const u=e.addObserver(n,r,i);return()=>{o=!0,u()}}else{const u=e.addObserver(n);return()=>{o=!0,u()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return oe(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=TE(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var i;const e={"X-Client-Version":this.clientVersion};this.app.options.appId&&(e["X-Firebase-gmpid"]=this.app.options.appId);const n=await((i=this.heartbeatServiceProvider.getImmediate({optional:!0}))==null?void 0:i.getHeartbeatsHeader());n&&(e["X-Firebase-Client"]=n);const r=await this._getAppCheckToken();return r&&(e["X-Firebase-AppCheck"]=r),e}async _getAppCheckToken(){var n;if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=await((n=this.appCheckServiceProvider.getImmediate({optional:!0}))==null?void 0:n.getToken());return e!=null&&e.error&&zN(`Error while retrieving App Check token: ${e.error}`),e==null?void 0:e.token}}function vs(t){return Ve(t)}class I_{constructor(e){this.auth=e,this.observer=null,this.addObserver=SC(n=>this.observer=n)}get next(){return oe(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let dh={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function pR(t){dh=t}function bE(t){return dh.loadJS(t)}function mR(){return dh.recaptchaEnterpriseScript}function gR(){return dh.gapiScript}function yR(t){return`__${t}${Math.floor(Math.random()*1e6)}`}class wR{constructor(){this.enterprise=new _R}ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}class _R{ready(e){e()}execute(e,n){return Promise.resolve("token")}render(e,n){return""}}const vR="recaptcha-enterprise",SE="NO_RECAPTCHA";class xR{constructor(e){this.type=vR,this.auth=vs(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{JN(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(u=>{if(u.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new YN(u);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(u=>{a(u)})})}function i(s,o,a){const u=window.grecaptcha;__(u)?u.enterprise.ready(()=>{u.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(SE)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new wR().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{r(this.auth).then(a=>{if(!n&&__(window.grecaptcha))i(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let u=mR();u.length!==0&&(u+=a),bE(u).then(()=>{i(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function T_(t,e,n,r=!1,i=!1){const s=new xR(t);let o;if(i)o=SE;else try{o=await s.verify(n)}catch{o=await s.verify(n,!0)}const a={...e};if(n==="mfaSmsEnrollment"||n==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const u=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:u,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const u=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:u,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return r?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function b_(t,e,n,r,i){var s;if((s=t._getRecaptchaConfig())!=null&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await T_(t,e,n,n==="getOobCode");return r(t,o)}else return r(t,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${n} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await T_(t,e,n,n==="getOobCode");return r(t,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ER(t,e){const n=ch(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Pr(s,e??{}))return i;An(i,"already-initialized")}return n.initialize({options:e})}function kR(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(kr);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function IR(t,e,n){const r=vs(t);oe(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!1,s=AE(e),{host:o,port:a}=TR(e),u=a===null?"":`:${a}`,c={url:`${s}//${o}${u}/`},d=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})});if(!r._canInitEmulator){oe(r.config.emulator&&r.emulatorConfig,r,"emulator-config-failed"),oe(Pr(c,r.config.emulator)&&Pr(d,r.emulatorConfig),r,"emulator-config-failed");return}r.config.emulator=c,r.emulatorConfig=d,r.settings.appVerificationDisabledForTesting=!0,Ri(o)?(Mm(`${s}//${o}${u}`),Vm("Auth",!0)):bR()}function AE(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function TR(t){const e=AE(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:S_(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:S_(o)}}}function S_(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function bR(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Er("not implemented")}_getIdTokenResponse(e){return Er("not implemented")}_linkToIdToken(e,n){return Er("not implemented")}_getReauthenticationResolver(e){return Er("not implemented")}}async function SR(t,e){return Pi(t,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function AR(t,e){return hh(t,"POST","/v1/accounts:signInWithPassword",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function CR(t,e){return hh(t,"POST","/v1/accounts:signInWithEmailLink",_s(t,e))}async function NR(t,e){return hh(t,"POST","/v1/accounts:signInWithEmailLink",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cl extends Gm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new cl(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new cl(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const n={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b_(e,n,"signInWithPassword",AR);case"emailLink":return CR(e,{email:this._email,oobCode:this._password});default:An(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":const r={idToken:n,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return b_(e,r,"signUpPassword",SR);case"emailLink":return NR(e,{idToken:n,email:this._email,oobCode:this._password});default:An(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function io(t,e){return hh(t,"POST","/v1/accounts:signInWithIdp",_s(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RR="http://localhost";class us extends Gm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new us(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):An("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i,...s}=n;if(!r||!i)return null;const o=new us(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return io(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,io(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,io(e,n)}buildRequest(){const e={requestUri:RR,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Tl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PR(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function DR(t){const e=_a(va(t)).link,n=e?_a(va(e)).deep_link_id:null,r=_a(va(t)).deep_link_id;return(r?_a(va(r)).link:null)||r||n||e||t}class Km{constructor(e){const n=_a(va(e)),r=n.apiKey??null,i=n.oobCode??null,s=PR(n.mode??null);oe(r&&i&&s,"argument-error"),this.apiKey=r,this.operation=s,this.code=i,this.continueUrl=n.continueUrl??null,this.languageCode=n.lang??null,this.tenantId=n.tenantId??null}static parseLink(e){const n=DR(e);try{return new Km(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Po{constructor(){this.providerId=Po.PROVIDER_ID}static credential(e,n){return cl._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Km.parseLink(n);return oe(r,"argument-error"),cl._fromEmailAndCode(e,r.code,r.tenantId)}}Po.PROVIDER_ID="password";Po.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Po.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Qm{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yr extends Sl{constructor(){super("facebook.com")}static credential(e){return us._fromParams({providerId:Yr.PROVIDER_ID,signInMethod:Yr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Yr.credentialFromTaggedObject(e)}static credentialFromError(e){return Yr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Yr.credential(e.oauthAccessToken)}catch{return null}}}Yr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Yr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _r extends Sl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return us._fromParams({providerId:_r.PROVIDER_ID,signInMethod:_r.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return _r.credentialFromTaggedObject(e)}static credentialFromError(e){return _r.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return _r.credential(n,r)}catch{return null}}}_r.GOOGLE_SIGN_IN_METHOD="google.com";_r.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jr extends Sl{constructor(){super("github.com")}static credential(e){return us._fromParams({providerId:Jr.PROVIDER_ID,signInMethod:Jr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Jr.credentialFromTaggedObject(e)}static credentialFromError(e){return Jr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Jr.credential(e.oauthAccessToken)}catch{return null}}}Jr.GITHUB_SIGN_IN_METHOD="github.com";Jr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zr extends Sl{constructor(){super("twitter.com")}static credential(e,n){return us._fromParams({providerId:Zr.PROVIDER_ID,signInMethod:Zr.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Zr.credentialFromTaggedObject(e)}static credentialFromError(e){return Zr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Zr.credential(n,r)}catch{return null}}}Zr.TWITTER_SIGN_IN_METHOD="twitter.com";Zr.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await jn._fromIdTokenResponse(e,r,i),o=A_(r);return new wo({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=A_(r);return new wo({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function A_(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ac extends dr{constructor(e,n,r,i){super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Ac.prototype),this.customData={appName:e.name,tenantId:e.tenantId??void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Ac(e,n,r,i)}}function CE(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?Ac._fromErrorAndOperation(t,s,e,r):s})}async function jR(t,e,n=!1){const r=await ul(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return wo._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function OR(t,e,n=!1){const{auth:r}=t;if(ln(r.app))return Promise.reject(mi(r));const i="reauthenticate";try{const s=await ul(t,CE(r,i,e,t),n);oe(s.idToken,r,"internal-error");const o=Hm(s.idToken);oe(o,r,"internal-error");const{sub:a}=o;return oe(t.uid===a,r,"user-mismatch"),wo._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&An(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function NE(t,e,n=!1){if(ln(t.app))return Promise.reject(mi(t));const r="signIn",i=await CE(t,r,e),s=await wo._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function LR(t,e){return NE(vs(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function MR(t){const e=vs(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}function VR(t,e,n){return ln(t.app)?Promise.reject(mi(t)):LR(Ve(t),Po.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&MR(t),r})}function FR(t,e,n,r){return Ve(t).onIdTokenChanged(e,n,r)}function UR(t,e,n){return Ve(t).beforeAuthStateChanged(e,n)}function zR(t,e,n,r){return Ve(t).onAuthStateChanged(e,n,r)}function BR(t){return Ve(t).signOut()}const Cc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RE{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Cc,"1"),this.storage.removeItem(Cc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $R=1e3,qR=10;class PE extends RE{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=IE(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,a,u)=>{this.notifyListeners(o,u)});return}const r=e.key;n?this.detachListener():this.stopPolling();const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);lR()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,qR):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},$R)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}PE.type="LOCAL";const HR=PE;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DE extends RE{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}DE.type="SESSION";const jE=DE;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WR(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fh(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const a=Array.from(o).map(async c=>c(n.origin,s)),u=await WR(a);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:u})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fh.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GR{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((a,u)=>{const c=Xm("",20);i.port1.start();const d=setTimeout(()=>{u(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(d),s=setTimeout(()=>{u(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(d),clearTimeout(s),u(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ar(){return window}function KR(t){ar().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function OE(){return typeof ar().WorkerGlobalScope<"u"&&typeof ar().importScripts=="function"}async function QR(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function XR(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)==null?void 0:t.controller)||null}function YR(){return OE()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LE="firebaseLocalStorageDb",JR=1,Nc="firebaseLocalStorage",ME="fbase_key";class Al{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function ph(t,e){return t.transaction([Nc],e?"readwrite":"readonly").objectStore(Nc)}function ZR(){const t=indexedDB.deleteDatabase(LE);return new Al(t).toPromise()}function up(){const t=indexedDB.open(LE,JR);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(Nc,{keyPath:ME})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(Nc)?e(r):(r.close(),await ZR(),e(await up()))})})}async function C_(t,e,n){const r=ph(t,!0).put({[ME]:e,value:n});return new Al(r).toPromise()}async function eP(t,e){const n=ph(t,!1).get(e),r=await new Al(n).toPromise();return r===void 0?null:r.value}function N_(t,e){const n=ph(t,!0).delete(e);return new Al(n).toPromise()}const tP=800,nP=3;class VE{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await up(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nP)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return OE()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fh._getInstance(YR()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var n,r;if(this.activeServiceWorker=await QR(),!this.activeServiceWorker)return;this.sender=new GR(this.activeServiceWorker);const e=await this.sender._send("ping",{},800);e&&(n=e[0])!=null&&n.fulfilled&&(r=e[0])!=null&&r.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||XR()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await up();return await C_(e,Cc,"1"),await N_(e,Cc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>C_(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eP(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>N_(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=ph(i,!1).getAll();return new Al(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;if(e.length!==0)for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tP)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VE.type="LOCAL";const rP=VE;new bl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FE(t,e){return e?kr(e):(oe(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ym extends Gm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return io(e,this._buildIdpRequest())}_linkToIdToken(e,n){return io(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return io(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function iP(t){return NE(t.auth,new Ym(t),t.bypassAuthState)}function sP(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),OR(n,new Ym(t),t.bypassAuthState)}async function oP(t){const{auth:e,user:n}=t;return oe(n,e,"internal-error"),jR(n,new Ym(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UE{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const u={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(u))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return iP;case"linkViaPopup":case"linkViaRedirect":return oP;case"reauthViaPopup":case"reauthViaRedirect":return sP;default:An(this.auth,"internal-error")}}resolve(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){jr(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aP=new bl(2e3,1e4);async function lP(t,e,n){if(ln(t.app))return Promise.reject(Mn(t,"operation-not-supported-in-this-environment"));const r=vs(t);BN(t,e,Qm);const i=FE(r,n);return new Xi(r,"signInViaPopup",e,i).executeNotNull()}class Xi extends UE{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,Xi.currentPopupAction&&Xi.currentPopupAction.cancel(),Xi.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return oe(e,this.auth,"internal-error"),e}async onExecution(){jr(this.filter.length===1,"Popup operations only handle one event");const e=Xm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Mn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)==null?void 0:e.associatedEvent)||null}cancel(){this.reject(Mn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Xi.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if((r=(n=this.authWindow)==null?void 0:n.window)!=null&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Mn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,aP.get())};e()}}Xi.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uP="pendingRedirect",Bu=new Map;class cP extends UE{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Bu.get(this.auth._key());if(!e){try{const r=await hP(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Bu.set(this.auth._key(),e)}return this.bypassAuthState||Bu.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function hP(t,e){const n=pP(e),r=fP(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function dP(t,e){Bu.set(t._key(),e)}function fP(t){return kr(t._redirectPersistence)}function pP(t){return zu(uP,t.config.apiKey,t.name)}async function mP(t,e,n=!1){if(ln(t.app))return Promise.reject(mi(t));const r=vs(t),i=FE(r,e),o=await new cP(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gP=10*60*1e3;class yP{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!wP(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!zE(e)){const i=((r=e.error.code)==null?void 0:r.split("auth/")[1])||"internal-error";n.onError(Mn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gP&&this.cachedEventUids.clear(),this.cachedEventUids.has(R_(e))}saveEventToCache(e){this.cachedEventUids.add(R_(e)),this.lastProcessedEventTime=Date.now()}}function R_(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function zE({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function wP(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zE(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _P(t,e={}){return Pi(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vP=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,xP=/^https?/;async function EP(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _P(t);for(const n of e)try{if(kP(n))return}catch{}An(t,"unauthorized-domain")}function kP(t){const e=ap(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!xP.test(n))return!1;if(vP.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const IP=new bl(3e4,6e4);function P_(){const t=ar().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function TP(t){return new Promise((e,n)=>{var i,s,o;function r(){P_(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{P_(),n(Mn(t,"network-request-failed"))},timeout:IP.get()})}if((s=(i=ar().gapi)==null?void 0:i.iframes)!=null&&s.Iframe)e(gapi.iframes.getContext());else if((o=ar().gapi)!=null&&o.load)r();else{const a=yR("iframefcb");return ar()[a]=()=>{gapi.load?r():n(Mn(t,"network-request-failed"))},bE(`${gR()}?onload=${a}`).catch(u=>n(u))}}).catch(e=>{throw $u=null,e})}let $u=null;function bP(t){return $u=$u||TP(t),$u}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SP=new bl(5e3,15e3),AP="__/auth/iframe",CP="emulator/auth/iframe",NP={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},RP=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function PP(t){const e=t.config;oe(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?qm(e,CP):`https://${t.config.authDomain}/${AP}`,r={apiKey:e.apiKey,appName:t.name,v:ws},i=RP.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${Tl(r).slice(1)}`}async function DP(t){const e=await bP(t),n=ar().gapi;return oe(n,t,"internal-error"),e.open({where:document.body,url:PP(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:NP,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Mn(t,"network-request-failed"),a=ar().setTimeout(()=>{s(o)},SP.get());function u(){ar().clearTimeout(a),i(r)}r.ping(u).then(u,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jP={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},OP=500,LP=600,MP="_blank",VP="http://localhost";class D_{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function FP(t,e,n,r=OP,i=LP){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let a="";const u={...jP,width:r.toString(),height:i.toString(),top:s,left:o},c=Dt().toLowerCase();n&&(a=_E(c)?MP:n),yE(c)&&(e=e||VP,u.scrollbars="yes");const d=Object.entries(u).reduce((m,[g,_])=>`${m}${g}=${_},`,"");if(aR(c)&&a!=="_self")return UP(e||"",a),new D_(null);const f=window.open(e||"",a,d);oe(f,t,"popup-blocked");try{f.focus()}catch{}return new D_(f)}function UP(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zP="__/auth/handler",BP="emulator/auth/handler",$P=encodeURIComponent("fac");async function j_(t,e,n,r,i,s){oe(t.config.authDomain,t,"auth-domain-config-required"),oe(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:ws,eventId:i};if(e instanceof Qm){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",bC(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[d,f]of Object.entries({}))o[d]=f}if(e instanceof Sl){const d=e.getScopes().filter(f=>f!=="");d.length>0&&(o.scopes=d.join(","))}t.tenantId&&(o.tid=t.tenantId);const a=o;for(const d of Object.keys(a))a[d]===void 0&&delete a[d];const u=await t._getAppCheckToken(),c=u?`#${$P}=${encodeURIComponent(u)}`:"";return`${qP(t)}?${Tl(a).slice(1)}${c}`}function qP({config:t}){return t.emulator?qm(t,BP):`https://${t.authDomain}/${zP}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zd="webStorageSupport";class HP{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=jE,this._completeRedirectFn=mP,this._overrideRedirectResult=dP}async _openPopup(e,n,r,i){var o;jr((o=this.eventManagers[e._key()])==null?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await j_(e,n,r,ap(),i);return FP(e,s,Xm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await j_(e,n,r,ap(),i);return KR(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(jr(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await DP(e),r=new yP(e);return n.register("authEvent",i=>(oe(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(zd,{type:zd},i=>{var o;const s=(o=i==null?void 0:i[0])==null?void 0:o[zd];s!==void 0&&n(!!s),An(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=EP(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return IE()||wE()||Wm()}}const WP=HP;var O_="@firebase/auth",L_="1.12.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GP{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)==null?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){oe(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KP(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function QP(t){ls(new xi("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=r.options;oe(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const u={apiKey:o,authDomain:a,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:TE(t)},c=new fR(r,i,s,u);return kR(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),ls(new xi("auth-internal",e=>{const n=vs(e.getProvider("auth").getImmediate());return(r=>new GP(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),or(O_,L_,KP(t)),or(O_,L_,"esm2020")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XP=5*60,YP=rE("authIdTokenMaxAge")||XP;let M_=null;const JP=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YP)return;const i=n==null?void 0:n.token;M_!==i&&(M_=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ZP(t=zm()){const e=ch(t,"auth");if(e.isInitialized())return e.getImmediate();const n=ER(t,{popupRedirectResolver:WP,persistence:[rP,HR,jE]}),r=rE("authTokenSyncURL");if(r&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(r,location.origin);if(location.origin===s.origin){const o=JP(s.toString());UR(n,o,()=>o(n.currentUser)),FR(n,a=>o(a))}}const i=eE("auth");return i&&IR(n,`http://${i}`),n}function e2(){var t;return((t=document.getElementsByTagName("head"))==null?void 0:t[0])??document}pR({loadJS(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Mn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",e2().appendChild(r)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});QP("Browser");var V_=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var gi,BE;(function(){var t;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(v,w){function I(){}I.prototype=w.prototype,v.F=w.prototype,v.prototype=new I,v.prototype.constructor=v,v.D=function(S,A,R){for(var C=Array(arguments.length-2),te=2;te<arguments.length;te++)C[te-2]=arguments[te];return w.prototype[A].apply(S,C)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.C=Array(this.blockSize),this.o=this.h=0,this.u()}e(r,n),r.prototype.u=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function i(v,w,I){I||(I=0);const S=Array(16);if(typeof w=="string")for(var A=0;A<16;++A)S[A]=w.charCodeAt(I++)|w.charCodeAt(I++)<<8|w.charCodeAt(I++)<<16|w.charCodeAt(I++)<<24;else for(A=0;A<16;++A)S[A]=w[I++]|w[I++]<<8|w[I++]<<16|w[I++]<<24;w=v.g[0],I=v.g[1],A=v.g[2];let R=v.g[3],C;C=w+(R^I&(A^R))+S[0]+3614090360&4294967295,w=I+(C<<7&4294967295|C>>>25),C=R+(A^w&(I^A))+S[1]+3905402710&4294967295,R=w+(C<<12&4294967295|C>>>20),C=A+(I^R&(w^I))+S[2]+606105819&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(w^A&(R^w))+S[3]+3250441966&4294967295,I=A+(C<<22&4294967295|C>>>10),C=w+(R^I&(A^R))+S[4]+4118548399&4294967295,w=I+(C<<7&4294967295|C>>>25),C=R+(A^w&(I^A))+S[5]+1200080426&4294967295,R=w+(C<<12&4294967295|C>>>20),C=A+(I^R&(w^I))+S[6]+2821735955&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(w^A&(R^w))+S[7]+4249261313&4294967295,I=A+(C<<22&4294967295|C>>>10),C=w+(R^I&(A^R))+S[8]+1770035416&4294967295,w=I+(C<<7&4294967295|C>>>25),C=R+(A^w&(I^A))+S[9]+2336552879&4294967295,R=w+(C<<12&4294967295|C>>>20),C=A+(I^R&(w^I))+S[10]+4294925233&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(w^A&(R^w))+S[11]+2304563134&4294967295,I=A+(C<<22&4294967295|C>>>10),C=w+(R^I&(A^R))+S[12]+1804603682&4294967295,w=I+(C<<7&4294967295|C>>>25),C=R+(A^w&(I^A))+S[13]+4254626195&4294967295,R=w+(C<<12&4294967295|C>>>20),C=A+(I^R&(w^I))+S[14]+2792965006&4294967295,A=R+(C<<17&4294967295|C>>>15),C=I+(w^A&(R^w))+S[15]+1236535329&4294967295,I=A+(C<<22&4294967295|C>>>10),C=w+(A^R&(I^A))+S[1]+4129170786&4294967295,w=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(w^I))+S[6]+3225465664&4294967295,R=w+(C<<9&4294967295|C>>>23),C=A+(w^I&(R^w))+S[11]+643717713&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^w&(A^R))+S[0]+3921069994&4294967295,I=A+(C<<20&4294967295|C>>>12),C=w+(A^R&(I^A))+S[5]+3593408605&4294967295,w=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(w^I))+S[10]+38016083&4294967295,R=w+(C<<9&4294967295|C>>>23),C=A+(w^I&(R^w))+S[15]+3634488961&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^w&(A^R))+S[4]+3889429448&4294967295,I=A+(C<<20&4294967295|C>>>12),C=w+(A^R&(I^A))+S[9]+568446438&4294967295,w=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(w^I))+S[14]+3275163606&4294967295,R=w+(C<<9&4294967295|C>>>23),C=A+(w^I&(R^w))+S[3]+4107603335&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^w&(A^R))+S[8]+1163531501&4294967295,I=A+(C<<20&4294967295|C>>>12),C=w+(A^R&(I^A))+S[13]+2850285829&4294967295,w=I+(C<<5&4294967295|C>>>27),C=R+(I^A&(w^I))+S[2]+4243563512&4294967295,R=w+(C<<9&4294967295|C>>>23),C=A+(w^I&(R^w))+S[7]+1735328473&4294967295,A=R+(C<<14&4294967295|C>>>18),C=I+(R^w&(A^R))+S[12]+2368359562&4294967295,I=A+(C<<20&4294967295|C>>>12),C=w+(I^A^R)+S[5]+4294588738&4294967295,w=I+(C<<4&4294967295|C>>>28),C=R+(w^I^A)+S[8]+2272392833&4294967295,R=w+(C<<11&4294967295|C>>>21),C=A+(R^w^I)+S[11]+1839030562&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^w)+S[14]+4259657740&4294967295,I=A+(C<<23&4294967295|C>>>9),C=w+(I^A^R)+S[1]+2763975236&4294967295,w=I+(C<<4&4294967295|C>>>28),C=R+(w^I^A)+S[4]+1272893353&4294967295,R=w+(C<<11&4294967295|C>>>21),C=A+(R^w^I)+S[7]+4139469664&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^w)+S[10]+3200236656&4294967295,I=A+(C<<23&4294967295|C>>>9),C=w+(I^A^R)+S[13]+681279174&4294967295,w=I+(C<<4&4294967295|C>>>28),C=R+(w^I^A)+S[0]+3936430074&4294967295,R=w+(C<<11&4294967295|C>>>21),C=A+(R^w^I)+S[3]+3572445317&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^w)+S[6]+76029189&4294967295,I=A+(C<<23&4294967295|C>>>9),C=w+(I^A^R)+S[9]+3654602809&4294967295,w=I+(C<<4&4294967295|C>>>28),C=R+(w^I^A)+S[12]+3873151461&4294967295,R=w+(C<<11&4294967295|C>>>21),C=A+(R^w^I)+S[15]+530742520&4294967295,A=R+(C<<16&4294967295|C>>>16),C=I+(A^R^w)+S[2]+3299628645&4294967295,I=A+(C<<23&4294967295|C>>>9),C=w+(A^(I|~R))+S[0]+4096336452&4294967295,w=I+(C<<6&4294967295|C>>>26),C=R+(I^(w|~A))+S[7]+1126891415&4294967295,R=w+(C<<10&4294967295|C>>>22),C=A+(w^(R|~I))+S[14]+2878612391&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~w))+S[5]+4237533241&4294967295,I=A+(C<<21&4294967295|C>>>11),C=w+(A^(I|~R))+S[12]+1700485571&4294967295,w=I+(C<<6&4294967295|C>>>26),C=R+(I^(w|~A))+S[3]+2399980690&4294967295,R=w+(C<<10&4294967295|C>>>22),C=A+(w^(R|~I))+S[10]+4293915773&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~w))+S[1]+2240044497&4294967295,I=A+(C<<21&4294967295|C>>>11),C=w+(A^(I|~R))+S[8]+1873313359&4294967295,w=I+(C<<6&4294967295|C>>>26),C=R+(I^(w|~A))+S[15]+4264355552&4294967295,R=w+(C<<10&4294967295|C>>>22),C=A+(w^(R|~I))+S[6]+2734768916&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~w))+S[13]+1309151649&4294967295,I=A+(C<<21&4294967295|C>>>11),C=w+(A^(I|~R))+S[4]+4149444226&4294967295,w=I+(C<<6&4294967295|C>>>26),C=R+(I^(w|~A))+S[11]+3174756917&4294967295,R=w+(C<<10&4294967295|C>>>22),C=A+(w^(R|~I))+S[2]+718787259&4294967295,A=R+(C<<15&4294967295|C>>>17),C=I+(R^(A|~w))+S[9]+3951481745&4294967295,v.g[0]=v.g[0]+w&4294967295,v.g[1]=v.g[1]+(A+(C<<21&4294967295|C>>>11))&4294967295,v.g[2]=v.g[2]+A&4294967295,v.g[3]=v.g[3]+R&4294967295}r.prototype.v=function(v,w){w===void 0&&(w=v.length);const I=w-this.blockSize,S=this.C;let A=this.h,R=0;for(;R<w;){if(A==0)for(;R<=I;)i(this,v,R),R+=this.blockSize;if(typeof v=="string"){for(;R<w;)if(S[A++]=v.charCodeAt(R++),A==this.blockSize){i(this,S),A=0;break}}else for(;R<w;)if(S[A++]=v[R++],A==this.blockSize){i(this,S),A=0;break}}this.h=A,this.o+=w},r.prototype.A=function(){var v=Array((this.h<56?this.blockSize:this.blockSize*2)-this.h);v[0]=128;for(var w=1;w<v.length-8;++w)v[w]=0;w=this.o*8;for(var I=v.length-8;I<v.length;++I)v[I]=w&255,w/=256;for(this.v(v),v=Array(16),w=0,I=0;I<4;++I)for(let S=0;S<32;S+=8)v[w++]=this.g[I]>>>S&255;return v};function s(v,w){var I=a;return Object.prototype.hasOwnProperty.call(I,v)?I[v]:I[v]=w(v)}function o(v,w){this.h=w;const I=[];let S=!0;for(let A=v.length-1;A>=0;A--){const R=v[A]|0;S&&R==w||(I[A]=R,S=!1)}this.g=I}var a={};function u(v){return-128<=v&&v<128?s(v,function(w){return new o([w|0],w<0?-1:0)}):new o([v|0],v<0?-1:0)}function c(v){if(isNaN(v)||!isFinite(v))return f;if(v<0)return P(c(-v));const w=[];let I=1;for(let S=0;v>=I;S++)w[S]=v/I|0,I*=4294967296;return new o(w,0)}function d(v,w){if(v.length==0)throw Error("number format error: empty string");if(w=w||10,w<2||36<w)throw Error("radix out of range: "+w);if(v.charAt(0)=="-")return P(d(v.substring(1),w));if(v.indexOf("-")>=0)throw Error('number format error: interior "-" character');const I=c(Math.pow(w,8));let S=f;for(let R=0;R<v.length;R+=8){var A=Math.min(8,v.length-R);const C=parseInt(v.substring(R,R+A),w);A<8?(A=c(Math.pow(w,A)),S=S.j(A).add(c(C))):(S=S.j(I),S=S.add(c(C)))}return S}var f=u(0),m=u(1),g=u(16777216);t=o.prototype,t.m=function(){if(b(this))return-P(this).m();let v=0,w=1;for(let I=0;I<this.g.length;I++){const S=this.i(I);v+=(S>=0?S:4294967296+S)*w,w*=4294967296}return v},t.toString=function(v){if(v=v||10,v<2||36<v)throw Error("radix out of range: "+v);if(_(this))return"0";if(b(this))return"-"+P(this).toString(v);const w=c(Math.pow(v,6));var I=this;let S="";for(;;){const A=O(I,w).g;I=x(I,A.j(w));let R=((I.g.length>0?I.g[0]:I.h)>>>0).toString(v);if(I=A,_(I))return R+S;for(;R.length<6;)R="0"+R;S=R+S}},t.i=function(v){return v<0?0:v<this.g.length?this.g[v]:this.h};function _(v){if(v.h!=0)return!1;for(let w=0;w<v.g.length;w++)if(v.g[w]!=0)return!1;return!0}function b(v){return v.h==-1}t.l=function(v){return v=x(this,v),b(v)?-1:_(v)?0:1};function P(v){const w=v.g.length,I=[];for(let S=0;S<w;S++)I[S]=~v.g[S];return new o(I,~v.h).add(m)}t.abs=function(){return b(this)?P(this):this},t.add=function(v){const w=Math.max(this.g.length,v.g.length),I=[];let S=0;for(let A=0;A<=w;A++){let R=S+(this.i(A)&65535)+(v.i(A)&65535),C=(R>>>16)+(this.i(A)>>>16)+(v.i(A)>>>16);S=C>>>16,R&=65535,C&=65535,I[A]=C<<16|R}return new o(I,I[I.length-1]&-2147483648?-1:0)};function x(v,w){return v.add(P(w))}t.j=function(v){if(_(this)||_(v))return f;if(b(this))return b(v)?P(this).j(P(v)):P(P(this).j(v));if(b(v))return P(this.j(P(v)));if(this.l(g)<0&&v.l(g)<0)return c(this.m()*v.m());const w=this.g.length+v.g.length,I=[];for(var S=0;S<2*w;S++)I[S]=0;for(S=0;S<this.g.length;S++)for(let A=0;A<v.g.length;A++){const R=this.i(S)>>>16,C=this.i(S)&65535,te=v.i(A)>>>16,ne=v.i(A)&65535;I[2*S+2*A]+=C*ne,k(I,2*S+2*A),I[2*S+2*A+1]+=R*ne,k(I,2*S+2*A+1),I[2*S+2*A+1]+=C*te,k(I,2*S+2*A+1),I[2*S+2*A+2]+=R*te,k(I,2*S+2*A+2)}for(v=0;v<w;v++)I[v]=I[2*v+1]<<16|I[2*v];for(v=w;v<2*w;v++)I[v]=0;return new o(I,0)};function k(v,w){for(;(v[w]&65535)!=v[w];)v[w+1]+=v[w]>>>16,v[w]&=65535,w++}function E(v,w){this.g=v,this.h=w}function O(v,w){if(_(w))throw Error("division by zero");if(_(v))return new E(f,f);if(b(v))return w=O(P(v),w),new E(P(w.g),P(w.h));if(b(w))return w=O(v,P(w)),new E(P(w.g),w.h);if(v.g.length>30){if(b(v)||b(w))throw Error("slowDivide_ only works with positive integers.");for(var I=m,S=w;S.l(v)<=0;)I=M(I),S=M(S);var A=D(I,1),R=D(S,1);for(S=D(S,2),I=D(I,2);!_(S);){var C=R.add(S);C.l(v)<=0&&(A=A.add(I),R=C),S=D(S,1),I=D(I,1)}return w=x(v,A.j(w)),new E(A,w)}for(A=f;v.l(w)>=0;){for(I=Math.max(1,Math.floor(v.m()/w.m())),S=Math.ceil(Math.log(I)/Math.LN2),S=S<=48?1:Math.pow(2,S-48),R=c(I),C=R.j(w);b(C)||C.l(v)>0;)I-=S,R=c(I),C=R.j(w);_(R)&&(R=m),A=A.add(R),v=x(v,C)}return new E(A,v)}t.B=function(v){return O(this,v).h},t.and=function(v){const w=Math.max(this.g.length,v.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)&v.i(S);return new o(I,this.h&v.h)},t.or=function(v){const w=Math.max(this.g.length,v.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)|v.i(S);return new o(I,this.h|v.h)},t.xor=function(v){const w=Math.max(this.g.length,v.g.length),I=[];for(let S=0;S<w;S++)I[S]=this.i(S)^v.i(S);return new o(I,this.h^v.h)};function M(v){const w=v.g.length+1,I=[];for(let S=0;S<w;S++)I[S]=v.i(S)<<1|v.i(S-1)>>>31;return new o(I,v.h)}function D(v,w){const I=w>>5;w%=32;const S=v.g.length-I,A=[];for(let R=0;R<S;R++)A[R]=w>0?v.i(R+I)>>>w|v.i(R+I+1)<<32-w:v.i(R+I);return new o(A,v.h)}r.prototype.digest=r.prototype.A,r.prototype.reset=r.prototype.u,r.prototype.update=r.prototype.v,BE=r,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.B,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=d,gi=o}).apply(typeof V_<"u"?V_:typeof self<"u"?self:typeof window<"u"?window:{});var gu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $E,xa,qE,qu,cp,HE,WE,GE;(function(){var t,e=Object.defineProperty;function n(l){l=[typeof globalThis=="object"&&globalThis,l,typeof window=="object"&&window,typeof self=="object"&&self,typeof gu=="object"&&gu];for(var p=0;p<l.length;++p){var y=l[p];if(y&&y.Math==Math)return y}throw Error("Cannot find global object")}var r=n(this);function i(l,p){if(p)e:{var y=r;l=l.split(".");for(var T=0;T<l.length-1;T++){var L=l[T];if(!(L in y))break e;y=y[L]}l=l[l.length-1],T=y[l],p=p(T),p!=T&&p!=null&&e(y,l,{configurable:!0,writable:!0,value:p})}}i("Symbol.dispose",function(l){return l||Symbol("Symbol.dispose")}),i("Array.prototype.values",function(l){return l||function(){return this[Symbol.iterator]()}}),i("Object.entries",function(l){return l||function(p){var y=[],T;for(T in p)Object.prototype.hasOwnProperty.call(p,T)&&y.push([T,p[T]]);return y}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var s=s||{},o=this||self;function a(l){var p=typeof l;return p=="object"&&l!=null||p=="function"}function u(l,p,y){return l.call.apply(l.bind,arguments)}function c(l,p,y){return c=u,c.apply(null,arguments)}function d(l,p){var y=Array.prototype.slice.call(arguments,1);return function(){var T=y.slice();return T.push.apply(T,arguments),l.apply(this,T)}}function f(l,p){function y(){}y.prototype=p.prototype,l.Z=p.prototype,l.prototype=new y,l.prototype.constructor=l,l.Ob=function(T,L,V){for(var Q=Array(arguments.length-2),ge=2;ge<arguments.length;ge++)Q[ge-2]=arguments[ge];return p.prototype[L].apply(T,Q)}}var m=typeof AsyncContext<"u"&&typeof AsyncContext.Snapshot=="function"?l=>l&&AsyncContext.Snapshot.wrap(l):l=>l;function g(l){const p=l.length;if(p>0){const y=Array(p);for(let T=0;T<p;T++)y[T]=l[T];return y}return[]}function _(l,p){for(let T=1;T<arguments.length;T++){const L=arguments[T];var y=typeof L;if(y=y!="object"?y:L?Array.isArray(L)?"array":y:"null",y=="array"||y=="object"&&typeof L.length=="number"){y=l.length||0;const V=L.length||0;l.length=y+V;for(let Q=0;Q<V;Q++)l[y+Q]=L[Q]}else l.push(L)}}class b{constructor(p,y){this.i=p,this.j=y,this.h=0,this.g=null}get(){let p;return this.h>0?(this.h--,p=this.g,this.g=p.next,p.next=null):p=this.i(),p}}function P(l){o.setTimeout(()=>{throw l},0)}function x(){var l=v;let p=null;return l.g&&(p=l.g,l.g=l.g.next,l.g||(l.h=null),p.next=null),p}class k{constructor(){this.h=this.g=null}add(p,y){const T=E.get();T.set(p,y),this.h?this.h.next=T:this.g=T,this.h=T}}var E=new b(()=>new O,l=>l.reset());class O{constructor(){this.next=this.g=this.h=null}set(p,y){this.h=p,this.g=y,this.next=null}reset(){this.next=this.g=this.h=null}}let M,D=!1,v=new k,w=()=>{const l=Promise.resolve(void 0);M=()=>{l.then(I)}};function I(){for(var l;l=x();){try{l.h.call(l.g)}catch(y){P(y)}var p=E;p.j(l),p.h<100&&(p.h++,l.next=p.g,p.g=l)}D=!1}function S(){this.u=this.u,this.C=this.C}S.prototype.u=!1,S.prototype.dispose=function(){this.u||(this.u=!0,this.N())},S.prototype[Symbol.dispose]=function(){this.dispose()},S.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function A(l,p){this.type=l,this.g=this.target=p,this.defaultPrevented=!1}A.prototype.h=function(){this.defaultPrevented=!0};var R=function(){if(!o.addEventListener||!Object.defineProperty)return!1;var l=!1,p=Object.defineProperty({},"passive",{get:function(){l=!0}});try{const y=()=>{};o.addEventListener("test",y,p),o.removeEventListener("test",y,p)}catch{}return l}();function C(l){return/^[\s\xa0]*$/.test(l)}function te(l,p){A.call(this,l?l.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,l&&this.init(l,p)}f(te,A),te.prototype.init=function(l,p){const y=this.type=l.type,T=l.changedTouches&&l.changedTouches.length?l.changedTouches[0]:null;this.target=l.target||l.srcElement,this.g=p,p=l.relatedTarget,p||(y=="mouseover"?p=l.fromElement:y=="mouseout"&&(p=l.toElement)),this.relatedTarget=p,T?(this.clientX=T.clientX!==void 0?T.clientX:T.pageX,this.clientY=T.clientY!==void 0?T.clientY:T.pageY,this.screenX=T.screenX||0,this.screenY=T.screenY||0):(this.clientX=l.clientX!==void 0?l.clientX:l.pageX,this.clientY=l.clientY!==void 0?l.clientY:l.pageY,this.screenX=l.screenX||0,this.screenY=l.screenY||0),this.button=l.button,this.key=l.key||"",this.ctrlKey=l.ctrlKey,this.altKey=l.altKey,this.shiftKey=l.shiftKey,this.metaKey=l.metaKey,this.pointerId=l.pointerId||0,this.pointerType=l.pointerType,this.state=l.state,this.i=l,l.defaultPrevented&&te.Z.h.call(this)},te.prototype.h=function(){te.Z.h.call(this);const l=this.i;l.preventDefault?l.preventDefault():l.returnValue=!1};var ne="closure_listenable_"+(Math.random()*1e6|0),X=0;function W(l,p,y,T,L){this.listener=l,this.proxy=null,this.src=p,this.type=y,this.capture=!!T,this.ha=L,this.key=++X,this.da=this.fa=!1}function B(l){l.da=!0,l.listener=null,l.proxy=null,l.src=null,l.ha=null}function Y(l,p,y){for(const T in l)p.call(y,l[T],T,l)}function N(l,p){for(const y in l)p.call(void 0,l[y],y,l)}function ue(l){const p={};for(const y in l)p[y]=l[y];return p}const me="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function j(l,p){let y,T;for(let L=1;L<arguments.length;L++){T=arguments[L];for(y in T)l[y]=T[y];for(let V=0;V<me.length;V++)y=me[V],Object.prototype.hasOwnProperty.call(T,y)&&(l[y]=T[y])}}function be(l){this.src=l,this.g={},this.h=0}be.prototype.add=function(l,p,y,T,L){const V=l.toString();l=this.g[V],l||(l=this.g[V]=[],this.h++);const Q=Ee(l,p,T,L);return Q>-1?(p=l[Q],y||(p.fa=!1)):(p=new W(p,this.src,V,!!T,L),p.fa=y,l.push(p)),p};function De(l,p){const y=p.type;if(y in l.g){var T=l.g[y],L=Array.prototype.indexOf.call(T,p,void 0),V;(V=L>=0)&&Array.prototype.splice.call(T,L,1),V&&(B(p),l.g[y].length==0&&(delete l.g[y],l.h--))}}function Ee(l,p,y,T){for(let L=0;L<l.length;++L){const V=l[L];if(!V.da&&V.listener==p&&V.capture==!!y&&V.ha==T)return L}return-1}var ft="closure_lm_"+(Math.random()*1e6|0),$t={};function vn(l,p,y,T,L){if(Array.isArray(p)){for(let V=0;V<p.length;V++)vn(l,p[V],y,T,L);return null}return y=Ul(y),l&&l[ne]?l.J(p,y,a(T)?!!T.capture:!1,L):rn(l,p,y,!1,T,L)}function rn(l,p,y,T,L,V){if(!p)throw Error("Invalid event type");const Q=a(L)?!!L.capture:!!L;let ge=Wn(l);if(ge||(l[ft]=ge=new be(l)),y=ge.add(p,y,T,Q,V),y.proxy)return y;if(T=fr(),y.proxy=T,T.src=l,T.listener=y,l.addEventListener)R||(L=Q),L===void 0&&(L=!1),l.addEventListener(p.toString(),T,L);else if(l.attachEvent)l.attachEvent(re(p.toString()),T);else if(l.addListener&&l.removeListener)l.addListener(T);else throw Error("addEventListener and attachEvent are unavailable.");return y}function fr(){function l(y){return p.call(l.src,l.listener,y)}const p=Cn;return l}function bs(l,p,y,T,L){if(Array.isArray(p))for(var V=0;V<p.length;V++)bs(l,p[V],y,T,L);else T=a(T)?!!T.capture:!!T,y=Ul(y),l&&l[ne]?(l=l.i,V=String(p).toString(),V in l.g&&(p=l.g[V],y=Ee(p,y,T,L),y>-1&&(B(p[y]),Array.prototype.splice.call(p,y,1),p.length==0&&(delete l.g[V],l.h--)))):l&&(l=Wn(l))&&(p=l.g[p.toString()],l=-1,p&&(l=Ee(p,y,T,L)),(y=l>-1?p[l]:null)&&se(y))}function se(l){if(typeof l!="number"&&l&&!l.da){var p=l.src;if(p&&p[ne])De(p.i,l);else{var y=l.type,T=l.proxy;p.removeEventListener?p.removeEventListener(y,T,l.capture):p.detachEvent?p.detachEvent(re(y),T):p.addListener&&p.removeListener&&p.removeListener(T),(y=Wn(p))?(De(y,l),y.h==0&&(y.src=null,p[ft]=null)):B(l)}}}function re(l){return l in $t?$t[l]:$t[l]="on"+l}function Cn(l,p){if(l.da)l=!0;else{p=new te(p,this);const y=l.listener,T=l.ha||l.src;l.fa&&se(l),l=y.call(T,p)}return l}function Wn(l){return l=l[ft],l instanceof be?l:null}var Gn="__closure_events_fn_"+(Math.random()*1e9>>>0);function Ul(l){return typeof l=="function"?l:(l[Gn]||(l[Gn]=function(p){return l.handleEvent(p)}),l[Gn])}function at(){S.call(this),this.i=new be(this),this.M=this,this.G=null}f(at,S),at.prototype[ne]=!0,at.prototype.removeEventListener=function(l,p,y,T){bs(this,l,p,y,T)};function pt(l,p){var y,T=l.G;if(T)for(y=[];T;T=T.G)y.push(T);if(l=l.M,T=p.type||p,typeof p=="string")p=new A(p,l);else if(p instanceof A)p.target=p.target||l;else{var L=p;p=new A(T,l),j(p,L)}L=!0;let V,Q;if(y)for(Q=y.length-1;Q>=0;Q--)V=p.g=y[Q],L=Ss(V,T,!0,p)&&L;if(V=p.g=l,L=Ss(V,T,!0,p)&&L,L=Ss(V,T,!1,p)&&L,y)for(Q=0;Q<y.length;Q++)V=p.g=y[Q],L=Ss(V,T,!1,p)&&L}at.prototype.N=function(){if(at.Z.N.call(this),this.i){var l=this.i;for(const p in l.g){const y=l.g[p];for(let T=0;T<y.length;T++)B(y[T]);delete l.g[p],l.h--}}this.G=null},at.prototype.J=function(l,p,y,T){return this.i.add(String(l),p,!1,y,T)},at.prototype.K=function(l,p,y,T){return this.i.add(String(l),p,!0,y,T)};function Ss(l,p,y,T){if(p=l.i.g[String(p)],!p)return!0;p=p.concat();let L=!0;for(let V=0;V<p.length;++V){const Q=p[V];if(Q&&!Q.da&&Q.capture==y){const ge=Q.listener,lt=Q.ha||Q.src;Q.fa&&De(l.i,Q),L=ge.call(lt,T)!==!1&&L}}return L&&!T.defaultPrevented}function Gh(l,p){if(typeof l!="function")if(l&&typeof l.handleEvent=="function")l=c(l.handleEvent,l);else throw Error("Invalid listener argument");return Number(p)>2147483647?-1:o.setTimeout(l,p||0)}function zl(l){l.g=Gh(()=>{l.g=null,l.i&&(l.i=!1,zl(l))},l.l);const p=l.h;l.h=null,l.m.apply(null,p)}class Kh extends S{constructor(p,y){super(),this.m=p,this.l=y,this.h=null,this.i=!1,this.g=null}j(p){this.h=arguments,this.g?this.i=!0:zl(this)}N(){super.N(),this.g&&(o.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Mi(l){S.call(this),this.h=l,this.g={}}f(Mi,S);var z=[];function K(l){Y(l.g,function(p,y){this.g.hasOwnProperty(y)&&se(p)},l),l.g={}}Mi.prototype.N=function(){Mi.Z.N.call(this),K(this)},Mi.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ce=o.JSON.stringify,ye=o.JSON.parse,Ce=class{stringify(l){return o.JSON.stringify(l,void 0)}parse(l){return o.JSON.parse(l,void 0)}};function qt(){}function Kn(){}var Ot={OPEN:"a",hb:"b",ERROR:"c",tb:"d"};function pr(){A.call(this,"d")}f(pr,A);function mr(){A.call(this,"c")}f(mr,A);var Ze={},gr=null;function Ht(){return gr=gr||new at}Ze.Ia="serverreachability";function ay(l){A.call(this,Ze.Ia,l)}f(ay,A);function $o(l){const p=Ht();pt(p,new ay(p))}Ze.STAT_EVENT="statevent";function ly(l,p){A.call(this,Ze.STAT_EVENT,l),this.stat=p}f(ly,A);function Lt(l){const p=Ht();pt(p,new ly(p,l))}Ze.Ja="timingevent";function uy(l,p){A.call(this,Ze.Ja,l),this.size=p}f(uy,A);function qo(l,p){if(typeof l!="function")throw Error("Fn must not be null and must be a function");return o.setTimeout(function(){l()},p)}function Ho(){this.g=!0}Ho.prototype.ua=function(){this.g=!1};function CT(l,p,y,T,L,V){l.info(function(){if(l.g)if(V){var Q="",ge=V.split("&");for(let Re=0;Re<ge.length;Re++){var lt=ge[Re].split("=");if(lt.length>1){const mt=lt[0];lt=lt[1];const Xn=mt.split("_");Q=Xn.length>=2&&Xn[1]=="type"?Q+(mt+"="+lt+"&"):Q+(mt+"=redacted&")}}}else Q=null;else Q=V;return"XMLHTTP REQ ("+T+") [attempt "+L+"]: "+p+`
`+y+`
`+Q})}function NT(l,p,y,T,L,V,Q){l.info(function(){return"XMLHTTP RESP ("+T+") [ attempt "+L+"]: "+p+`
`+y+`
`+V+" "+Q})}function As(l,p,y,T){l.info(function(){return"XMLHTTP TEXT ("+p+"): "+PT(l,y)+(T?" "+T:"")})}function RT(l,p){l.info(function(){return"TIMEOUT: "+p})}Ho.prototype.info=function(){};function PT(l,p){if(!l.g)return p;if(!p)return null;try{const V=JSON.parse(p);if(V){for(l=0;l<V.length;l++)if(Array.isArray(V[l])){var y=V[l];if(!(y.length<2)){var T=y[1];if(Array.isArray(T)&&!(T.length<1)){var L=T[0];if(L!="noop"&&L!="stop"&&L!="close")for(let Q=1;Q<T.length;Q++)T[Q]=""}}}}return ce(V)}catch{return p}}var Bl={NO_ERROR:0,cb:1,qb:2,pb:3,kb:4,ob:5,rb:6,Ga:7,TIMEOUT:8,ub:9},cy={ib:"complete",Fb:"success",ERROR:"error",Ga:"abort",xb:"ready",yb:"readystatechange",TIMEOUT:"timeout",sb:"incrementaldata",wb:"progress",lb:"downloadprogress",Nb:"uploadprogress"},hy;function Qh(){}f(Qh,qt),Qh.prototype.g=function(){return new XMLHttpRequest},hy=new Qh;function Wo(l){return encodeURIComponent(String(l))}function DT(l){var p=1;l=l.split(":");const y=[];for(;p>0&&l.length;)y.push(l.shift()),p--;return l.length&&y.push(l.join(":")),y}function Vr(l,p,y,T){this.j=l,this.i=p,this.l=y,this.S=T||1,this.V=new Mi(this),this.H=45e3,this.J=null,this.o=!1,this.u=this.B=this.A=this.M=this.F=this.T=this.D=null,this.G=[],this.g=null,this.C=0,this.m=this.v=null,this.X=-1,this.K=!1,this.P=0,this.O=null,this.W=this.L=this.U=this.R=!1,this.h=new dy}function dy(){this.i=null,this.g="",this.h=!1}var fy={},Xh={};function Yh(l,p,y){l.M=1,l.A=ql(Qn(p)),l.u=y,l.R=!0,py(l,null)}function py(l,p){l.F=Date.now(),$l(l),l.B=Qn(l.A);var y=l.B,T=l.S;Array.isArray(T)||(T=[String(T)]),Sy(y.i,"t",T),l.C=0,y=l.j.L,l.h=new dy,l.g=Hy(l.j,y?p:null,!l.u),l.P>0&&(l.O=new Kh(c(l.Y,l,l.g),l.P)),p=l.V,y=l.g,T=l.ba;var L="readystatechange";Array.isArray(L)||(L&&(z[0]=L.toString()),L=z);for(let V=0;V<L.length;V++){const Q=vn(y,L[V],T||p.handleEvent,!1,p.h||p);if(!Q)break;p.g[Q.key]=Q}p=l.J?ue(l.J):{},l.u?(l.v||(l.v="POST"),p["Content-Type"]="application/x-www-form-urlencoded",l.g.ea(l.B,l.v,l.u,p)):(l.v="GET",l.g.ea(l.B,l.v,null,p)),$o(),CT(l.i,l.v,l.B,l.l,l.S,l.u)}Vr.prototype.ba=function(l){l=l.target;const p=this.O;p&&zr(l)==3?p.j():this.Y(l)},Vr.prototype.Y=function(l){try{if(l==this.g)e:{const ge=zr(this.g),lt=this.g.ya(),Re=this.g.ca();if(!(ge<3)&&(ge!=3||this.g&&(this.h.h||this.g.la()||jy(this.g)))){this.K||ge!=4||lt==7||(lt==8||Re<=0?$o(3):$o(2)),Jh(this);var p=this.g.ca();this.X=p;var y=jT(this);if(this.o=p==200,NT(this.i,this.v,this.B,this.l,this.S,ge,p),this.o){if(this.U&&!this.L){t:{if(this.g){var T,L=this.g;if((T=L.g?L.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!C(T)){var V=T;break t}}V=null}if(l=V)As(this.i,this.l,l,"Initial handshake response via X-HTTP-Initial-Response"),this.L=!0,Zh(this,l);else{this.o=!1,this.m=3,Lt(12),Vi(this),Go(this);break e}}if(this.R){l=!0;let mt;for(;!this.K&&this.C<y.length;)if(mt=OT(this,y),mt==Xh){ge==4&&(this.m=4,Lt(14),l=!1),As(this.i,this.l,null,"[Incomplete Response]");break}else if(mt==fy){this.m=4,Lt(15),As(this.i,this.l,y,"[Invalid Chunk]"),l=!1;break}else As(this.i,this.l,mt,null),Zh(this,mt);if(my(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),ge!=4||y.length!=0||this.h.h||(this.m=1,Lt(16),l=!1),this.o=this.o&&l,!l)As(this.i,this.l,y,"[Invalid Chunked Response]"),Vi(this),Go(this);else if(y.length>0&&!this.W){this.W=!0;var Q=this.j;Q.g==this&&Q.aa&&!Q.P&&(Q.j.info("Great, no buffering proxy detected. Bytes received: "+y.length),ad(Q),Q.P=!0,Lt(11))}}else As(this.i,this.l,y,null),Zh(this,y);ge==4&&Vi(this),this.o&&!this.K&&(ge==4?zy(this.j,this):(this.o=!1,$l(this)))}else QT(this.g),p==400&&y.indexOf("Unknown SID")>0?(this.m=3,Lt(12)):(this.m=0,Lt(13)),Vi(this),Go(this)}}}catch{}finally{}};function jT(l){if(!my(l))return l.g.la();const p=jy(l.g);if(p==="")return"";let y="";const T=p.length,L=zr(l.g)==4;if(!l.h.i){if(typeof TextDecoder>"u")return Vi(l),Go(l),"";l.h.i=new o.TextDecoder}for(let V=0;V<T;V++)l.h.h=!0,y+=l.h.i.decode(p[V],{stream:!(L&&V==T-1)});return p.length=0,l.h.g+=y,l.C=0,l.h.g}function my(l){return l.g?l.v=="GET"&&l.M!=2&&l.j.Aa:!1}function OT(l,p){var y=l.C,T=p.indexOf(`
`,y);return T==-1?Xh:(y=Number(p.substring(y,T)),isNaN(y)?fy:(T+=1,T+y>p.length?Xh:(p=p.slice(T,T+y),l.C=T+y,p)))}Vr.prototype.cancel=function(){this.K=!0,Vi(this)};function $l(l){l.T=Date.now()+l.H,gy(l,l.H)}function gy(l,p){if(l.D!=null)throw Error("WatchDog timer not null");l.D=qo(c(l.aa,l),p)}function Jh(l){l.D&&(o.clearTimeout(l.D),l.D=null)}Vr.prototype.aa=function(){this.D=null;const l=Date.now();l-this.T>=0?(RT(this.i,this.B),this.M!=2&&($o(),Lt(17)),Vi(this),this.m=2,Go(this)):gy(this,this.T-l)};function Go(l){l.j.I==0||l.K||zy(l.j,l)}function Vi(l){Jh(l);var p=l.O;p&&typeof p.dispose=="function"&&p.dispose(),l.O=null,K(l.V),l.g&&(p=l.g,l.g=null,p.abort(),p.dispose())}function Zh(l,p){try{var y=l.j;if(y.I!=0&&(y.g==l||ed(y.h,l))){if(!l.L&&ed(y.h,l)&&y.I==3){try{var T=y.Ba.g.parse(p)}catch{T=null}if(Array.isArray(T)&&T.length==3){var L=T;if(L[0]==0){e:if(!y.v){if(y.g)if(y.g.F+3e3<l.F)Ql(y),Gl(y);else break e;od(y),Lt(18)}}else y.xa=L[1],0<y.xa-y.K&&L[2]<37500&&y.F&&y.A==0&&!y.C&&(y.C=qo(c(y.Va,y),6e3));_y(y.h)<=1&&y.ta&&(y.ta=void 0)}else Ui(y,11)}else if((l.L||y.g==l)&&Ql(y),!C(p))for(L=y.Ba.g.parse(p),p=0;p<L.length;p++){let Re=L[p];const mt=Re[0];if(!(mt<=y.K))if(y.K=mt,Re=Re[1],y.I==2)if(Re[0]=="c"){y.M=Re[1],y.ba=Re[2];const Xn=Re[3];Xn!=null&&(y.ka=Xn,y.j.info("VER="+y.ka));const zi=Re[4];zi!=null&&(y.za=zi,y.j.info("SVER="+y.za));const Br=Re[5];Br!=null&&typeof Br=="number"&&Br>0&&(T=1.5*Br,y.O=T,y.j.info("backChannelRequestTimeoutMs_="+T)),T=y;const $r=l.g;if($r){const Yl=$r.g?$r.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Yl){var V=T.h;V.g||Yl.indexOf("spdy")==-1&&Yl.indexOf("quic")==-1&&Yl.indexOf("h2")==-1||(V.j=V.l,V.g=new Set,V.h&&(td(V,V.h),V.h=null))}if(T.G){const ld=$r.g?$r.g.getResponseHeader("X-HTTP-Session-Id"):null;ld&&(T.wa=ld,Fe(T.J,T.G,ld))}}y.I=3,y.l&&y.l.ra(),y.aa&&(y.T=Date.now()-l.F,y.j.info("Handshake RTT: "+y.T+"ms")),T=y;var Q=l;if(T.na=qy(T,T.L?T.ba:null,T.W),Q.L){vy(T.h,Q);var ge=Q,lt=T.O;lt&&(ge.H=lt),ge.D&&(Jh(ge),$l(ge)),T.g=Q}else Fy(T);y.i.length>0&&Kl(y)}else Re[0]!="stop"&&Re[0]!="close"||Ui(y,7);else y.I==3&&(Re[0]=="stop"||Re[0]=="close"?Re[0]=="stop"?Ui(y,7):sd(y):Re[0]!="noop"&&y.l&&y.l.qa(Re),y.A=0)}}$o(4)}catch{}}var LT=class{constructor(l,p){this.g=l,this.map=p}};function yy(l){this.l=l||10,o.PerformanceNavigationTiming?(l=o.performance.getEntriesByType("navigation"),l=l.length>0&&(l[0].nextHopProtocol=="hq"||l[0].nextHopProtocol=="h2")):l=!!(o.chrome&&o.chrome.loadTimes&&o.chrome.loadTimes()&&o.chrome.loadTimes().wasFetchedViaSpdy),this.j=l?this.l:1,this.g=null,this.j>1&&(this.g=new Set),this.h=null,this.i=[]}function wy(l){return l.h?!0:l.g?l.g.size>=l.j:!1}function _y(l){return l.h?1:l.g?l.g.size:0}function ed(l,p){return l.h?l.h==p:l.g?l.g.has(p):!1}function td(l,p){l.g?l.g.add(p):l.h=p}function vy(l,p){l.h&&l.h==p?l.h=null:l.g&&l.g.has(p)&&l.g.delete(p)}yy.prototype.cancel=function(){if(this.i=xy(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const l of this.g.values())l.cancel();this.g.clear()}};function xy(l){if(l.h!=null)return l.i.concat(l.h.G);if(l.g!=null&&l.g.size!==0){let p=l.i;for(const y of l.g.values())p=p.concat(y.G);return p}return g(l.i)}var Ey=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function MT(l,p){if(l){l=l.split("&");for(let y=0;y<l.length;y++){const T=l[y].indexOf("=");let L,V=null;T>=0?(L=l[y].substring(0,T),V=l[y].substring(T+1)):L=l[y],p(L,V?decodeURIComponent(V.replace(/\+/g," ")):"")}}}function Fr(l){this.g=this.o=this.j="",this.u=null,this.m=this.h="",this.l=!1;let p;l instanceof Fr?(this.l=l.l,Ko(this,l.j),this.o=l.o,this.g=l.g,Qo(this,l.u),this.h=l.h,nd(this,Ay(l.i)),this.m=l.m):l&&(p=String(l).match(Ey))?(this.l=!1,Ko(this,p[1]||"",!0),this.o=Xo(p[2]||""),this.g=Xo(p[3]||"",!0),Qo(this,p[4]),this.h=Xo(p[5]||"",!0),nd(this,p[6]||"",!0),this.m=Xo(p[7]||"")):(this.l=!1,this.i=new Jo(null,this.l))}Fr.prototype.toString=function(){const l=[];var p=this.j;p&&l.push(Yo(p,ky,!0),":");var y=this.g;return(y||p=="file")&&(l.push("//"),(p=this.o)&&l.push(Yo(p,ky,!0),"@"),l.push(Wo(y).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y=this.u,y!=null&&l.push(":",String(y))),(y=this.h)&&(this.g&&y.charAt(0)!="/"&&l.push("/"),l.push(Yo(y,y.charAt(0)=="/"?UT:FT,!0))),(y=this.i.toString())&&l.push("?",y),(y=this.m)&&l.push("#",Yo(y,BT)),l.join("")},Fr.prototype.resolve=function(l){const p=Qn(this);let y=!!l.j;y?Ko(p,l.j):y=!!l.o,y?p.o=l.o:y=!!l.g,y?p.g=l.g:y=l.u!=null;var T=l.h;if(y)Qo(p,l.u);else if(y=!!l.h){if(T.charAt(0)!="/")if(this.g&&!this.h)T="/"+T;else{var L=p.h.lastIndexOf("/");L!=-1&&(T=p.h.slice(0,L+1)+T)}if(L=T,L==".."||L==".")T="";else if(L.indexOf("./")!=-1||L.indexOf("/.")!=-1){T=L.lastIndexOf("/",0)==0,L=L.split("/");const V=[];for(let Q=0;Q<L.length;){const ge=L[Q++];ge=="."?T&&Q==L.length&&V.push(""):ge==".."?((V.length>1||V.length==1&&V[0]!="")&&V.pop(),T&&Q==L.length&&V.push("")):(V.push(ge),T=!0)}T=V.join("/")}else T=L}return y?p.h=T:y=l.i.toString()!=="",y?nd(p,Ay(l.i)):y=!!l.m,y&&(p.m=l.m),p};function Qn(l){return new Fr(l)}function Ko(l,p,y){l.j=y?Xo(p,!0):p,l.j&&(l.j=l.j.replace(/:$/,""))}function Qo(l,p){if(p){if(p=Number(p),isNaN(p)||p<0)throw Error("Bad port number "+p);l.u=p}else l.u=null}function nd(l,p,y){p instanceof Jo?(l.i=p,$T(l.i,l.l)):(y||(p=Yo(p,zT)),l.i=new Jo(p,l.l))}function Fe(l,p,y){l.i.set(p,y)}function ql(l){return Fe(l,"zx",Math.floor(Math.random()*2147483648).toString(36)+Math.abs(Math.floor(Math.random()*2147483648)^Date.now()).toString(36)),l}function Xo(l,p){return l?p?decodeURI(l.replace(/%25/g,"%2525")):decodeURIComponent(l):""}function Yo(l,p,y){return typeof l=="string"?(l=encodeURI(l).replace(p,VT),y&&(l=l.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),l):null}function VT(l){return l=l.charCodeAt(0),"%"+(l>>4&15).toString(16)+(l&15).toString(16)}var ky=/[#\/\?@]/g,FT=/[#\?:]/g,UT=/[#\?]/g,zT=/[#\?@]/g,BT=/#/g;function Jo(l,p){this.h=this.g=null,this.i=l||null,this.j=!!p}function Fi(l){l.g||(l.g=new Map,l.h=0,l.i&&MT(l.i,function(p,y){l.add(decodeURIComponent(p.replace(/\+/g," ")),y)}))}t=Jo.prototype,t.add=function(l,p){Fi(this),this.i=null,l=Cs(this,l);let y=this.g.get(l);return y||this.g.set(l,y=[]),y.push(p),this.h+=1,this};function Iy(l,p){Fi(l),p=Cs(l,p),l.g.has(p)&&(l.i=null,l.h-=l.g.get(p).length,l.g.delete(p))}function Ty(l,p){return Fi(l),p=Cs(l,p),l.g.has(p)}t.forEach=function(l,p){Fi(this),this.g.forEach(function(y,T){y.forEach(function(L){l.call(p,L,T,this)},this)},this)};function by(l,p){Fi(l);let y=[];if(typeof p=="string")Ty(l,p)&&(y=y.concat(l.g.get(Cs(l,p))));else for(l=Array.from(l.g.values()),p=0;p<l.length;p++)y=y.concat(l[p]);return y}t.set=function(l,p){return Fi(this),this.i=null,l=Cs(this,l),Ty(this,l)&&(this.h-=this.g.get(l).length),this.g.set(l,[p]),this.h+=1,this},t.get=function(l,p){return l?(l=by(this,l),l.length>0?String(l[0]):p):p};function Sy(l,p,y){Iy(l,p),y.length>0&&(l.i=null,l.g.set(Cs(l,p),g(y)),l.h+=y.length)}t.toString=function(){if(this.i)return this.i;if(!this.g)return"";const l=[],p=Array.from(this.g.keys());for(let T=0;T<p.length;T++){var y=p[T];const L=Wo(y);y=by(this,y);for(let V=0;V<y.length;V++){let Q=L;y[V]!==""&&(Q+="="+Wo(y[V])),l.push(Q)}}return this.i=l.join("&")};function Ay(l){const p=new Jo;return p.i=l.i,l.g&&(p.g=new Map(l.g),p.h=l.h),p}function Cs(l,p){return p=String(p),l.j&&(p=p.toLowerCase()),p}function $T(l,p){p&&!l.j&&(Fi(l),l.i=null,l.g.forEach(function(y,T){const L=T.toLowerCase();T!=L&&(Iy(this,T),Sy(this,L,y))},l)),l.j=p}function qT(l,p){const y=new Ho;if(o.Image){const T=new Image;T.onload=d(Ur,y,"TestLoadImage: loaded",!0,p,T),T.onerror=d(Ur,y,"TestLoadImage: error",!1,p,T),T.onabort=d(Ur,y,"TestLoadImage: abort",!1,p,T),T.ontimeout=d(Ur,y,"TestLoadImage: timeout",!1,p,T),o.setTimeout(function(){T.ontimeout&&T.ontimeout()},1e4),T.src=l}else p(!1)}function HT(l,p){const y=new Ho,T=new AbortController,L=setTimeout(()=>{T.abort(),Ur(y,"TestPingServer: timeout",!1,p)},1e4);fetch(l,{signal:T.signal}).then(V=>{clearTimeout(L),V.ok?Ur(y,"TestPingServer: ok",!0,p):Ur(y,"TestPingServer: server error",!1,p)}).catch(()=>{clearTimeout(L),Ur(y,"TestPingServer: error",!1,p)})}function Ur(l,p,y,T,L){try{L&&(L.onload=null,L.onerror=null,L.onabort=null,L.ontimeout=null),T(y)}catch{}}function WT(){this.g=new Ce}function rd(l){this.i=l.Sb||null,this.h=l.ab||!1}f(rd,qt),rd.prototype.g=function(){return new Hl(this.i,this.h)};function Hl(l,p){at.call(this),this.H=l,this.o=p,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.A=new Headers,this.h=null,this.F="GET",this.D="",this.g=!1,this.B=this.j=this.l=null,this.v=new AbortController}f(Hl,at),t=Hl.prototype,t.open=function(l,p){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.F=l,this.D=p,this.readyState=1,ea(this)},t.send=function(l){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");if(this.v.signal.aborted)throw this.abort(),Error("Request was aborted.");this.g=!0;const p={headers:this.A,method:this.F,credentials:this.m,cache:void 0,signal:this.v.signal};l&&(p.body=l),(this.H||o).fetch(new Request(this.D,p)).then(this.Pa.bind(this),this.ga.bind(this))},t.abort=function(){this.response=this.responseText="",this.A=new Headers,this.status=0,this.v.abort(),this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),this.readyState>=1&&this.g&&this.readyState!=4&&(this.g=!1,Zo(this)),this.readyState=0},t.Pa=function(l){if(this.g&&(this.l=l,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=l.headers,this.readyState=2,ea(this)),this.g&&(this.readyState=3,ea(this),this.g)))if(this.responseType==="arraybuffer")l.arrayBuffer().then(this.Na.bind(this),this.ga.bind(this));else if(typeof o.ReadableStream<"u"&&"body"in l){if(this.j=l.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.B=new TextDecoder;Cy(this)}else l.text().then(this.Oa.bind(this),this.ga.bind(this))};function Cy(l){l.j.read().then(l.Ma.bind(l)).catch(l.ga.bind(l))}t.Ma=function(l){if(this.g){if(this.o&&l.value)this.response.push(l.value);else if(!this.o){var p=l.value?l.value:new Uint8Array(0);(p=this.B.decode(p,{stream:!l.done}))&&(this.response=this.responseText+=p)}l.done?Zo(this):ea(this),this.readyState==3&&Cy(this)}},t.Oa=function(l){this.g&&(this.response=this.responseText=l,Zo(this))},t.Na=function(l){this.g&&(this.response=l,Zo(this))},t.ga=function(){this.g&&Zo(this)};function Zo(l){l.readyState=4,l.l=null,l.j=null,l.B=null,ea(l)}t.setRequestHeader=function(l,p){this.A.append(l,p)},t.getResponseHeader=function(l){return this.h&&this.h.get(l.toLowerCase())||""},t.getAllResponseHeaders=function(){if(!this.h)return"";const l=[],p=this.h.entries();for(var y=p.next();!y.done;)y=y.value,l.push(y[0]+": "+y[1]),y=p.next();return l.join(`\r
`)};function ea(l){l.onreadystatechange&&l.onreadystatechange.call(l)}Object.defineProperty(Hl.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(l){this.m=l?"include":"same-origin"}});function Ny(l){let p="";return Y(l,function(y,T){p+=T,p+=":",p+=y,p+=`\r
`}),p}function id(l,p,y){e:{for(T in y){var T=!1;break e}T=!0}T||(y=Ny(y),typeof l=="string"?y!=null&&Wo(y):Fe(l,p,y))}function Ke(l){at.call(this),this.headers=new Map,this.L=l||null,this.h=!1,this.g=null,this.D="",this.o=0,this.l="",this.j=this.B=this.v=this.A=!1,this.m=null,this.F="",this.H=!1}f(Ke,at);var GT=/^https?$/i,KT=["POST","PUT"];t=Ke.prototype,t.Fa=function(l){this.H=l},t.ea=function(l,p,y,T){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+l);p=p?p.toUpperCase():"GET",this.D=l,this.l="",this.o=0,this.A=!1,this.h=!0,this.g=this.L?this.L.g():hy.g(),this.g.onreadystatechange=m(c(this.Ca,this));try{this.B=!0,this.g.open(p,String(l),!0),this.B=!1}catch(V){Ry(this,V);return}if(l=y||"",y=new Map(this.headers),T)if(Object.getPrototypeOf(T)===Object.prototype)for(var L in T)y.set(L,T[L]);else if(typeof T.keys=="function"&&typeof T.get=="function")for(const V of T.keys())y.set(V,T.get(V));else throw Error("Unknown input type for opt_headers: "+String(T));T=Array.from(y.keys()).find(V=>V.toLowerCase()=="content-type"),L=o.FormData&&l instanceof o.FormData,!(Array.prototype.indexOf.call(KT,p,void 0)>=0)||T||L||y.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[V,Q]of y)this.g.setRequestHeader(V,Q);this.F&&(this.g.responseType=this.F),"withCredentials"in this.g&&this.g.withCredentials!==this.H&&(this.g.withCredentials=this.H);try{this.m&&(clearTimeout(this.m),this.m=null),this.v=!0,this.g.send(l),this.v=!1}catch(V){Ry(this,V)}};function Ry(l,p){l.h=!1,l.g&&(l.j=!0,l.g.abort(),l.j=!1),l.l=p,l.o=5,Py(l),Wl(l)}function Py(l){l.A||(l.A=!0,pt(l,"complete"),pt(l,"error"))}t.abort=function(l){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.o=l||7,pt(this,"complete"),pt(this,"abort"),Wl(this))},t.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),Wl(this,!0)),Ke.Z.N.call(this)},t.Ca=function(){this.u||(this.B||this.v||this.j?Dy(this):this.Xa())},t.Xa=function(){Dy(this)};function Dy(l){if(l.h&&typeof s<"u"){if(l.v&&zr(l)==4)setTimeout(l.Ca.bind(l),0);else if(pt(l,"readystatechange"),zr(l)==4){l.h=!1;try{const V=l.ca();e:switch(V){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var p=!0;break e;default:p=!1}var y;if(!(y=p)){var T;if(T=V===0){let Q=String(l.D).match(Ey)[1]||null;!Q&&o.self&&o.self.location&&(Q=o.self.location.protocol.slice(0,-1)),T=!GT.test(Q?Q.toLowerCase():"")}y=T}if(y)pt(l,"complete"),pt(l,"success");else{l.o=6;try{var L=zr(l)>2?l.g.statusText:""}catch{L=""}l.l=L+" ["+l.ca()+"]",Py(l)}}finally{Wl(l)}}}}function Wl(l,p){if(l.g){l.m&&(clearTimeout(l.m),l.m=null);const y=l.g;l.g=null,p||pt(l,"ready");try{y.onreadystatechange=null}catch{}}}t.isActive=function(){return!!this.g};function zr(l){return l.g?l.g.readyState:0}t.ca=function(){try{return zr(this)>2?this.g.status:-1}catch{return-1}},t.la=function(){try{return this.g?this.g.responseText:""}catch{return""}},t.La=function(l){if(this.g){var p=this.g.responseText;return l&&p.indexOf(l)==0&&(p=p.substring(l.length)),ye(p)}};function jy(l){try{if(!l.g)return null;if("response"in l.g)return l.g.response;switch(l.F){case"":case"text":return l.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in l.g)return l.g.mozResponseArrayBuffer}return null}catch{return null}}function QT(l){const p={};l=(l.g&&zr(l)>=2&&l.g.getAllResponseHeaders()||"").split(`\r
`);for(let T=0;T<l.length;T++){if(C(l[T]))continue;var y=DT(l[T]);const L=y[0];if(y=y[1],typeof y!="string")continue;y=y.trim();const V=p[L]||[];p[L]=V,V.push(y)}N(p,function(T){return T.join(", ")})}t.ya=function(){return this.o},t.Ha=function(){return typeof this.l=="string"?this.l:String(this.l)};function ta(l,p,y){return y&&y.internalChannelParams&&y.internalChannelParams[l]||p}function Oy(l){this.za=0,this.i=[],this.j=new Ho,this.ba=this.na=this.J=this.W=this.g=this.wa=this.G=this.H=this.u=this.U=this.o=null,this.Ya=this.V=0,this.Sa=ta("failFast",!1,l),this.F=this.C=this.v=this.m=this.l=null,this.X=!0,this.xa=this.K=-1,this.Y=this.A=this.D=0,this.Qa=ta("baseRetryDelayMs",5e3,l),this.Za=ta("retryDelaySeedMs",1e4,l),this.Ta=ta("forwardChannelMaxRetries",2,l),this.va=ta("forwardChannelRequestTimeoutMs",2e4,l),this.ma=l&&l.xmlHttpFactory||void 0,this.Ua=l&&l.Rb||void 0,this.Aa=l&&l.useFetchStreams||!1,this.O=void 0,this.L=l&&l.supportsCrossDomainXhr||!1,this.M="",this.h=new yy(l&&l.concurrentRequestLimit),this.Ba=new WT,this.S=l&&l.fastHandshake||!1,this.R=l&&l.encodeInitMessageHeaders||!1,this.S&&this.R&&(this.R=!1),this.Ra=l&&l.Pb||!1,l&&l.ua&&this.j.ua(),l&&l.forceLongPolling&&(this.X=!1),this.aa=!this.S&&this.X&&l&&l.detectBufferingProxy||!1,this.ia=void 0,l&&l.longPollingTimeout&&l.longPollingTimeout>0&&(this.ia=l.longPollingTimeout),this.ta=void 0,this.T=0,this.P=!1,this.ja=this.B=null}t=Oy.prototype,t.ka=8,t.I=1,t.connect=function(l,p,y,T){Lt(0),this.W=l,this.H=p||{},y&&T!==void 0&&(this.H.OSID=y,this.H.OAID=T),this.F=this.X,this.J=qy(this,null,this.W),Kl(this)};function sd(l){if(Ly(l),l.I==3){var p=l.V++,y=Qn(l.J);if(Fe(y,"SID",l.M),Fe(y,"RID",p),Fe(y,"TYPE","terminate"),na(l,y),p=new Vr(l,l.j,p),p.M=2,p.A=ql(Qn(y)),y=!1,o.navigator&&o.navigator.sendBeacon)try{y=o.navigator.sendBeacon(p.A.toString(),"")}catch{}!y&&o.Image&&(new Image().src=p.A,y=!0),y||(p.g=Hy(p.j,null),p.g.ea(p.A)),p.F=Date.now(),$l(p)}$y(l)}function Gl(l){l.g&&(ad(l),l.g.cancel(),l.g=null)}function Ly(l){Gl(l),l.v&&(o.clearTimeout(l.v),l.v=null),Ql(l),l.h.cancel(),l.m&&(typeof l.m=="number"&&o.clearTimeout(l.m),l.m=null)}function Kl(l){if(!wy(l.h)&&!l.m){l.m=!0;var p=l.Ea;M||w(),D||(M(),D=!0),v.add(p,l),l.D=0}}function XT(l,p){return _y(l.h)>=l.h.j-(l.m?1:0)?!1:l.m?(l.i=p.G.concat(l.i),!0):l.I==1||l.I==2||l.D>=(l.Sa?0:l.Ta)?!1:(l.m=qo(c(l.Ea,l,p),By(l,l.D)),l.D++,!0)}t.Ea=function(l){if(this.m)if(this.m=null,this.I==1){if(!l){this.V=Math.floor(Math.random()*1e5),l=this.V++;const L=new Vr(this,this.j,l);let V=this.o;if(this.U&&(V?(V=ue(V),j(V,this.U)):V=this.U),this.u!==null||this.R||(L.J=V,V=null),this.S)e:{for(var p=0,y=0;y<this.i.length;y++){t:{var T=this.i[y];if("__data__"in T.map&&(T=T.map.__data__,typeof T=="string")){T=T.length;break t}T=void 0}if(T===void 0)break;if(p+=T,p>4096){p=y;break e}if(p===4096||y===this.i.length-1){p=y+1;break e}}p=1e3}else p=1e3;p=Vy(this,L,p),y=Qn(this.J),Fe(y,"RID",l),Fe(y,"CVER",22),this.G&&Fe(y,"X-HTTP-Session-Id",this.G),na(this,y),V&&(this.R?p="headers="+Wo(Ny(V))+"&"+p:this.u&&id(y,this.u,V)),td(this.h,L),this.Ra&&Fe(y,"TYPE","init"),this.S?(Fe(y,"$req",p),Fe(y,"SID","null"),L.U=!0,Yh(L,y,null)):Yh(L,y,p),this.I=2}}else this.I==3&&(l?My(this,l):this.i.length==0||wy(this.h)||My(this))};function My(l,p){var y;p?y=p.l:y=l.V++;const T=Qn(l.J);Fe(T,"SID",l.M),Fe(T,"RID",y),Fe(T,"AID",l.K),na(l,T),l.u&&l.o&&id(T,l.u,l.o),y=new Vr(l,l.j,y,l.D+1),l.u===null&&(y.J=l.o),p&&(l.i=p.G.concat(l.i)),p=Vy(l,y,1e3),y.H=Math.round(l.va*.5)+Math.round(l.va*.5*Math.random()),td(l.h,y),Yh(y,T,p)}function na(l,p){l.H&&Y(l.H,function(y,T){Fe(p,T,y)}),l.l&&Y({},function(y,T){Fe(p,T,y)})}function Vy(l,p,y){y=Math.min(l.i.length,y);const T=l.l?c(l.l.Ka,l.l,l):null;e:{var L=l.i;let ge=-1;for(;;){const lt=["count="+y];ge==-1?y>0?(ge=L[0].g,lt.push("ofs="+ge)):ge=0:lt.push("ofs="+ge);let Re=!0;for(let mt=0;mt<y;mt++){var V=L[mt].g;const Xn=L[mt].map;if(V-=ge,V<0)ge=Math.max(0,L[mt].g-100),Re=!1;else try{V="req"+V+"_"||"";try{var Q=Xn instanceof Map?Xn:Object.entries(Xn);for(const[zi,Br]of Q){let $r=Br;a(Br)&&($r=ce(Br)),lt.push(V+zi+"="+encodeURIComponent($r))}}catch(zi){throw lt.push(V+"type="+encodeURIComponent("_badmap")),zi}}catch{T&&T(Xn)}}if(Re){Q=lt.join("&");break e}}Q=void 0}return l=l.i.splice(0,y),p.G=l,Q}function Fy(l){if(!l.g&&!l.v){l.Y=1;var p=l.Da;M||w(),D||(M(),D=!0),v.add(p,l),l.A=0}}function od(l){return l.g||l.v||l.A>=3?!1:(l.Y++,l.v=qo(c(l.Da,l),By(l,l.A)),l.A++,!0)}t.Da=function(){if(this.v=null,Uy(this),this.aa&&!(this.P||this.g==null||this.T<=0)){var l=4*this.T;this.j.info("BP detection timer enabled: "+l),this.B=qo(c(this.Wa,this),l)}},t.Wa=function(){this.B&&(this.B=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.P=!0,Lt(10),Gl(this),Uy(this))};function ad(l){l.B!=null&&(o.clearTimeout(l.B),l.B=null)}function Uy(l){l.g=new Vr(l,l.j,"rpc",l.Y),l.u===null&&(l.g.J=l.o),l.g.P=0;var p=Qn(l.na);Fe(p,"RID","rpc"),Fe(p,"SID",l.M),Fe(p,"AID",l.K),Fe(p,"CI",l.F?"0":"1"),!l.F&&l.ia&&Fe(p,"TO",l.ia),Fe(p,"TYPE","xmlhttp"),na(l,p),l.u&&l.o&&id(p,l.u,l.o),l.O&&(l.g.H=l.O);var y=l.g;l=l.ba,y.M=1,y.A=ql(Qn(p)),y.u=null,y.R=!0,py(y,l)}t.Va=function(){this.C!=null&&(this.C=null,Gl(this),od(this),Lt(19))};function Ql(l){l.C!=null&&(o.clearTimeout(l.C),l.C=null)}function zy(l,p){var y=null;if(l.g==p){Ql(l),ad(l),l.g=null;var T=2}else if(ed(l.h,p))y=p.G,vy(l.h,p),T=1;else return;if(l.I!=0){if(p.o)if(T==1){y=p.u?p.u.length:0,p=Date.now()-p.F;var L=l.D;T=Ht(),pt(T,new uy(T,y)),Kl(l)}else Fy(l);else if(L=p.m,L==3||L==0&&p.X>0||!(T==1&&XT(l,p)||T==2&&od(l)))switch(y&&y.length>0&&(p=l.h,p.i=p.i.concat(y)),L){case 1:Ui(l,5);break;case 4:Ui(l,10);break;case 3:Ui(l,6);break;default:Ui(l,2)}}}function By(l,p){let y=l.Qa+Math.floor(Math.random()*l.Za);return l.isActive()||(y*=2),y*p}function Ui(l,p){if(l.j.info("Error code "+p),p==2){var y=c(l.bb,l),T=l.Ua;const L=!T;T=new Fr(T||"//www.google.com/images/cleardot.gif"),o.location&&o.location.protocol=="http"||Ko(T,"https"),ql(T),L?qT(T.toString(),y):HT(T.toString(),y)}else Lt(2);l.I=0,l.l&&l.l.pa(p),$y(l),Ly(l)}t.bb=function(l){l?(this.j.info("Successfully pinged google.com"),Lt(2)):(this.j.info("Failed to ping google.com"),Lt(1))};function $y(l){if(l.I=0,l.ja=[],l.l){const p=xy(l.h);(p.length!=0||l.i.length!=0)&&(_(l.ja,p),_(l.ja,l.i),l.h.i.length=0,g(l.i),l.i.length=0),l.l.oa()}}function qy(l,p,y){var T=y instanceof Fr?Qn(y):new Fr(y);if(T.g!="")p&&(T.g=p+"."+T.g),Qo(T,T.u);else{var L=o.location;T=L.protocol,p=p?p+"."+L.hostname:L.hostname,L=+L.port;const V=new Fr(null);T&&Ko(V,T),p&&(V.g=p),L&&Qo(V,L),y&&(V.h=y),T=V}return y=l.G,p=l.wa,y&&p&&Fe(T,y,p),Fe(T,"VER",l.ka),na(l,T),T}function Hy(l,p,y){if(p&&!l.L)throw Error("Can't create secondary domain capable XhrIo object.");return p=l.Aa&&!l.ma?new Ke(new rd({ab:y})):new Ke(l.ma),p.Fa(l.L),p}t.isActive=function(){return!!this.l&&this.l.isActive(this)};function Wy(){}t=Wy.prototype,t.ra=function(){},t.qa=function(){},t.pa=function(){},t.oa=function(){},t.isActive=function(){return!0},t.Ka=function(){};function Xl(){}Xl.prototype.g=function(l,p){return new sn(l,p)};function sn(l,p){at.call(this),this.g=new Oy(p),this.l=l,this.h=p&&p.messageUrlParams||null,l=p&&p.messageHeaders||null,p&&p.clientProtocolHeaderRequired&&(l?l["X-Client-Protocol"]="webchannel":l={"X-Client-Protocol":"webchannel"}),this.g.o=l,l=p&&p.initMessageHeaders||null,p&&p.messageContentType&&(l?l["X-WebChannel-Content-Type"]=p.messageContentType:l={"X-WebChannel-Content-Type":p.messageContentType}),p&&p.sa&&(l?l["X-WebChannel-Client-Profile"]=p.sa:l={"X-WebChannel-Client-Profile":p.sa}),this.g.U=l,(l=p&&p.Qb)&&!C(l)&&(this.g.u=l),this.A=p&&p.supportsCrossDomainXhr||!1,this.v=p&&p.sendRawJson||!1,(p=p&&p.httpSessionIdParam)&&!C(p)&&(this.g.G=p,l=this.h,l!==null&&p in l&&(l=this.h,p in l&&delete l[p])),this.j=new Ns(this)}f(sn,at),sn.prototype.m=function(){this.g.l=this.j,this.A&&(this.g.L=!0),this.g.connect(this.l,this.h||void 0)},sn.prototype.close=function(){sd(this.g)},sn.prototype.o=function(l){var p=this.g;if(typeof l=="string"){var y={};y.__data__=l,l=y}else this.v&&(y={},y.__data__=ce(l),l=y);p.i.push(new LT(p.Ya++,l)),p.I==3&&Kl(p)},sn.prototype.N=function(){this.g.l=null,delete this.j,sd(this.g),delete this.g,sn.Z.N.call(this)};function Gy(l){pr.call(this),l.__headers__&&(this.headers=l.__headers__,this.statusCode=l.__status__,delete l.__headers__,delete l.__status__);var p=l.__sm__;if(p){e:{for(const y in p){l=y;break e}l=void 0}(this.i=l)&&(l=this.i,p=p!==null&&l in p?p[l]:void 0),this.data=p}else this.data=l}f(Gy,pr);function Ky(){mr.call(this),this.status=1}f(Ky,mr);function Ns(l){this.g=l}f(Ns,Wy),Ns.prototype.ra=function(){pt(this.g,"a")},Ns.prototype.qa=function(l){pt(this.g,new Gy(l))},Ns.prototype.pa=function(l){pt(this.g,new Ky)},Ns.prototype.oa=function(){pt(this.g,"b")},Xl.prototype.createWebChannel=Xl.prototype.g,sn.prototype.send=sn.prototype.o,sn.prototype.open=sn.prototype.m,sn.prototype.close=sn.prototype.close,GE=function(){return new Xl},WE=function(){return Ht()},HE=Ze,cp={jb:0,mb:1,nb:2,Hb:3,Mb:4,Jb:5,Kb:6,Ib:7,Gb:8,Lb:9,PROXY:10,NOPROXY:11,Eb:12,Ab:13,Bb:14,zb:15,Cb:16,Db:17,fb:18,eb:19,gb:20},Bl.NO_ERROR=0,Bl.TIMEOUT=8,Bl.HTTP_ERROR=6,qu=Bl,cy.COMPLETE="complete",qE=cy,Kn.EventType=Ot,Ot.OPEN="a",Ot.CLOSE="b",Ot.ERROR="c",Ot.MESSAGE="d",at.prototype.listen=at.prototype.J,xa=Kn,Ke.prototype.listenOnce=Ke.prototype.K,Ke.prototype.getLastError=Ke.prototype.Ha,Ke.prototype.getLastErrorCode=Ke.prototype.ya,Ke.prototype.getStatus=Ke.prototype.ca,Ke.prototype.getResponseJson=Ke.prototype.La,Ke.prototype.getResponseText=Ke.prototype.la,Ke.prototype.send=Ke.prototype.ea,Ke.prototype.setWithCredentials=Ke.prototype.Fa,$E=Ke}).apply(typeof gu<"u"?gu:typeof self<"u"?self:typeof window<"u"?window:{});const F_="@firebase/firestore",U_="4.9.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}At.UNAUTHENTICATED=new At(null),At.GOOGLE_CREDENTIALS=new At("google-credentials-uid"),At.FIRST_PARTY=new At("first-party-uid"),At.MOCK_USER=new At("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Do="12.7.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cs=new Fm("@firebase/firestore");function Ds(){return cs.logLevel}function J(t,...e){if(cs.logLevel<=_e.DEBUG){const n=e.map(Jm);cs.debug(`Firestore (${Do}): ${t}`,...n)}}function Or(t,...e){if(cs.logLevel<=_e.ERROR){const n=e.map(Jm);cs.error(`Firestore (${Do}): ${t}`,...n)}}function hs(t,...e){if(cs.logLevel<=_e.WARN){const n=e.map(Jm);cs.warn(`Firestore (${Do}): ${t}`,...n)}}function Jm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ae(t,e,n){let r="Unexpected state";typeof e=="string"?r=e:n=e,KE(t,r,n)}function KE(t,e,n){let r=`FIRESTORE (${Do}) INTERNAL ASSERTION FAILED: ${e} (ID: ${t.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw Or(r),new Error(r)}function Ae(t,e,n,r){let i="Unexpected state";typeof n=="string"?i=n:r=n,t||KE(e,i,r)}function fe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const U={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends dr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QE{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class XE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(At.UNAUTHENTICATED))}shutdown(){}}class t2{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class n2{constructor(e){this.t=e,this.currentUser=At.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){Ae(this.o===void 0,42304);let r=this.i;const i=u=>this.i!==r?(r=this.i,n(u)):Promise.resolve();let s=new Tr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Tr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const u=s;e.enqueueRetryable(async()=>{await u.promise,await i(this.currentUser)})},a=u=>{J("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=u,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(u=>a(u)),setTimeout(()=>{if(!this.auth){const u=this.t.getImmediate({optional:!0});u?a(u):(J("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Tr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(J("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string",31837,{l:r}),new QE(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string",2055,{h:e}),new At(e)}}class r2{constructor(e,n,r){this.P=e,this.T=n,this.I=r,this.type="FirstParty",this.user=At.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const e=this.R();return e&&this.A.set("Authorization",e),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class i2{constructor(e,n,r){this.P=e,this.T=n,this.I=r}getToken(){return Promise.resolve(new r2(this.P,this.T,this.I))}start(e,n){e.enqueueRetryable(()=>n(At.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class z_{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class s2{constructor(e,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,ln(e)&&e.settings.appCheckToken&&(this.p=e.settings.appCheckToken)}start(e,n){Ae(this.o===void 0,3512);const r=s=>{s.error!=null&&J("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.m;return this.m=s.token,J("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{J("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.V.getImmediate({optional:!0});s?i(s):J("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new z_(this.p));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new z_(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function o2(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const i=o2(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%62))}return r}}function ve(t,e){return t<e?-1:t>e?1:0}function hp(t,e){const n=Math.min(t.length,e.length);for(let r=0;r<n;r++){const i=t.charAt(r),s=e.charAt(r);if(i!==s)return Bd(i)===Bd(s)?ve(i,s):Bd(i)?1:-1}return ve(t.length,e.length)}const a2=55296,l2=57343;function Bd(t){const e=t.charCodeAt(0);return e>=a2&&e<=l2}function _o(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B_="__name__";class er{constructor(e,n,r){n===void 0?n=0:n>e.length&&ae(637,{offset:n,range:e.length}),r===void 0?r=e.length-n:r>e.length-n&&ae(1746,{length:r,range:e.length-n}),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return er.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof er?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=er.compareSegments(e.get(i),n.get(i));if(s!==0)return s}return ve(e.length,n.length)}static compareSegments(e,n){const r=er.isNumericId(e),i=er.isNumericId(n);return r&&!i?-1:!r&&i?1:r&&i?er.extractNumericId(e).compare(er.extractNumericId(n)):hp(e,n)}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return gi.fromString(e.substring(4,e.length-2))}}class Pe extends er{construct(e,n,r){return new Pe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(U.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Pe(n)}static emptyPath(){return new Pe([])}}const u2=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class wt extends er{construct(e,n,r){return new wt(e,n,r)}static isValidIdentifier(e){return u2.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),wt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===B_}static keyField(){return new wt([B_])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const a=e[i];if(a==="\\"){if(i+1===e.length)throw new G(U.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const u=e[i+1];if(u!=="\\"&&u!=="."&&u!=="`")throw new G(U.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=u,i+=2}else a==="`"?(o=!o,i++):a!=="."||o?(r+=a,i++):(s(),i++)}if(s(),o)throw new G(U.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new wt(n)}static emptyPath(){return new wt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.path=e}static fromPath(e){return new ee(Pe.fromString(e))}static fromName(e){return new ee(Pe.fromString(e).popFirst(5))}static empty(){return new ee(Pe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Pe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Pe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new ee(new Pe(e.slice()))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function YE(t,e,n){if(!n)throw new G(U.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function JE(t,e,n,r){if(e===!0&&r===!0)throw new G(U.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function $_(t){if(!ee.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function q_(t){if(ee.isDocumentKey(t))throw new G(U.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${t} has ${t.length}.`)}function ZE(t){return typeof t=="object"&&t!==null&&(Object.getPrototypeOf(t)===Object.prototype||Object.getPrototypeOf(t)===null)}function gh(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ae(12329,{type:typeof t})}function Rt(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(U.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=gh(t);throw new G(U.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}function c2(t,e){if(e<=0)throw new G(U.INVALID_ARGUMENT,`Function ${t}() requires a positive number, but it was: ${e}.`)}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(t,e){const n={typeString:t};return e&&(n.value=e),n}function Cl(t,e){if(!ZE(t))throw new G(U.INVALID_ARGUMENT,"JSON must be an object");let n;for(const r in e)if(e[r]){const i=e[r].typeString,s="value"in e[r]?{value:e[r].value}:void 0;if(!(r in t)){n=`JSON missing required field: '${r}'`;break}const o=t[r];if(i&&typeof o!==i){n=`JSON field '${r}' must be a ${i}.`;break}if(s!==void 0&&o!==s.value){n=`Expected '${r}' field to equal '${s.value}'`;break}}if(n)throw new G(U.INVALID_ARGUMENT,n);return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const H_=-62135596800,W_=1e6;class Oe{static now(){return Oe.fromMillis(Date.now())}static fromDate(e){return Oe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor((e-1e3*n)*W_);return new Oe(n,r)}constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(U.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<H_)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(U.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/W_}_compareTo(e){return this.seconds===e.seconds?ve(this.nanoseconds,e.nanoseconds):ve(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{type:Oe._jsonSchemaVersion,seconds:this.seconds,nanoseconds:this.nanoseconds}}static fromJSON(e){if(Cl(e,Oe._jsonSchema))return new Oe(e.seconds,e.nanoseconds)}valueOf(){const e=this.seconds-H_;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}Oe._jsonSchemaVersion="firestore/timestamp/1.0",Oe._jsonSchema={type:ot("string",Oe._jsonSchemaVersion),seconds:ot("number"),nanoseconds:ot("number")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class de{static fromTimestamp(e){return new de(e)}static min(){return new de(new Oe(0,0))}static max(){return new de(new Oe(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hl=-1;function h2(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=de.fromTimestamp(r===1e9?new Oe(n+1,0):new Oe(n,r));return new Ei(i,ee.empty(),e)}function d2(t){return new Ei(t.readTime,t.key,hl)}class Ei{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ei(de.min(),ee.empty(),hl)}static max(){return new Ei(de.max(),ee.empty(),hl)}}function f2(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=ee.comparator(t.documentKey,e.documentKey),n!==0?n:ve(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class m2{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jo(t){if(t.code!==U.FAILED_PRECONDITION||t.message!==p2)throw t;J("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ${constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ae(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new $((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof $?n:$.resolve(n)}catch(n){return $.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):$.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):$.reject(n)}static resolve(e){return new $((n,r)=>{n(e)})}static reject(e){return new $((n,r)=>{r(e)})}static waitFor(e){return new $((n,r)=>{let i=0,s=0,o=!1;e.forEach(a=>{++i,a.next(()=>{++s,o&&s===i&&n()},u=>r(u))}),o=!0,s===i&&n()})}static or(e){let n=$.resolve(!1);for(const r of e)n=n.next(i=>i?$.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new $((r,i)=>{const s=e.length,o=new Array(s);let a=0;for(let u=0;u<s;u++){const c=u;n(e[c]).next(d=>{o[c]=d,++a,a===s&&r(o)},d=>i(d))}})}static doWhile(e,n){return new $((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function g2(t){const e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Oo(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yh{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.ae(r),this.ue=r=>n.writeSequenceNumber(r))}ae(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.ue&&this.ue(e),e}}yh.ce=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zm=-1;function wh(t){return t==null}function Rc(t){return t===0&&1/t==-1/0}function y2(t){return typeof t=="number"&&Number.isInteger(t)&&!Rc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ek="";function w2(t){let e="";for(let n=0;n<t.length;n++)e.length>0&&(e=G_(e)),e=_2(t.get(n),e);return G_(e)}function _2(t,e){let n=e;const r=t.length;for(let i=0;i<r;i++){const s=t.charAt(i);switch(s){case"\0":n+="";break;case ek:n+="";break;default:n+=s}}return n}function G_(t){return t+ek+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K_(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Di(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function tk(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ge{constructor(e,n){this.comparator=e,this.root=n||Et.EMPTY}insert(e,n){return new Ge(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Et.BLACK,null,null))}remove(e){return new Ge(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Et.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yu(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yu(this.root,e,this.comparator,!1)}getReverseIterator(){return new yu(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yu(this.root,e,this.comparator,!0)}}class yu{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Et{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??Et.RED,this.left=i??Et.EMPTY,this.right=s??Et.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new Et(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Et.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Et.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Et.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Et.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ae(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ae(14113,{key:this.key,value:this.value});const e=this.left.check();if(e!==this.right.check())throw ae(27949);return e+(this.isRed()?0:1)}}Et.EMPTY=null,Et.RED=!0,Et.BLACK=!1;Et.EMPTY=new class{constructor(){this.size=0}get key(){throw ae(57766)}get value(){throw ae(16141)}get color(){throw ae(16727)}get left(){throw ae(29726)}get right(){throw ae(36894)}copy(e,n,r,i,s){return this}insert(e,n,r){return new Et(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ht{constructor(e){this.comparator=e,this.data=new Ge(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new Q_(this.data.getIterator())}getIteratorFrom(e){return new Q_(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof ht)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new ht(this.comparator);return n.data=e,n}}class Q_{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hn{constructor(e){this.fields=e,e.sort(wt.comparator)}static empty(){return new hn([])}unionWith(e){let n=new ht(wt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new hn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return _o(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nk extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vt{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nk("Invalid base64 string: "+s):s}}(e);return new vt(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new vt(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ve(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}vt.EMPTY_BYTE_STRING=new vt("");const v2=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function ki(t){if(Ae(!!t,39018),typeof t=="string"){let e=0;const n=v2.exec(t);if(Ae(!!n,46558,{timestamp:t}),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:et(t.seconds),nanos:et(t.nanos)}}function et(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function Ii(t){return typeof t=="string"?vt.fromBase64String(t):vt.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rk="server_timestamp",ik="__type__",sk="__previous_value__",ok="__local_write_time__";function _h(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ik])==null?void 0:r.stringValue)===rk}function vh(t){const e=t.mapValue.fields[sk];return _h(e)?vh(e):e}function dl(t){const e=ki(t.mapValue.fields[ok].timestampValue);return new Oe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x2{constructor(e,n,r,i,s,o,a,u,c,d){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=u,this.useFetchStreams=c,this.isUsingEmulator=d}}const Pc="(default)";class vo{constructor(e,n){this.projectId=e,this.database=n||Pc}static empty(){return new vo("","")}get isDefaultDatabase(){return this.database===Pc}isEqual(e){return e instanceof vo&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ak="__type__",E2="__max__",wu={mapValue:{}},lk="__vector__",Dc="value";function Ti(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?_h(t)?4:I2(t)?9007199254740991:k2(t)?10:11:ae(28295,{value:t})}function cr(t,e){if(t===e)return!0;const n=Ti(t);if(n!==Ti(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return dl(t).isEqual(dl(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=ki(i.timestampValue),a=ki(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return Ii(i.bytesValue).isEqual(Ii(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return et(i.geoPointValue.latitude)===et(s.geoPointValue.latitude)&&et(i.geoPointValue.longitude)===et(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return et(i.integerValue)===et(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=et(i.doubleValue),a=et(s.doubleValue);return o===a?Rc(o)===Rc(a):isNaN(o)&&isNaN(a)}return!1}(t,e);case 9:return _o(t.arrayValue.values||[],e.arrayValue.values||[],cr);case 10:case 11:return function(i,s){const o=i.mapValue.fields||{},a=s.mapValue.fields||{};if(K_(o)!==K_(a))return!1;for(const u in o)if(o.hasOwnProperty(u)&&(a[u]===void 0||!cr(o[u],a[u])))return!1;return!0}(t,e);default:return ae(52216,{left:t})}}function fl(t,e){return(t.values||[]).find(n=>cr(n,e))!==void 0}function xo(t,e){if(t===e)return 0;const n=Ti(t),r=Ti(e);if(n!==r)return ve(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ve(t.booleanValue,e.booleanValue);case 2:return function(s,o){const a=et(s.integerValue||s.doubleValue),u=et(o.integerValue||o.doubleValue);return a<u?-1:a>u?1:a===u?0:isNaN(a)?isNaN(u)?0:-1:1}(t,e);case 3:return X_(t.timestampValue,e.timestampValue);case 4:return X_(dl(t),dl(e));case 5:return hp(t.stringValue,e.stringValue);case 6:return function(s,o){const a=Ii(s),u=Ii(o);return a.compareTo(u)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),u=o.split("/");for(let c=0;c<a.length&&c<u.length;c++){const d=ve(a[c],u[c]);if(d!==0)return d}return ve(a.length,u.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const a=ve(et(s.latitude),et(o.latitude));return a!==0?a:ve(et(s.longitude),et(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return Y_(t.arrayValue,e.arrayValue);case 10:return function(s,o){var m,g,_,b;const a=s.fields||{},u=o.fields||{},c=(m=a[Dc])==null?void 0:m.arrayValue,d=(g=u[Dc])==null?void 0:g.arrayValue,f=ve(((_=c==null?void 0:c.values)==null?void 0:_.length)||0,((b=d==null?void 0:d.values)==null?void 0:b.length)||0);return f!==0?f:Y_(c,d)}(t.mapValue,e.mapValue);case 11:return function(s,o){if(s===wu.mapValue&&o===wu.mapValue)return 0;if(s===wu.mapValue)return 1;if(o===wu.mapValue)return-1;const a=s.fields||{},u=Object.keys(a),c=o.fields||{},d=Object.keys(c);u.sort(),d.sort();for(let f=0;f<u.length&&f<d.length;++f){const m=hp(u[f],d[f]);if(m!==0)return m;const g=xo(a[u[f]],c[d[f]]);if(g!==0)return g}return ve(u.length,d.length)}(t.mapValue,e.mapValue);default:throw ae(23264,{he:n})}}function X_(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ve(t,e);const n=ki(t),r=ki(e),i=ve(n.seconds,r.seconds);return i!==0?i:ve(n.nanos,r.nanos)}function Y_(t,e){const n=t.values||[],r=e.values||[];for(let i=0;i<n.length&&i<r.length;++i){const s=xo(n[i],r[i]);if(s)return s}return ve(n.length,r.length)}function Eo(t){return dp(t)}function dp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=ki(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return Ii(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return ee.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=dp(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${dp(n.fields[o])}`;return i+"}"}(t.mapValue):ae(61005,{value:t})}function Hu(t){switch(Ti(t)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=vh(t);return e?16+Hu(e):16;case 5:return 2*t.stringValue.length;case 6:return Ii(t.bytesValue).approximateByteSize();case 7:return t.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((i,s)=>i+Hu(s),0)}(t.arrayValue);case 10:case 11:return function(r){let i=0;return Di(r.fields,(s,o)=>{i+=s.length+Hu(o)}),i}(t.mapValue);default:throw ae(13486,{value:t})}}function jc(t,e){return{referenceValue:`projects/${t.projectId}/databases/${t.database}/documents/${e.path.canonicalString()}`}}function fp(t){return!!t&&"integerValue"in t}function eg(t){return!!t&&"arrayValue"in t}function J_(t){return!!t&&"nullValue"in t}function Z_(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Wu(t){return!!t&&"mapValue"in t}function k2(t){var n,r;return((r=(((n=t==null?void 0:t.mapValue)==null?void 0:n.fields)||{})[ak])==null?void 0:r.stringValue)===lk}function La(t){if(t.geoPointValue)return{geoPointValue:{...t.geoPointValue}};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:{...t.timestampValue}};if(t.mapValue){const e={mapValue:{fields:{}}};return Di(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=La(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=La(t.arrayValue.values[n]);return e}return{...t}}function I2(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue===E2}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{constructor(e){this.value=e}static empty(){return new Xt({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!Wu(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=La(n)}setAll(e){let n=wt.emptyPath(),r={},i=[];e.forEach((o,a)=>{if(!n.isImmediateParentOf(a)){const u=this.getFieldsMap(n);this.applyChanges(u,r,i),r={},i=[],n=a.popLast()}o?r[a.lastSegment()]=La(o):i.push(a.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());Wu(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return cr(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];Wu(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Di(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new Xt(La(this.value))}}function uk(t){const e=[];return Di(t.fields,(n,r)=>{const i=new wt([n]);if(Wu(r)){const s=uk(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new hn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nt{constructor(e,n,r,i,s,o,a){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Nt(e,0,de.min(),de.min(),de.min(),Xt.empty(),0)}static newFoundDocument(e,n,r,i){return new Nt(e,1,n,de.min(),r,i,0)}static newNoDocument(e,n){return new Nt(e,2,n,de.min(),de.min(),Xt.empty(),0)}static newUnknownDocument(e,n){return new Nt(e,3,n,de.min(),de.min(),Xt.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(de.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Xt.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Xt.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=de.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Nt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Nt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n){this.position=e,this.inclusive=n}}function ev(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=ee.comparator(ee.fromName(o.referenceValue),n.key):r=xo(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function tv(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!cr(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(e,n="asc"){this.field=e,this.dir=n}}function T2(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ck{}class st extends ck{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new S2(e,n,r):n==="array-contains"?new N2(e,r):n==="in"?new R2(e,r):n==="not-in"?new P2(e,r):n==="array-contains-any"?new D2(e,r):new st(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new A2(e,r):new C2(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(xo(n,this.value)):n!==null&&Ti(this.value)===Ti(n)&&this.matchesComparison(xo(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ae(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class $n extends ck{constructor(e,n){super(),this.filters=e,this.op=n,this.Pe=null}static create(e,n){return new $n(e,n)}matches(e){return hk(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.Pe!==null||(this.Pe=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.Pe}getFilters(){return Object.assign([],this.filters)}}function hk(t){return t.op==="and"}function dk(t){return b2(t)&&hk(t)}function b2(t){for(const e of t.filters)if(e instanceof $n)return!1;return!0}function pp(t){if(t instanceof st)return t.field.canonicalString()+t.op.toString()+Eo(t.value);if(dk(t))return t.filters.map(e=>pp(e)).join(",");{const e=t.filters.map(n=>pp(n)).join(",");return`${t.op}(${e})`}}function fk(t,e){return t instanceof st?function(r,i){return i instanceof st&&r.op===i.op&&r.field.isEqual(i.field)&&cr(r.value,i.value)}(t,e):t instanceof $n?function(r,i){return i instanceof $n&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,a)=>s&&fk(o,i.filters[a]),!0):!1}(t,e):void ae(19439)}function pk(t){return t instanceof st?function(n){return`${n.field.canonicalString()} ${n.op} ${Eo(n.value)}`}(t):t instanceof $n?function(n){return n.op.toString()+" {"+n.getFilters().map(pk).join(" ,")+"}"}(t):"Filter"}class S2 extends st{constructor(e,n,r){super(e,n,r),this.key=ee.fromName(r.referenceValue)}matches(e){const n=ee.comparator(e.key,this.key);return this.matchesComparison(n)}}class A2 extends st{constructor(e,n){super(e,"in",n),this.keys=mk("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class C2 extends st{constructor(e,n){super(e,"not-in",n),this.keys=mk("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function mk(t,e){var n;return(((n=e.arrayValue)==null?void 0:n.values)||[]).map(r=>ee.fromName(r.referenceValue))}class N2 extends st{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return eg(n)&&fl(n.arrayValue,this.value)}}class R2 extends st{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&fl(this.value.arrayValue,n)}}class P2 extends st{constructor(e,n){super(e,"not-in",n)}matches(e){if(fl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&n.nullValue===void 0&&!fl(this.value.arrayValue,n)}}class D2 extends st{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!eg(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>fl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j2{constructor(e,n=null,r=[],i=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=a,this.Te=null}}function nv(t,e=null,n=[],r=[],i=null,s=null,o=null){return new j2(t,e,n,r,i,s,o)}function tg(t){const e=fe(t);if(e.Te===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>pp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),wh(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Eo(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Eo(r)).join(",")),e.Te=n}return e.Te}function ng(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!T2(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!fk(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!tv(t.startAt,e.startAt)&&tv(t.endAt,e.endAt)}function mp(t){return ee.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e,n=null,r=[],i=[],s=null,o="F",a=null,u=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=u,this.Ie=null,this.Ee=null,this.de=null,this.startAt,this.endAt}}function O2(t,e,n,r,i,s,o,a){return new xs(t,e,n,r,i,s,o,a)}function xh(t){return new xs(t)}function rv(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function rg(t){return t.collectionGroup!==null}function so(t){const e=fe(t);if(e.Ie===null){e.Ie=[];const n=new Set;for(const s of e.explicitOrderBy)e.Ie.push(s),n.add(s.field.canonicalString());const r=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new ht(wt.comparator);return o.filters.forEach(u=>{u.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{n.has(s.canonicalString())||s.isKeyField()||e.Ie.push(new pl(s,r))}),n.has(wt.keyField().canonicalString())||e.Ie.push(new pl(wt.keyField(),r))}return e.Ie}function lr(t){const e=fe(t);return e.Ee||(e.Ee=L2(e,so(t))),e.Ee}function L2(t,e){if(t.limitType==="F")return nv(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new pl(i.field,s)});const n=t.endAt?new ko(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new ko(t.startAt.position,t.startAt.inclusive):null;return nv(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function gp(t,e){const n=t.filters.concat([e]);return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}function Oc(t,e,n){return new xs(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Eh(t,e){return ng(lr(t),lr(e))&&t.limitType===e.limitType}function gk(t){return`${tg(lr(t))}|lt:${t.limitType}`}function js(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>pk(i)).join(", ")}]`),wh(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Eo(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Eo(i)).join(",")),`Target(${r})`}(lr(t))}; limitType=${t.limitType})`}function kh(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):ee.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of so(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,a,u){const c=ev(o,a,u);return o.inclusive?c<=0:c<0}(r.startAt,so(r),i)||r.endAt&&!function(o,a,u){const c=ev(o,a,u);return o.inclusive?c>=0:c>0}(r.endAt,so(r),i))}(t,e)}function M2(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function yk(t){return(e,n)=>{let r=!1;for(const i of so(t)){const s=V2(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function V2(t,e,n){const r=t.field.isKeyField()?ee.comparator(e.key,n.key):function(s,o,a){const u=o.data.field(s),c=a.data.field(s);return u!==null&&c!==null?xo(u,c):ae(42886)}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ae(19790,{direction:t.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Es{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Di(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return tk(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F2=new Ge(ee.comparator);function Lr(){return F2}const wk=new Ge(ee.comparator);function Ea(...t){let e=wk;for(const n of t)e=e.insert(n.key,n);return e}function _k(t){let e=wk;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Yi(){return Ma()}function vk(){return Ma()}function Ma(){return new Es(t=>t.toString(),(t,e)=>t.isEqual(e))}const U2=new Ge(ee.comparator),z2=new ht(ee.comparator);function xe(...t){let e=z2;for(const n of t)e=e.add(n);return e}const B2=new ht(ve);function $2(){return B2}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ig(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Rc(e)?"-0":e}}function xk(t){return{integerValue:""+t}}function Ek(t,e){return y2(e)?xk(e):ig(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ih{constructor(){this._=void 0}}function q2(t,e,n){return t instanceof ml?function(i,s){const o={fields:{[ik]:{stringValue:rk},[ok]:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&_h(s)&&(s=vh(s)),s&&(o.fields[sk]=s),{mapValue:o}}(n,e):t instanceof Io?Ik(t,e):t instanceof To?Tk(t,e):function(i,s){const o=kk(i,s),a=iv(o)+iv(i.Ae);return fp(o)&&fp(i.Ae)?xk(a):ig(i.serializer,a)}(t,e)}function H2(t,e,n){return t instanceof Io?Ik(t,e):t instanceof To?Tk(t,e):n}function kk(t,e){return t instanceof gl?function(r){return fp(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class ml extends Ih{}class Io extends Ih{constructor(e){super(),this.elements=e}}function Ik(t,e){const n=bk(e);for(const r of t.elements)n.some(i=>cr(i,r))||n.push(r);return{arrayValue:{values:n}}}class To extends Ih{constructor(e){super(),this.elements=e}}function Tk(t,e){let n=bk(e);for(const r of t.elements)n=n.filter(i=>!cr(i,r));return{arrayValue:{values:n}}}class gl extends Ih{constructor(e,n){super(),this.serializer=e,this.Ae=n}}function iv(t){return et(t.integerValue||t.doubleValue)}function bk(t){return eg(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Th{constructor(e,n){this.field=e,this.transform=n}}function W2(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof Io&&i instanceof Io||r instanceof To&&i instanceof To?_o(r.elements,i.elements,cr):r instanceof gl&&i instanceof gl?cr(r.Ae,i.Ae):r instanceof ml&&i instanceof ml}(t.transform,e.transform)}class G2{constructor(e,n){this.version=e,this.transformResults=n}}class Ut{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Ut}static exists(e){return new Ut(void 0,e)}static updateTime(e){return new Ut(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Gu(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class bh{}function Sk(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new Sh(t.key,Ut.none()):new Nl(t.key,t.data,Ut.none());{const n=t.data,r=Xt.empty();let i=new ht(wt.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new ji(t.key,r,new hn(i.toArray()),Ut.none())}}function K2(t,e,n){t instanceof Nl?function(i,s,o){const a=i.value.clone(),u=ov(i.fieldTransforms,s,o.transformResults);a.setAll(u),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):t instanceof ji?function(i,s,o){if(!Gu(i.precondition,s))return void s.convertToUnknownDocument(o.version);const a=ov(i.fieldTransforms,s,o.transformResults),u=s.data;u.setAll(Ak(i)),u.setAll(a),s.convertToFoundDocument(o.version,u).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Va(t,e,n,r){return t instanceof Nl?function(s,o,a,u){if(!Gu(s.precondition,o))return a;const c=s.value.clone(),d=av(s.fieldTransforms,u,o);return c.setAll(d),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof ji?function(s,o,a,u){if(!Gu(s.precondition,o))return a;const c=av(s.fieldTransforms,u,o),d=o.data;return d.setAll(Ak(s)),d.setAll(c),o.convertToFoundDocument(o.version,d).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(t,e,n,r):function(s,o,a){return Gu(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(t,e,n)}function Q2(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=kk(r.transform,i||null);s!=null&&(n===null&&(n=Xt.empty()),n.set(r.field,s))}return n||null}function sv(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&_o(r,i,(s,o)=>W2(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Nl extends bh{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class ji extends bh{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Ak(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function ov(t,e,n){const r=new Map;Ae(t.length===n.length,32656,{Re:n.length,Ve:t.length});for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,a=e.data.field(s.field);r.set(s.field,H2(o,a,n[i]))}return r}function av(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,q2(s,o,e))}return r}class Sh extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class X2 extends bh{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y2{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&K2(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Va(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=vk();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=n.has(i.key)?null:a;const u=Sk(o,a);u!==null&&r.set(i.key,u),o.isValidDocument()||o.convertToNoDocument(de.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),xe())}isEqual(e){return this.batchId===e.batchId&&_o(this.mutations,e.mutations,(n,r)=>sv(n,r))&&_o(this.baseMutations,e.baseMutations,(n,r)=>sv(n,r))}}class sg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length,58842,{me:e.mutations.length,fe:r.length});let i=function(){return U2}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new sg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J2{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Z2{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var nt,ke;function eD(t){switch(t){case U.OK:return ae(64938);case U.CANCELLED:case U.UNKNOWN:case U.DEADLINE_EXCEEDED:case U.RESOURCE_EXHAUSTED:case U.INTERNAL:case U.UNAVAILABLE:case U.UNAUTHENTICATED:return!1;case U.INVALID_ARGUMENT:case U.NOT_FOUND:case U.ALREADY_EXISTS:case U.PERMISSION_DENIED:case U.FAILED_PRECONDITION:case U.ABORTED:case U.OUT_OF_RANGE:case U.UNIMPLEMENTED:case U.DATA_LOSS:return!0;default:return ae(15467,{code:t})}}function Ck(t){if(t===void 0)return Or("GRPC error has no .code"),U.UNKNOWN;switch(t){case nt.OK:return U.OK;case nt.CANCELLED:return U.CANCELLED;case nt.UNKNOWN:return U.UNKNOWN;case nt.DEADLINE_EXCEEDED:return U.DEADLINE_EXCEEDED;case nt.RESOURCE_EXHAUSTED:return U.RESOURCE_EXHAUSTED;case nt.INTERNAL:return U.INTERNAL;case nt.UNAVAILABLE:return U.UNAVAILABLE;case nt.UNAUTHENTICATED:return U.UNAUTHENTICATED;case nt.INVALID_ARGUMENT:return U.INVALID_ARGUMENT;case nt.NOT_FOUND:return U.NOT_FOUND;case nt.ALREADY_EXISTS:return U.ALREADY_EXISTS;case nt.PERMISSION_DENIED:return U.PERMISSION_DENIED;case nt.FAILED_PRECONDITION:return U.FAILED_PRECONDITION;case nt.ABORTED:return U.ABORTED;case nt.OUT_OF_RANGE:return U.OUT_OF_RANGE;case nt.UNIMPLEMENTED:return U.UNIMPLEMENTED;case nt.DATA_LOSS:return U.DATA_LOSS;default:return ae(39323,{code:t})}}(ke=nt||(nt={}))[ke.OK=0]="OK",ke[ke.CANCELLED=1]="CANCELLED",ke[ke.UNKNOWN=2]="UNKNOWN",ke[ke.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",ke[ke.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",ke[ke.NOT_FOUND=5]="NOT_FOUND",ke[ke.ALREADY_EXISTS=6]="ALREADY_EXISTS",ke[ke.PERMISSION_DENIED=7]="PERMISSION_DENIED",ke[ke.UNAUTHENTICATED=16]="UNAUTHENTICATED",ke[ke.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",ke[ke.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",ke[ke.ABORTED=10]="ABORTED",ke[ke.OUT_OF_RANGE=11]="OUT_OF_RANGE",ke[ke.UNIMPLEMENTED=12]="UNIMPLEMENTED",ke[ke.INTERNAL=13]="INTERNAL",ke[ke.UNAVAILABLE=14]="UNAVAILABLE",ke[ke.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tD(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nD=new gi([4294967295,4294967295],0);function lv(t){const e=tD().encode(t),n=new BE;return n.update(e),new Uint8Array(n.digest())}function uv(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new gi([n,r],0),new gi([i,s],0)]}class og{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new ka(`Invalid padding: ${n}`);if(r<0)throw new ka(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new ka(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new ka(`Invalid padding when bitmap length is 0: ${n}`);this.ge=8*e.length-n,this.pe=gi.fromNumber(this.ge)}ye(e,n,r){let i=e.add(n.multiply(gi.fromNumber(r)));return i.compare(nD)===1&&(i=new gi([i.getBits(0),i.getBits(1)],0)),i.modulo(this.pe).toNumber()}we(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.ge===0)return!1;const n=lv(e),[r,i]=uv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);if(!this.we(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new og(s,i,n);return r.forEach(a=>o.insert(a)),o}insert(e){if(this.ge===0)return;const n=lv(e),[r,i]=uv(n);for(let s=0;s<this.hashCount;s++){const o=this.ye(r,i,s);this.Se(o)}}Se(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class ka extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ah{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Rl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ah(de.min(),i,new Ge(ve),Lr(),xe())}}class Rl{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Rl(r,n,xe(),xe(),xe())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i){this.be=e,this.removedTargetIds=n,this.key=r,this.De=i}}class Nk{constructor(e,n){this.targetId=e,this.Ce=n}}class Rk{constructor(e,n,r=vt.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class cv{constructor(){this.ve=0,this.Fe=hv(),this.Me=vt.EMPTY_BYTE_STRING,this.xe=!1,this.Oe=!0}get current(){return this.xe}get resumeToken(){return this.Me}get Ne(){return this.ve!==0}get Be(){return this.Oe}Le(e){e.approximateByteSize()>0&&(this.Oe=!0,this.Me=e)}ke(){let e=xe(),n=xe(),r=xe();return this.Fe.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ae(38017,{changeType:s})}}),new Rl(this.Me,this.xe,e,n,r)}qe(){this.Oe=!1,this.Fe=hv()}Qe(e,n){this.Oe=!0,this.Fe=this.Fe.insert(e,n)}$e(e){this.Oe=!0,this.Fe=this.Fe.remove(e)}Ue(){this.ve+=1}Ke(){this.ve-=1,Ae(this.ve>=0,3241,{ve:this.ve})}We(){this.Oe=!0,this.xe=!0}}class rD{constructor(e){this.Ge=e,this.ze=new Map,this.je=Lr(),this.Je=_u(),this.He=_u(),this.Ye=new Ge(ve)}Ze(e){for(const n of e.be)e.De&&e.De.isFoundDocument()?this.Xe(n,e.De):this.et(n,e.key,e.De);for(const n of e.removedTargetIds)this.et(n,e.key,e.De)}tt(e){this.forEachTarget(e,n=>{const r=this.nt(n);switch(e.state){case 0:this.rt(n)&&r.Le(e.resumeToken);break;case 1:r.Ke(),r.Ne||r.qe(),r.Le(e.resumeToken);break;case 2:r.Ke(),r.Ne||this.removeTarget(n);break;case 3:this.rt(n)&&(r.We(),r.Le(e.resumeToken));break;case 4:this.rt(n)&&(this.it(n),r.Le(e.resumeToken));break;default:ae(56790,{state:e.state})}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.ze.forEach((r,i)=>{this.rt(i)&&n(i)})}st(e){const n=e.targetId,r=e.Ce.count,i=this.ot(n);if(i){const s=i.target;if(mp(s))if(r===0){const o=new ee(s.path);this.et(n,o,Nt.newNoDocument(o,de.min()))}else Ae(r===1,20013,{expectedCount:r});else{const o=this._t(n);if(o!==r){const a=this.ut(e),u=a?this.ct(a,e,o):1;if(u!==0){this.it(n);const c=u===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ye=this.Ye.insert(n,c)}}}}}ut(e){const n=e.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,a;try{o=Ii(r).toUint8Array()}catch(u){if(u instanceof nk)return hs("Decoding the base64 bloom filter in existence filter failed ("+u.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw u}try{a=new og(o,i,s)}catch(u){return hs(u instanceof ka?"BloomFilter error: ":"Applying bloom filter failed: ",u),null}return a.ge===0?null:a}ct(e,n,r){return n.Ce.count===r-this.Pt(e,n.targetId)?0:2}Pt(e,n){const r=this.Ge.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Ge.ht(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.et(n,s,null),i++)}),i}Tt(e){const n=new Map;this.ze.forEach((s,o)=>{const a=this.ot(o);if(a){if(s.current&&mp(a.target)){const u=new ee(a.target.path);this.It(u).has(o)||this.Et(o,u)||this.et(o,u,Nt.newNoDocument(u,e))}s.Be&&(n.set(o,s.ke()),s.qe())}});let r=xe();this.He.forEach((s,o)=>{let a=!0;o.forEachWhile(u=>{const c=this.ot(u);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(r=r.add(s))}),this.je.forEach((s,o)=>o.setReadTime(e));const i=new Ah(e,n,this.Ye,this.je,r);return this.je=Lr(),this.Je=_u(),this.He=_u(),this.Ye=new Ge(ve),i}Xe(e,n){if(!this.rt(e))return;const r=this.Et(e,n.key)?2:0;this.nt(e).Qe(n.key,r),this.je=this.je.insert(n.key,n),this.Je=this.Je.insert(n.key,this.It(n.key).add(e)),this.He=this.He.insert(n.key,this.dt(n.key).add(e))}et(e,n,r){if(!this.rt(e))return;const i=this.nt(e);this.Et(e,n)?i.Qe(n,1):i.$e(n),this.He=this.He.insert(n,this.dt(n).delete(e)),this.He=this.He.insert(n,this.dt(n).add(e)),r&&(this.je=this.je.insert(n,r))}removeTarget(e){this.ze.delete(e)}_t(e){const n=this.nt(e).ke();return this.Ge.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Ue(e){this.nt(e).Ue()}nt(e){let n=this.ze.get(e);return n||(n=new cv,this.ze.set(e,n)),n}dt(e){let n=this.He.get(e);return n||(n=new ht(ve),this.He=this.He.insert(e,n)),n}It(e){let n=this.Je.get(e);return n||(n=new ht(ve),this.Je=this.Je.insert(e,n)),n}rt(e){const n=this.ot(e)!==null;return n||J("WatchChangeAggregator","Detected inactive target",e),n}ot(e){const n=this.ze.get(e);return n&&n.Ne?null:this.Ge.At(e)}it(e){this.ze.set(e,new cv),this.Ge.getRemoteKeysForTarget(e).forEach(n=>{this.et(e,n,null)})}Et(e,n){return this.Ge.getRemoteKeysForTarget(e).has(n)}}function _u(){return new Ge(ee.comparator)}function hv(){return new Ge(ee.comparator)}const iD={asc:"ASCENDING",desc:"DESCENDING"},sD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},oD={and:"AND",or:"OR"};class aD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function yp(t,e){return t.useProto3Json||wh(e)?e:{value:e}}function Lc(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Pk(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function lD(t,e){return Lc(t,e.toTimestamp())}function ur(t){return Ae(!!t,49232),de.fromTimestamp(function(n){const r=ki(n);return new Oe(r.seconds,r.nanos)}(t))}function ag(t,e){return wp(t,e).canonicalString()}function wp(t,e){const n=function(i){return new Pe(["projects",i.projectId,"databases",i.database])}(t).child("documents");return e===void 0?n:n.child(e)}function Dk(t){const e=Pe.fromString(t);return Ae(Vk(e),10190,{key:e.toString()}),e}function _p(t,e){return ag(t.databaseId,e.path)}function $d(t,e){const n=Dk(e);if(n.get(1)!==t.databaseId.projectId)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(U.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new ee(Ok(n))}function jk(t,e){return ag(t.databaseId,e)}function uD(t){const e=Dk(t);return e.length===4?Pe.emptyPath():Ok(e)}function vp(t){return new Pe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Ok(t){return Ae(t.length>4&&t.get(4)==="documents",29091,{key:t.toString()}),t.popFirst(5)}function dv(t,e,n){return{name:_p(t,e),fields:n.value.mapValue.fields}}function cD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ae(39313,{state:c})}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,d){return c.useProto3Json?(Ae(d===void 0||typeof d=="string",58123),vt.fromBase64String(d||"")):(Ae(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),vt.fromUint8Array(d||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const d=c.code===void 0?U.UNKNOWN:Ck(c.code);return new G(d,c.message||"")}(o);n=new Rk(r,i,s,a||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=$d(t,r.document.name),s=ur(r.document.updateTime),o=r.document.createTime?ur(r.document.createTime):de.min(),a=new Xt({mapValue:{fields:r.document.fields}}),u=Nt.newFoundDocument(i,s,o,a),c=r.targetIds||[],d=r.removedTargetIds||[];n=new Ku(c,d,u.key,u)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=$d(t,r.document),s=r.readTime?ur(r.readTime):de.min(),o=Nt.newNoDocument(i,s),a=r.removedTargetIds||[];n=new Ku([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=$d(t,r.document),s=r.removedTargetIds||[];n=new Ku([],s,i,null)}else{if(!("filter"in e))return ae(11601,{Rt:e});{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new Z2(i,s),a=r.targetId;n=new Nk(a,o)}}return n}function hD(t,e){let n;if(e instanceof Nl)n={update:dv(t,e.key,e.value)};else if(e instanceof Sh)n={delete:_p(t,e.key)};else if(e instanceof ji)n={update:dv(t,e.key,e.data),updateMask:vD(e.fieldMask)};else{if(!(e instanceof X2))return ae(16599,{Vt:e.type});n={verify:_p(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const a=o.transform;if(a instanceof ml)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Io)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof To)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof gl)return{fieldPath:o.field.canonicalString(),increment:a.Ae};throw ae(20930,{transform:o.transform})}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:lD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:ae(27497)}(t,e.precondition)),n}function dD(t,e){return t&&t.length>0?(Ae(e!==void 0,14353),t.map(n=>function(i,s){let o=i.updateTime?ur(i.updateTime):ur(s);return o.isEqual(de.min())&&(o=ur(s)),new G2(o,i.transformResults||[])}(n,e))):[]}function fD(t,e){return{documents:[jk(t,e.path)]}}function pD(t,e){const n={structuredQuery:{}},r=e.path;let i;e.collectionGroup!==null?(i=r,n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(i=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=jk(t,i);const s=function(c){if(c.length!==0)return Mk($n.create(c,"and"))}(e.filters);s&&(n.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(d=>function(m){return{field:Os(m.field),direction:yD(m.dir)}}(d))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const a=yp(t,e.limit);return a!==null&&(n.structuredQuery.limit=a),e.startAt&&(n.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ft:n,parent:i}}function mD(t){let e=uD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1,65062);const d=n.from[0];d.allDescendants?i=d.collectionId:e=e.child(d.collectionId)}let s=[];n.where&&(s=function(f){const m=Lk(f);return m instanceof $n&&dk(m)?m.getFilters():[m]}(n.where));let o=[];n.orderBy&&(o=function(f){return f.map(m=>function(_){return new pl(Ls(_.field),function(P){switch(P){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(_.direction))}(m))}(n.orderBy));let a=null;n.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,wh(m)?null:m}(n.limit));let u=null;n.startAt&&(u=function(f){const m=!!f.before,g=f.values||[];return new ko(g,m)}(n.startAt));let c=null;return n.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new ko(g,m)}(n.endAt)),O2(e,i,o,s,a,"F",u,c)}function gD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ae(28987,{purpose:i})}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Lk(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=Ls(n.unaryFilter.field);return st.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=Ls(n.unaryFilter.field);return st.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=Ls(n.unaryFilter.field);return st.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=Ls(n.unaryFilter.field);return st.create(o,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ae(61313);default:return ae(60726)}}(t):t.fieldFilter!==void 0?function(n){return st.create(Ls(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ae(58110);default:return ae(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return $n.create(n.compositeFilter.filters.map(r=>Lk(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ae(1026)}}(n.compositeFilter.op))}(t):ae(30097,{filter:t})}function yD(t){return iD[t]}function wD(t){return sD[t]}function _D(t){return oD[t]}function Os(t){return{fieldPath:t.canonicalString()}}function Ls(t){return wt.fromServerFormat(t.fieldPath)}function Mk(t){return t instanceof st?function(n){if(n.op==="=="){if(Z_(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NAN"}};if(J_(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Z_(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NAN"}};if(J_(n.value))return{unaryFilter:{field:Os(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Os(n.field),op:wD(n.op),value:n.value}}}(t):t instanceof $n?function(n){const r=n.getFilters().map(i=>Mk(i));return r.length===1?r[0]:{compositeFilter:{op:_D(n.op),filters:r}}}(t):ae(54877,{filter:t})}function vD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Vk(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ii{constructor(e,n,r,i,s=de.min(),o=de.min(),a=vt.EMPTY_BYTE_STRING,u=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=u}withSequenceNumber(e){return new ii(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ii(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.yt=e}}function ED(t){const e=mD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Oc(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.Cn=new ID}addToCollectionParentIndex(e,n){return this.Cn.add(n),$.resolve()}getCollectionParents(e,n){return $.resolve(this.Cn.getEntries(n))}addFieldIndex(e,n){return $.resolve()}deleteFieldIndex(e,n){return $.resolve()}deleteAllFieldIndexes(e){return $.resolve()}createTargetIndexes(e,n){return $.resolve()}getDocumentsMatchingTarget(e,n){return $.resolve(null)}getIndexType(e,n){return $.resolve(0)}getFieldIndexes(e,n){return $.resolve([])}getNextCollectionGroupToUpdate(e){return $.resolve(null)}getMinOffset(e,n){return $.resolve(Ei.min())}getMinOffsetFromCollectionGroup(e,n){return $.resolve(Ei.min())}updateCollectionGroup(e,n,r){return $.resolve()}updateIndexEntries(e,n){return $.resolve()}}class ID{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new ht(Pe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new ht(Pe.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fv={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},Fk=41943040;class Kt{static withCacheSize(e){return new Kt(e,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,n,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Kt.DEFAULT_COLLECTION_PERCENTILE=10,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Kt.DEFAULT=new Kt(Fk,Kt.DEFAULT_COLLECTION_PERCENTILE,Kt.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Kt.DISABLED=new Kt(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bo{constructor(e){this.ar=e}next(){return this.ar+=2,this.ar}static ur(){return new bo(0)}static cr(){return new bo(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pv="LruGarbageCollector",TD=1048576;function mv([t,e],[n,r]){const i=ve(t,n);return i===0?ve(e,r):i}class bD{constructor(e){this.Ir=e,this.buffer=new ht(mv),this.Er=0}dr(){return++this.Er}Ar(e){const n=[e,this.dr()];if(this.buffer.size<this.Ir)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();mv(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class SD{constructor(e,n,r){this.garbageCollector=e,this.asyncQueue=n,this.localStore=r,this.Rr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Vr(6e4)}stop(){this.Rr&&(this.Rr.cancel(),this.Rr=null)}get started(){return this.Rr!==null}Vr(e){J(pv,`Garbage collection scheduled in ${e}ms`),this.Rr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Rr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Oo(n)?J(pv,"Ignoring IndexedDB error during garbage collection: ",n):await jo(n)}await this.Vr(3e5)})}}class AD{constructor(e,n){this.mr=e,this.params=n}calculateTargetCount(e,n){return this.mr.gr(e).next(r=>Math.floor(n/100*r))}nthSequenceNumber(e,n){if(n===0)return $.resolve(yh.ce);const r=new bD(n);return this.mr.forEachTarget(e,i=>r.Ar(i.sequenceNumber)).next(()=>this.mr.pr(e,i=>r.Ar(i))).next(()=>r.maxValue)}removeTargets(e,n,r){return this.mr.removeTargets(e,n,r)}removeOrphanedDocuments(e,n){return this.mr.removeOrphanedDocuments(e,n)}collect(e,n){return this.params.cacheSizeCollectionThreshold===-1?(J("LruGarbageCollector","Garbage collection skipped; disabled"),$.resolve(fv)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(J("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),fv):this.yr(e,n))}getCacheSize(e){return this.mr.getCacheSize(e)}yr(e,n){let r,i,s,o,a,u,c;const d=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(J("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),i=this.params.maximumSequenceNumbersToCollect):i=f,o=Date.now(),this.nthSequenceNumber(e,i))).next(f=>(r=f,a=Date.now(),this.removeTargets(e,r,n))).next(f=>(s=f,u=Date.now(),this.removeOrphanedDocuments(e,r))).next(f=>(c=Date.now(),Ds()<=_e.DEBUG&&J("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-d}ms
	Determined least recently used ${i} in `+(a-o)+`ms
	Removed ${s} targets in `+(u-a)+`ms
	Removed ${f} documents in `+(c-u)+`ms
Total Duration: ${c-d}ms`),$.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:s,documentsRemoved:f})))}}function CD(t,e){return new AD(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ND{constructor(){this.changes=new Es(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Nt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?$.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Va(r.mutation,i,hn.empty(),Oe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,xe()).next(()=>r))}getLocalViewOfDocuments(e,n,r=xe()){const i=Yi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=Ea();return s.forEach((a,u)=>{o=o.insert(a,u.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=Yi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,xe()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,a)=>{n.set(o,a)})})}computeViews(e,n,r,i){let s=Lr();const o=Ma(),a=function(){return Ma()}();return n.forEach((u,c)=>{const d=r.get(c.key);i.has(c.key)&&(d===void 0||d.mutation instanceof ji)?s=s.insert(c.key,c):d!==void 0?(o.set(c.key,d.mutation.getFieldMask()),Va(d.mutation,c,d.mutation.getFieldMask(),Oe.now())):o.set(c.key,hn.empty())}),this.recalculateAndSaveOverlays(e,s).next(u=>(u.forEach((c,d)=>o.set(c,d)),n.forEach((c,d)=>a.set(c,new RD(d,o.get(c)??null))),a))}recalculateAndSaveOverlays(e,n){const r=Ma();let i=new Ge((o,a)=>o-a),s=xe();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const a of o)a.keys().forEach(u=>{const c=n.get(u);if(c===null)return;let d=r.get(u)||hn.empty();d=a.applyToLocalView(c,d),r.set(u,d);const f=(i.get(a.batchId)||xe()).add(u);i=i.insert(a.batchId,f)})}).next(()=>{const o=[],a=i.getReverseIterator();for(;a.hasNext();){const u=a.getNext(),c=u.key,d=u.value,f=vk();d.forEach(m=>{if(!s.has(m)){const g=Sk(n.get(m),r.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return $.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r,i){return function(o){return ee.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):rg(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r,i):this.getDocumentsMatchingCollectionQuery(e,n,r,i)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):$.resolve(Yi());let a=hl,u=s;return o.next(c=>$.forEach(c,(d,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(d)?$.resolve():this.remoteDocumentCache.getEntry(e,d).next(m=>{u=u.insert(d,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,u,c,xe())).next(d=>({batchId:a,changes:_k(d)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new ee(n)).next(r=>{let i=Ea();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r,i){const s=n.collectionGroup;let o=Ea();return this.indexManager.getCollectionParents(e,s).next(a=>$.forEach(a,u=>{const c=function(f,m){return new xs(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(n,u.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,r,i).next(d=>{d.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r,i){let s;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,s,i))).next(o=>{s.forEach((u,c)=>{const d=c.getKey();o.get(d)===null&&(o=o.insert(d,Nt.newInvalidDocument(d)))});let a=Ea();return o.forEach((u,c)=>{const d=s.get(u);d!==void 0&&Va(d.mutation,c,hn.empty(),Oe.now()),kh(n,c)&&(a=a.insert(u,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(e){this.serializer=e,this.Lr=new Map,this.kr=new Map}getBundleMetadata(e,n){return $.resolve(this.Lr.get(n))}saveBundleMetadata(e,n){return this.Lr.set(n.id,function(i){return{id:i.id,version:i.version,createTime:ur(i.createTime)}}(n)),$.resolve()}getNamedQuery(e,n){return $.resolve(this.kr.get(n))}saveNamedQuery(e,n){return this.kr.set(n.name,function(i){return{name:i.name,query:ED(i.bundledQuery),readTime:ur(i.readTime)}}(n)),$.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jD{constructor(){this.overlays=new Ge(ee.comparator),this.qr=new Map}getOverlay(e,n){return $.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Yi();return $.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.St(e,n,s)}),$.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.qr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.qr.delete(r)),$.resolve()}getOverlaysForCollection(e,n,r){const i=Yi(),s=n.length+1,o=new ee(n.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const u=a.getNext().value,c=u.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&u.largestBatchId>r&&i.set(u.getKey(),u)}return $.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new Ge((c,d)=>c-d);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let d=s.get(c.largestBatchId);d===null&&(d=Yi(),s=s.insert(c.largestBatchId,d)),d.set(c.getKey(),c)}}const a=Yi(),u=s.getIterator();for(;u.hasNext()&&(u.getNext().value.forEach((c,d)=>a.set(c,d)),!(a.size()>=i)););return $.resolve(a)}St(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.qr.get(i.largestBatchId).delete(r.key);this.qr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new J2(n,r));let s=this.qr.get(n);s===void 0&&(s=xe(),this.qr.set(n,s)),this.qr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(){this.sessionToken=vt.EMPTY_BYTE_STRING}getSessionToken(e){return $.resolve(this.sessionToken)}setSessionToken(e,n){return this.sessionToken=n,$.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(){this.Qr=new ht(gt.$r),this.Ur=new ht(gt.Kr)}isEmpty(){return this.Qr.isEmpty()}addReference(e,n){const r=new gt(e,n);this.Qr=this.Qr.add(r),this.Ur=this.Ur.add(r)}Wr(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.Gr(new gt(e,n))}zr(e,n){e.forEach(r=>this.removeReference(r,n))}jr(e){const n=new ee(new Pe([])),r=new gt(n,e),i=new gt(n,e+1),s=[];return this.Ur.forEachInRange([r,i],o=>{this.Gr(o),s.push(o.key)}),s}Jr(){this.Qr.forEach(e=>this.Gr(e))}Gr(e){this.Qr=this.Qr.delete(e),this.Ur=this.Ur.delete(e)}Hr(e){const n=new ee(new Pe([])),r=new gt(n,e),i=new gt(n,e+1);let s=xe();return this.Ur.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new gt(e,0),r=this.Qr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class gt{constructor(e,n){this.key=e,this.Yr=n}static $r(e,n){return ee.comparator(e.key,n.key)||ve(e.Yr,n.Yr)}static Kr(e,n){return ve(e.Yr,n.Yr)||ee.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LD{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.tr=1,this.Zr=new ht(gt.$r)}checkEmpty(e){return $.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.tr;this.tr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Y2(s,n,r,i);this.mutationQueue.push(o);for(const a of i)this.Zr=this.Zr.add(new gt(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return $.resolve(o)}lookupMutationBatch(e,n){return $.resolve(this.Xr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.ei(r),s=i<0?0:i;return $.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return $.resolve(this.mutationQueue.length===0?Zm:this.tr-1)}getAllMutationBatches(e){return $.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new gt(n,0),i=new gt(n,Number.POSITIVE_INFINITY),s=[];return this.Zr.forEachInRange([r,i],o=>{const a=this.Xr(o.Yr);s.push(a)}),$.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new ht(ve);return n.forEach(i=>{const s=new gt(i,0),o=new gt(i,Number.POSITIVE_INFINITY);this.Zr.forEachInRange([s,o],a=>{r=r.add(a.Yr)})}),$.resolve(this.ti(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;ee.isDocumentKey(s)||(s=s.child(""));const o=new gt(new ee(s),0);let a=new ht(ve);return this.Zr.forEachWhile(u=>{const c=u.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(a=a.add(u.Yr)),!0)},o),$.resolve(this.ti(a))}ti(e){const n=[];return e.forEach(r=>{const i=this.Xr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.ni(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.Zr;return $.forEach(n.mutations,i=>{const s=new gt(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Zr=r})}ir(e){}containsKey(e,n){const r=new gt(n,0),i=this.Zr.firstAfterOrEqual(r);return $.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,$.resolve()}ni(e,n){return this.ei(e)}ei(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Xr(e){const n=this.ei(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e){this.ri=e,this.docs=function(){return new Ge(ee.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.ri(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return $.resolve(r?r.document.mutableCopy():Nt.newInvalidDocument(n))}getEntries(e,n){let r=Lr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Nt.newInvalidDocument(i))}),$.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=Lr();const o=n.path,a=new ee(o.child("__id-9223372036854775808__")),u=this.docs.getIteratorFrom(a);for(;u.hasNext();){const{key:c,value:{document:d}}=u.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||f2(d2(d),r)<=0||(i.has(d.key)||kh(n,d))&&(s=s.insert(d.key,d.mutableCopy()))}return $.resolve(s)}getAllFromCollectionGroup(e,n,r,i){ae(9500)}ii(e,n){return $.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new VD(this)}getSize(e){return $.resolve(this.size)}}class VD extends ND{constructor(e){super(),this.Nr=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this.Nr.addEntry(e,i)):this.Nr.removeEntry(r)}),$.waitFor(n)}getFromCache(e,n){return this.Nr.getEntry(e,n)}getAllFromCache(e,n){return this.Nr.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FD{constructor(e){this.persistence=e,this.si=new Es(n=>tg(n),ng),this.lastRemoteSnapshotVersion=de.min(),this.highestTargetId=0,this.oi=0,this._i=new lg,this.targetCount=0,this.ai=bo.ur()}forEachTarget(e,n){return this.si.forEach((r,i)=>n(i)),$.resolve()}getLastRemoteSnapshotVersion(e){return $.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return $.resolve(this.oi)}allocateTargetId(e){return this.highestTargetId=this.ai.next(),$.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.oi&&(this.oi=n),$.resolve()}Pr(e){this.si.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.ai=new bo(n),this.highestTargetId=n),e.sequenceNumber>this.oi&&(this.oi=e.sequenceNumber)}addTargetData(e,n){return this.Pr(n),this.targetCount+=1,$.resolve()}updateTargetData(e,n){return this.Pr(n),$.resolve()}removeTargetData(e,n){return this.si.delete(n.target),this._i.jr(n.targetId),this.targetCount-=1,$.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.si.forEach((o,a)=>{a.sequenceNumber<=n&&r.get(a.targetId)===null&&(this.si.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),i++)}),$.waitFor(s).next(()=>i)}getTargetCount(e){return $.resolve(this.targetCount)}getTargetData(e,n){const r=this.si.get(n)||null;return $.resolve(r)}addMatchingKeys(e,n,r){return this._i.Wr(n,r),$.resolve()}removeMatchingKeys(e,n,r){this._i.zr(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),$.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this._i.jr(n),$.resolve()}getMatchingKeysForTargetId(e,n){const r=this._i.Hr(n);return $.resolve(r)}containsKey(e,n){return $.resolve(this._i.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uk{constructor(e,n){this.ui={},this.overlays={},this.ci=new yh(0),this.li=!1,this.li=!0,this.hi=new OD,this.referenceDelegate=e(this),this.Pi=new FD(this),this.indexManager=new kD,this.remoteDocumentCache=function(i){return new MD(i)}(r=>this.referenceDelegate.Ti(r)),this.serializer=new xD(n),this.Ii=new DD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.li=!1,Promise.resolve()}get started(){return this.li}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new jD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.ui[e.toKey()];return r||(r=new LD(n,this.referenceDelegate),this.ui[e.toKey()]=r),r}getGlobalsCache(){return this.hi}getTargetCache(){return this.Pi}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Ii}runTransaction(e,n,r){J("MemoryPersistence","Starting transaction:",e);const i=new UD(this.ci.next());return this.referenceDelegate.Ei(),r(i).next(s=>this.referenceDelegate.di(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Ai(e,n){return $.or(Object.values(this.ui).map(r=>()=>r.containsKey(e,n)))}}class UD extends m2{constructor(e){super(),this.currentSequenceNumber=e}}class ug{constructor(e){this.persistence=e,this.Ri=new lg,this.Vi=null}static mi(e){return new ug(e)}get fi(){if(this.Vi)return this.Vi;throw ae(60996)}addReference(e,n,r){return this.Ri.addReference(r,n),this.fi.delete(r.toString()),$.resolve()}removeReference(e,n,r){return this.Ri.removeReference(r,n),this.fi.add(r.toString()),$.resolve()}markPotentiallyOrphaned(e,n){return this.fi.add(n.toString()),$.resolve()}removeTarget(e,n){this.Ri.jr(n.targetId).forEach(i=>this.fi.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.fi.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}Ei(){this.Vi=new Set}di(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return $.forEach(this.fi,r=>{const i=ee.fromPath(r);return this.gi(e,i).next(s=>{s||n.removeEntry(i,de.min())})}).next(()=>(this.Vi=null,n.apply(e)))}updateLimboDocument(e,n){return this.gi(e,n).next(r=>{r?this.fi.delete(n.toString()):this.fi.add(n.toString())})}Ti(e){return 0}gi(e,n){return $.or([()=>$.resolve(this.Ri.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Ai(e,n)])}}class Mc{constructor(e,n){this.persistence=e,this.pi=new Es(r=>w2(r.path),(r,i)=>r.isEqual(i)),this.garbageCollector=CD(this,n)}static mi(e,n){return new Mc(e,n)}Ei(){}di(e){return $.resolve()}forEachTarget(e,n){return this.persistence.getTargetCache().forEachTarget(e,n)}gr(e){const n=this.wr(e);return this.persistence.getTargetCache().getTargetCount(e).next(r=>n.next(i=>r+i))}wr(e){let n=0;return this.pr(e,r=>{n++}).next(()=>n)}pr(e,n){return $.forEach(this.pi,(r,i)=>this.br(e,r,i).next(s=>s?$.resolve():n(i)))}removeTargets(e,n,r){return this.persistence.getTargetCache().removeTargets(e,n,r)}removeOrphanedDocuments(e,n){let r=0;const i=this.persistence.getRemoteDocumentCache(),s=i.newChangeBuffer();return i.ii(e,o=>this.br(e,o,n).next(a=>{a||(r++,s.removeEntry(o,de.min()))})).next(()=>s.apply(e)).next(()=>r)}markPotentiallyOrphaned(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}removeTarget(e,n){const r=n.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,r)}addReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}removeReference(e,n,r){return this.pi.set(r,e.currentSequenceNumber),$.resolve()}updateLimboDocument(e,n){return this.pi.set(n,e.currentSequenceNumber),$.resolve()}Ti(e){let n=e.key.toString().length;return e.isFoundDocument()&&(n+=Hu(e.data.value)),n}br(e,n,r){return $.or([()=>this.persistence.Ai(e,n),()=>this.persistence.getTargetCache().containsKey(e,n),()=>{const i=this.pi.get(n);return $.resolve(i!==void 0&&i>r)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.Es=r,this.ds=i}static As(e,n){let r=xe(),i=xe();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new cg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zD{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BD{constructor(){this.Rs=!1,this.Vs=!1,this.fs=100,this.gs=function(){return vC()?8:g2(Dt())>0?6:4}()}initialize(e,n){this.ps=e,this.indexManager=n,this.Rs=!0}getDocumentsMatchingQuery(e,n,r,i){const s={result:null};return this.ys(e,n).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ws(e,n,i,r).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new zD;return this.Ss(e,n,o).next(a=>{if(s.result=a,this.Vs)return this.bs(e,n,o,a.size)})}).next(()=>s.result)}bs(e,n,r,i){return r.documentReadCount<this.fs?(Ds()<=_e.DEBUG&&J("QueryEngine","SDK will not create cache indexes for query:",js(n),"since it only creates cache indexes for collection contains","more than or equal to",this.fs,"documents"),$.resolve()):(Ds()<=_e.DEBUG&&J("QueryEngine","Query:",js(n),"scans",r.documentReadCount,"local documents and returns",i,"documents as results."),r.documentReadCount>this.gs*i?(Ds()<=_e.DEBUG&&J("QueryEngine","The SDK decides to create cache indexes for query:",js(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,lr(n))):$.resolve())}ys(e,n){if(rv(n))return $.resolve(null);let r=lr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Oc(n,null,"F"),r=lr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=xe(...s);return this.ps.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,r).next(u=>{const c=this.Ds(n,a);return this.Cs(n,c,o,u.readTime)?this.ys(e,Oc(n,null,"F")):this.vs(e,c,n,u)}))})))}ws(e,n,r,i){return rv(n)||i.isEqual(de.min())?$.resolve(null):this.ps.getDocuments(e,r).next(s=>{const o=this.Ds(n,s);return this.Cs(n,o,r,i)?$.resolve(null):(Ds()<=_e.DEBUG&&J("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),js(n)),this.vs(e,o,n,h2(i,hl)).next(a=>a))})}Ds(e,n){let r=new ht(yk(e));return n.forEach((i,s)=>{kh(e,s)&&(r=r.add(s))}),r}Cs(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Ss(e,n,r){return Ds()<=_e.DEBUG&&J("QueryEngine","Using full collection scan to execute query:",js(n)),this.ps.getDocumentsMatchingQuery(e,n,Ei.min(),r)}vs(e,n,r,i){return this.ps.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hg="LocalStore",$D=3e8;class qD{constructor(e,n,r,i){this.persistence=e,this.Fs=n,this.serializer=i,this.Ms=new Ge(ve),this.xs=new Es(s=>tg(s),ng),this.Os=new Map,this.Ns=e.getRemoteDocumentCache(),this.Pi=e.getTargetCache(),this.Ii=e.getBundleCache(),this.Bs(r)}Bs(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PD(this.Ns,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Ns.setIndexManager(this.indexManager),this.Fs.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Ms))}}function HD(t,e,n,r){return new qD(t,e,n,r)}async function zk(t,e){const n=fe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.Bs(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],a=[];let u=xe();for(const c of i){o.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}for(const c of s){a.push(c.batchId);for(const d of c.mutations)u=u.add(d.key)}return n.localDocuments.getDocuments(r,u).next(c=>({Ls:c,removedBatchIds:o,addedBatchIds:a}))})})}function WD(t,e){const n=fe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.Ns.newChangeBuffer({trackRemovals:!0});return function(a,u,c,d){const f=c.batch,m=f.keys();let g=$.resolve();return m.forEach(_=>{g=g.next(()=>d.getEntry(u,_)).next(b=>{const P=c.docVersions.get(_);Ae(P!==null,48541),b.version.compareTo(P)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),d.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(u,f))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(a){let u=xe();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(u=u.add(a.batch.mutations[c].key));return u}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Bk(t){const e=fe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.Pi.getLastRemoteSnapshotVersion(n))}function GD(t,e){const n=fe(t),r=e.snapshotVersion;let i=n.Ms;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.Ns.newChangeBuffer({trackRemovals:!0});i=n.Ms;const a=[];e.targetChanges.forEach((d,f)=>{const m=i.get(f);if(!m)return;a.push(n.Pi.removeMatchingKeys(s,d.removedDocuments,f).next(()=>n.Pi.addMatchingKeys(s,d.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(vt.EMPTY_BYTE_STRING,de.min()).withLastLimboFreeSnapshotVersion(de.min()):d.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(d.resumeToken,r)),i=i.insert(f,g),function(b,P,x){return b.resumeToken.approximateByteSize()===0||P.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=$D?!0:x.addedDocuments.size+x.modifiedDocuments.size+x.removedDocuments.size>0}(m,g,d)&&a.push(n.Pi.updateTargetData(s,g))});let u=Lr(),c=xe();if(e.documentUpdates.forEach(d=>{e.resolvedLimboDocuments.has(d)&&a.push(n.persistence.referenceDelegate.updateLimboDocument(s,d))}),a.push(KD(s,o,e.documentUpdates).next(d=>{u=d.ks,c=d.qs})),!r.isEqual(de.min())){const d=n.Pi.getLastRemoteSnapshotVersion(s).next(f=>n.Pi.setTargetsMetadata(s,s.currentSequenceNumber,r));a.push(d)}return $.waitFor(a).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,u,c)).next(()=>u)}).then(s=>(n.Ms=i,s))}function KD(t,e,n){let r=xe(),i=xe();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=Lr();return n.forEach((a,u)=>{const c=s.get(a);u.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(a)),u.isNoDocument()&&u.version.isEqual(de.min())?(e.removeEntry(a,u.readTime),o=o.insert(a,u)):!c.isValidDocument()||u.version.compareTo(c.version)>0||u.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(u),o=o.insert(a,u)):J(hg,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",u.version)}),{ks:o,qs:i}})}function QD(t,e){const n=fe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=Zm),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function XD(t,e){const n=fe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.Pi.getTargetData(r,e).next(s=>s?(i=s,$.resolve(i)):n.Pi.allocateTargetId(r).next(o=>(i=new ii(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.Pi.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Ms.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Ms=n.Ms.insert(r.targetId,r),n.xs.set(e,r.targetId)),r})}async function xp(t,e,n){const r=fe(t),i=r.Ms.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Oo(o))throw o;J(hg,`Failed to update sequence numbers for target ${e}: ${o}`)}r.Ms=r.Ms.remove(e),r.xs.delete(i.target)}function gv(t,e,n){const r=fe(t);let i=de.min(),s=xe();return r.persistence.runTransaction("Execute query","readwrite",o=>function(u,c,d){const f=fe(u),m=f.xs.get(d);return m!==void 0?$.resolve(f.Ms.get(m)):f.Pi.getTargetData(c,d)}(r,o,lr(e)).next(a=>{if(a)return i=a.lastLimboFreeSnapshotVersion,r.Pi.getMatchingKeysForTargetId(o,a.targetId).next(u=>{s=u})}).next(()=>r.Fs.getDocumentsMatchingQuery(o,e,n?i:de.min(),n?s:xe())).next(a=>(YD(r,M2(e),a),{documents:a,Qs:s})))}function YD(t,e,n){let r=t.Os.get(e)||de.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Os.set(e,r)}class yv{constructor(){this.activeTargetIds=$2()}zs(e){this.activeTargetIds=this.activeTargetIds.add(e)}js(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JD{constructor(){this.Mo=new yv,this.xo={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e,n=!0){return n&&this.Mo.zs(e),this.xo[e]||"not-current"}updateQueryState(e,n,r){this.xo[e]=n}removeLocalQueryTarget(e){this.Mo.js(e)}isLocalQueryTarget(e){return this.Mo.activeTargetIds.has(e)}clearQueryState(e){delete this.xo[e]}getAllActiveQueryTargets(){return this.Mo.activeTargetIds}isActiveQueryTarget(e){return this.Mo.activeTargetIds.has(e)}start(){return this.Mo=new yv,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZD{Oo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wv="ConnectivityMonitor";class _v{constructor(){this.No=()=>this.Bo(),this.Lo=()=>this.ko(),this.qo=[],this.Qo()}Oo(e){this.qo.push(e)}shutdown(){window.removeEventListener("online",this.No),window.removeEventListener("offline",this.Lo)}Qo(){window.addEventListener("online",this.No),window.addEventListener("offline",this.Lo)}Bo(){J(wv,"Network connectivity changed: AVAILABLE");for(const e of this.qo)e(0)}ko(){J(wv,"Network connectivity changed: UNAVAILABLE");for(const e of this.qo)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let vu=null;function Ep(){return vu===null?vu=function(){return 268435456+Math.round(2147483648*Math.random())}():vu++,"0x"+vu.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qd="RestConnection",e4={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class t4{get $o(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const n=e.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),i=encodeURIComponent(this.databaseId.database);this.Uo=n+"://"+e.host,this.Ko=`projects/${r}/databases/${i}`,this.Wo=this.databaseId.database===Pc?`project_id=${r}`:`project_id=${r}&database_id=${i}`}Go(e,n,r,i,s){const o=Ep(),a=this.zo(e,n.toUriEncodedString());J(qd,`Sending RPC '${e}' ${o}:`,a,r);const u={"google-cloud-resource-prefix":this.Ko,"x-goog-request-params":this.Wo};this.jo(u,i,s);const{host:c}=new URL(a),d=Ri(c);return this.Jo(e,a,u,r,d).then(f=>(J(qd,`Received RPC '${e}' ${o}: `,f),f),f=>{throw hs(qd,`RPC '${e}' ${o} failed with error: `,f,"url: ",a,"request:",r),f})}Ho(e,n,r,i,s,o){return this.Go(e,n,r,i,s)}jo(e,n,r){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Do}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((i,s)=>e[s]=i),r&&r.headers.forEach((i,s)=>e[s]=i)}zo(e,n){const r=e4[e];return`${this.Uo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n4{constructor(e){this.Yo=e.Yo,this.Zo=e.Zo}Xo(e){this.e_=e}t_(e){this.n_=e}r_(e){this.i_=e}onMessage(e){this.s_=e}close(){this.Zo()}send(e){this.Yo(e)}o_(){this.e_()}__(){this.n_()}a_(e){this.i_(e)}u_(e){this.s_(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const St="WebChannelConnection";class r4 extends t4{constructor(e){super(e),this.c_=[],this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Jo(e,n,r,i,s){const o=Ep();return new Promise((a,u)=>{const c=new $E;c.setWithCredentials(!0),c.listenOnce(qE.COMPLETE,()=>{try{switch(c.getLastErrorCode()){case qu.NO_ERROR:const f=c.getResponseJson();J(St,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(f)),a(f);break;case qu.TIMEOUT:J(St,`RPC '${e}' ${o} timed out`),u(new G(U.DEADLINE_EXCEEDED,"Request time out"));break;case qu.HTTP_ERROR:const m=c.getStatus();if(J(St,`RPC '${e}' ${o} failed with status:`,m,"response text:",c.getResponseText()),m>0){let g=c.getResponseJson();Array.isArray(g)&&(g=g[0]);const _=g==null?void 0:g.error;if(_&&_.status&&_.message){const b=function(x){const k=x.toLowerCase().replace(/_/g,"-");return Object.values(U).indexOf(k)>=0?k:U.UNKNOWN}(_.status);u(new G(b,_.message))}else u(new G(U.UNKNOWN,"Server responded with status "+c.getStatus()))}else u(new G(U.UNAVAILABLE,"Connection failed."));break;default:ae(9055,{l_:e,streamId:o,h_:c.getLastErrorCode(),P_:c.getLastError()})}}finally{J(St,`RPC '${e}' ${o} completed.`)}});const d=JSON.stringify(i);J(St,`RPC '${e}' ${o} sending request:`,i),c.send(n,"POST",d,r,15)})}T_(e,n,r){const i=Ep(),s=[this.Uo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GE(),a=WE(),u={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(u.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(u.useFetchStreams=!0),this.jo(u.initMessageHeaders,n,r),u.encodeInitMessageHeaders=!0;const d=s.join("");J(St,`Creating RPC '${e}' stream ${i}: ${d}`,u);const f=o.createWebChannel(d,u);this.I_(f);let m=!1,g=!1;const _=new n4({Yo:P=>{g?J(St,`Not sending because RPC '${e}' stream ${i} is closed:`,P):(m||(J(St,`Opening RPC '${e}' stream ${i} transport.`),f.open(),m=!0),J(St,`RPC '${e}' stream ${i} sending:`,P),f.send(P))},Zo:()=>f.close()}),b=(P,x,k)=>{P.listen(x,E=>{try{k(E)}catch(O){setTimeout(()=>{throw O},0)}})};return b(f,xa.EventType.OPEN,()=>{g||(J(St,`RPC '${e}' stream ${i} transport opened.`),_.o_())}),b(f,xa.EventType.CLOSE,()=>{g||(g=!0,J(St,`RPC '${e}' stream ${i} transport closed`),_.a_(),this.E_(f))}),b(f,xa.EventType.ERROR,P=>{g||(g=!0,hs(St,`RPC '${e}' stream ${i} transport errored. Name:`,P.name,"Message:",P.message),_.a_(new G(U.UNAVAILABLE,"The operation could not be completed")))}),b(f,xa.EventType.MESSAGE,P=>{var x;if(!g){const k=P.data[0];Ae(!!k,16349);const E=k,O=(E==null?void 0:E.error)||((x=E[0])==null?void 0:x.error);if(O){J(St,`RPC '${e}' stream ${i} received error:`,O);const M=O.status;let D=function(I){const S=nt[I];if(S!==void 0)return Ck(S)}(M),v=O.message;D===void 0&&(D=U.INTERNAL,v="Unknown error status: "+M+" with message "+O.message),g=!0,_.a_(new G(D,v)),f.close()}else J(St,`RPC '${e}' stream ${i} received:`,k),_.u_(k)}}),b(a,HE.STAT_EVENT,P=>{P.stat===cp.PROXY?J(St,`RPC '${e}' stream ${i} detected buffering proxy`):P.stat===cp.NOPROXY&&J(St,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{_.__()},0),_}terminate(){this.c_.forEach(e=>e.close()),this.c_=[]}I_(e){this.c_.push(e)}E_(e){this.c_=this.c_.filter(n=>n===e)}}function Hd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ch(t){return new aD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $k{constructor(e,n,r=1e3,i=1.5,s=6e4){this.Mi=e,this.timerId=n,this.d_=r,this.A_=i,this.R_=s,this.V_=0,this.m_=null,this.f_=Date.now(),this.reset()}reset(){this.V_=0}g_(){this.V_=this.R_}p_(e){this.cancel();const n=Math.floor(this.V_+this.y_()),r=Math.max(0,Date.now()-this.f_),i=Math.max(0,n-r);i>0&&J("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.V_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.m_=this.Mi.enqueueAfterDelay(this.timerId,i,()=>(this.f_=Date.now(),e())),this.V_*=this.A_,this.V_<this.d_&&(this.V_=this.d_),this.V_>this.R_&&(this.V_=this.R_)}w_(){this.m_!==null&&(this.m_.skipDelay(),this.m_=null)}cancel(){this.m_!==null&&(this.m_.cancel(),this.m_=null)}y_(){return(Math.random()-.5)*this.V_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vv="PersistentStream";class qk{constructor(e,n,r,i,s,o,a,u){this.Mi=e,this.S_=r,this.b_=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=u,this.state=0,this.D_=0,this.C_=null,this.v_=null,this.stream=null,this.F_=0,this.M_=new $k(e,n)}x_(){return this.state===1||this.state===5||this.O_()}O_(){return this.state===2||this.state===3}start(){this.F_=0,this.state!==4?this.auth():this.N_()}async stop(){this.x_()&&await this.close(0)}B_(){this.state=0,this.M_.reset()}L_(){this.O_()&&this.C_===null&&(this.C_=this.Mi.enqueueAfterDelay(this.S_,6e4,()=>this.k_()))}q_(e){this.Q_(),this.stream.send(e)}async k_(){if(this.O_())return this.close(0)}Q_(){this.C_&&(this.C_.cancel(),this.C_=null)}U_(){this.v_&&(this.v_.cancel(),this.v_=null)}async close(e,n){this.Q_(),this.U_(),this.M_.cancel(),this.D_++,e!==4?this.M_.reset():n&&n.code===U.RESOURCE_EXHAUSTED?(Or(n.toString()),Or("Using maximum backoff delay to prevent overloading the backend."),this.M_.g_()):n&&n.code===U.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.K_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.r_(n)}K_(){}auth(){this.state=1;const e=this.W_(this.D_),n=this.D_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.D_===n&&this.G_(r,i)},r=>{e(()=>{const i=new G(U.UNKNOWN,"Fetching auth token failed: "+r.message);return this.z_(i)})})}G_(e,n){const r=this.W_(this.D_);this.stream=this.j_(e,n),this.stream.Xo(()=>{r(()=>this.listener.Xo())}),this.stream.t_(()=>{r(()=>(this.state=2,this.v_=this.Mi.enqueueAfterDelay(this.b_,1e4,()=>(this.O_()&&(this.state=3),Promise.resolve())),this.listener.t_()))}),this.stream.r_(i=>{r(()=>this.z_(i))}),this.stream.onMessage(i=>{r(()=>++this.F_==1?this.J_(i):this.onNext(i))})}N_(){this.state=5,this.M_.p_(async()=>{this.state=0,this.start()})}z_(e){return J(vv,`close with error: ${e}`),this.stream=null,this.close(4,e)}W_(e){return n=>{this.Mi.enqueueAndForget(()=>this.D_===e?n():(J(vv,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class i4 extends qk{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}j_(e,n){return this.connection.T_("Listen",e,n)}J_(e){return this.onNext(e)}onNext(e){this.M_.reset();const n=cD(this.serializer,e),r=function(s){if(!("targetChange"in s))return de.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?de.min():o.readTime?ur(o.readTime):de.min()}(e);return this.listener.H_(n,r)}Y_(e){const n={};n.database=vp(this.serializer),n.addTarget=function(s,o){let a;const u=o.target;if(a=mp(u)?{documents:fD(s,u)}:{query:pD(s,u).ft},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=Pk(s,o.resumeToken);const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(de.min())>0){a.readTime=Lc(s,o.snapshotVersion.toTimestamp());const c=yp(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const r=gD(this.serializer,e);r&&(n.labels=r),this.q_(n)}Z_(e){const n={};n.database=vp(this.serializer),n.removeTarget=e,this.q_(n)}}class s4 extends qk{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}get X_(){return this.F_>0}start(){this.lastStreamToken=void 0,super.start()}K_(){this.X_&&this.ea([])}j_(e,n){return this.connection.T_("Write",e,n)}J_(e){return Ae(!!e.streamToken,31322),this.lastStreamToken=e.streamToken,Ae(!e.writeResults||e.writeResults.length===0,55816),this.listener.ta()}onNext(e){Ae(!!e.streamToken,12678),this.lastStreamToken=e.streamToken,this.M_.reset();const n=dD(e.writeResults,e.commitTime),r=ur(e.commitTime);return this.listener.na(r,n)}ra(){const e={};e.database=vp(this.serializer),this.q_(e)}ea(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>hD(this.serializer,r))};this.q_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o4{}class a4 extends o4{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.ia=!1}sa(){if(this.ia)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.")}Go(e,n,r,i){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Go(e,wp(n,r),i,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(U.UNKNOWN,s.toString())})}Ho(e,n,r,i,s){return this.sa(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Ho(e,wp(n,r),i,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===U.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new G(U.UNKNOWN,o.toString())})}terminate(){this.ia=!0,this.connection.terminate()}}class l4{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.oa=0,this._a=null,this.aa=!0}ua(){this.oa===0&&(this.ca("Unknown"),this._a=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._a=null,this.la("Backend didn't respond within 10 seconds."),this.ca("Offline"),Promise.resolve())))}ha(e){this.state==="Online"?this.ca("Unknown"):(this.oa++,this.oa>=1&&(this.Pa(),this.la(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.ca("Offline")))}set(e){this.Pa(),this.oa=0,e==="Online"&&(this.aa=!1),this.ca(e)}ca(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}la(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.aa?(Or(n),this.aa=!1):J("OnlineStateTracker",n)}Pa(){this._a!==null&&(this._a.cancel(),this._a=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ds="RemoteStore";class u4{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.Ta=[],this.Ia=new Map,this.Ea=new Set,this.da=[],this.Aa=s,this.Aa.Oo(o=>{r.enqueueAndForget(async()=>{ks(this)&&(J(ds,"Restarting streams for network reachability change."),await async function(u){const c=fe(u);c.Ea.add(4),await Pl(c),c.Ra.set("Unknown"),c.Ea.delete(4),await Nh(c)}(this))})}),this.Ra=new l4(r,i)}}async function Nh(t){if(ks(t))for(const e of t.da)await e(!0)}async function Pl(t){for(const e of t.da)await e(!1)}function Hk(t,e){const n=fe(t);n.Ia.has(e.targetId)||(n.Ia.set(e.targetId,e),mg(n)?pg(n):Lo(n).O_()&&fg(n,e))}function dg(t,e){const n=fe(t),r=Lo(n);n.Ia.delete(e),r.O_()&&Wk(n,e),n.Ia.size===0&&(r.O_()?r.L_():ks(n)&&n.Ra.set("Unknown"))}function fg(t,e){if(t.Va.Ue(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(de.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Lo(t).Y_(e)}function Wk(t,e){t.Va.Ue(e),Lo(t).Z_(e)}function pg(t){t.Va=new rD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),At:e=>t.Ia.get(e)||null,ht:()=>t.datastore.serializer.databaseId}),Lo(t).start(),t.Ra.ua()}function mg(t){return ks(t)&&!Lo(t).x_()&&t.Ia.size>0}function ks(t){return fe(t).Ea.size===0}function Gk(t){t.Va=void 0}async function c4(t){t.Ra.set("Online")}async function h4(t){t.Ia.forEach((e,n)=>{fg(t,e)})}async function d4(t,e){Gk(t),mg(t)?(t.Ra.ha(e),pg(t)):t.Ra.set("Unknown")}async function f4(t,e,n){if(t.Ra.set("Online"),e instanceof Rk&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const a of s.targetIds)i.Ia.has(a)&&(await i.remoteSyncer.rejectListen(a,o),i.Ia.delete(a),i.Va.removeTarget(a))}(t,e)}catch(r){J(ds,"Failed to remove targets %s: %s ",e.targetIds.join(","),r),await Vc(t,r)}else if(e instanceof Ku?t.Va.Ze(e):e instanceof Nk?t.Va.st(e):t.Va.tt(e),!n.isEqual(de.min()))try{const r=await Bk(t.localStore);n.compareTo(r)>=0&&await function(s,o){const a=s.Va.Tt(o);return a.targetChanges.forEach((u,c)=>{if(u.resumeToken.approximateByteSize()>0){const d=s.Ia.get(c);d&&s.Ia.set(c,d.withResumeToken(u.resumeToken,o))}}),a.targetMismatches.forEach((u,c)=>{const d=s.Ia.get(u);if(!d)return;s.Ia.set(u,d.withResumeToken(vt.EMPTY_BYTE_STRING,d.snapshotVersion)),Wk(s,u);const f=new ii(d.target,u,c,d.sequenceNumber);fg(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(t,n)}catch(r){J(ds,"Failed to raise snapshot:",r),await Vc(t,r)}}async function Vc(t,e,n){if(!Oo(e))throw e;t.Ea.add(1),await Pl(t),t.Ra.set("Offline"),n||(n=()=>Bk(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{J(ds,"Retrying IndexedDB access"),await n(),t.Ea.delete(1),await Nh(t)})}function Kk(t,e){return e().catch(n=>Vc(t,n,e))}async function Rh(t){const e=fe(t),n=bi(e);let r=e.Ta.length>0?e.Ta[e.Ta.length-1].batchId:Zm;for(;p4(e);)try{const i=await QD(e.localStore,r);if(i===null){e.Ta.length===0&&n.L_();break}r=i.batchId,m4(e,i)}catch(i){await Vc(e,i)}Qk(e)&&Xk(e)}function p4(t){return ks(t)&&t.Ta.length<10}function m4(t,e){t.Ta.push(e);const n=bi(t);n.O_()&&n.X_&&n.ea(e.mutations)}function Qk(t){return ks(t)&&!bi(t).x_()&&t.Ta.length>0}function Xk(t){bi(t).start()}async function g4(t){bi(t).ra()}async function y4(t){const e=bi(t);for(const n of t.Ta)e.ea(n.mutations)}async function w4(t,e,n){const r=t.Ta.shift(),i=sg.from(r,e,n);await Kk(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Rh(t)}async function _4(t,e){e&&bi(t).X_&&await async function(r,i){if(function(o){return eD(o)&&o!==U.ABORTED}(i.code)){const s=r.Ta.shift();bi(r).B_(),await Kk(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Rh(r)}}(t,e),Qk(t)&&Xk(t)}async function xv(t,e){const n=fe(t);n.asyncQueue.verifyOperationInProgress(),J(ds,"RemoteStore received new credentials");const r=ks(n);n.Ea.add(3),await Pl(n),r&&n.Ra.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.Ea.delete(3),await Nh(n)}async function v4(t,e){const n=fe(t);e?(n.Ea.delete(2),await Nh(n)):e||(n.Ea.add(2),await Pl(n),n.Ra.set("Unknown"))}function Lo(t){return t.ma||(t.ma=function(n,r,i){const s=fe(n);return s.sa(),new i4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:c4.bind(null,t),t_:h4.bind(null,t),r_:d4.bind(null,t),H_:f4.bind(null,t)}),t.da.push(async e=>{e?(t.ma.B_(),mg(t)?pg(t):t.Ra.set("Unknown")):(await t.ma.stop(),Gk(t))})),t.ma}function bi(t){return t.fa||(t.fa=function(n,r,i){const s=fe(n);return s.sa(),new s4(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{Xo:()=>Promise.resolve(),t_:g4.bind(null,t),r_:_4.bind(null,t),ta:y4.bind(null,t),na:w4.bind(null,t)}),t.da.push(async e=>{e?(t.fa.B_(),await Rh(t)):(await t.fa.stop(),t.Ta.length>0&&(J(ds,`Stopping write stream with ${t.Ta.length} pending writes`),t.Ta=[]))})),t.fa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new Tr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,a=new gg(e,n,o,i,s);return a.start(r),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(U.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yg(t,e){if(Or("AsyncQueue",`${e}: ${t}`),Oo(t))return new G(U.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oo{static emptySet(e){return new oo(e.comparator)}constructor(e){this.comparator=e?(n,r)=>e(n,r)||ee.comparator(n.key,r.key):(n,r)=>ee.comparator(n.key,r.key),this.keyedMap=Ea(),this.sortedSet=new Ge(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof oo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new oo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ev{constructor(){this.ga=new Ge(ee.comparator)}track(e){const n=e.doc.key,r=this.ga.get(n);r?e.type!==0&&r.type===3?this.ga=this.ga.insert(n,e):e.type===3&&r.type!==1?this.ga=this.ga.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.ga=this.ga.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.ga=this.ga.remove(n):e.type===1&&r.type===2?this.ga=this.ga.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.ga=this.ga.insert(n,{type:2,doc:e.doc}):ae(63341,{Rt:e,pa:r}):this.ga=this.ga.insert(n,e)}ya(){const e=[];return this.ga.inorderTraversal((n,r)=>{e.push(r)}),e}}class So{constructor(e,n,r,i,s,o,a,u,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=u,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(a=>{o.push({type:0,doc:a})}),new So(e,n,oo.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Eh(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x4{constructor(){this.wa=void 0,this.Sa=[]}ba(){return this.Sa.some(e=>e.Da())}}class E4{constructor(){this.queries=kv(),this.onlineState="Unknown",this.Ca=new Set}terminate(){(function(n,r){const i=fe(n),s=i.queries;i.queries=kv(),s.forEach((o,a)=>{for(const u of a.Sa)u.onError(r)})})(this,new G(U.ABORTED,"Firestore shutting down"))}}function kv(){return new Es(t=>gk(t),Eh)}async function wg(t,e){const n=fe(t);let r=3;const i=e.query;let s=n.queries.get(i);s?!s.ba()&&e.Da()&&(r=2):(s=new x4,r=e.Da()?0:1);try{switch(r){case 0:s.wa=await n.onListen(i,!0);break;case 1:s.wa=await n.onListen(i,!1);break;case 2:await n.onFirstRemoteStoreListen(i)}}catch(o){const a=yg(o,`Initialization of query '${js(e.query)}' failed`);return void e.onError(a)}n.queries.set(i,s),s.Sa.push(e),e.va(n.onlineState),s.wa&&e.Fa(s.wa)&&vg(n)}async function _g(t,e){const n=fe(t),r=e.query;let i=3;const s=n.queries.get(r);if(s){const o=s.Sa.indexOf(e);o>=0&&(s.Sa.splice(o,1),s.Sa.length===0?i=e.Da()?0:1:!s.ba()&&e.Da()&&(i=2))}switch(i){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function k4(t,e){const n=fe(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const a of o.Sa)a.Fa(i)&&(r=!0);o.wa=i}}r&&vg(n)}function I4(t,e,n){const r=fe(t),i=r.queries.get(e);if(i)for(const s of i.Sa)s.onError(n);r.queries.delete(e)}function vg(t){t.Ca.forEach(e=>{e.next()})}var kp,Iv;(Iv=kp||(kp={})).Ma="default",Iv.Cache="cache";class xg{constructor(e,n,r){this.query=e,this.xa=n,this.Oa=!1,this.Na=null,this.onlineState="Unknown",this.options=r||{}}Fa(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new So(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.Oa?this.Ba(e)&&(this.xa.next(e),n=!0):this.La(e,this.onlineState)&&(this.ka(e),n=!0),this.Na=e,n}onError(e){this.xa.error(e)}va(e){this.onlineState=e;let n=!1;return this.Na&&!this.Oa&&this.La(this.Na,e)&&(this.ka(this.Na),n=!0),n}La(e,n){if(!e.fromCache||!this.Da())return!0;const r=n!=="Offline";return(!this.options.qa||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}Ba(e){if(e.docChanges.length>0)return!0;const n=this.Na&&this.Na.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}ka(e){e=So.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Oa=!0,this.xa.next(e)}Da(){return this.options.source!==kp.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yk{constructor(e){this.key=e}}class Jk{constructor(e){this.key=e}}class T4{constructor(e,n){this.query=e,this.Ya=n,this.Za=null,this.hasCachedResults=!1,this.current=!1,this.Xa=xe(),this.mutatedKeys=xe(),this.eu=yk(e),this.tu=new oo(this.eu)}get nu(){return this.Ya}ru(e,n){const r=n?n.iu:new Ev,i=n?n.tu:this.tu;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,a=!1;const u=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((d,f)=>{const m=i.get(d),g=kh(this.query,f)?f:null,_=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let P=!1;m&&g?m.data.isEqual(g.data)?_!==b&&(r.track({type:3,doc:g}),P=!0):this.su(m,g)||(r.track({type:2,doc:g}),P=!0,(u&&this.eu(g,u)>0||c&&this.eu(g,c)<0)&&(a=!0)):!m&&g?(r.track({type:0,doc:g}),P=!0):m&&!g&&(r.track({type:1,doc:m}),P=!0,(u||c)&&(a=!0)),P&&(g?(o=o.add(g),s=b?s.add(d):s.delete(d)):(o=o.delete(d),s=s.delete(d)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const d=this.query.limitType==="F"?o.last():o.first();o=o.delete(d.key),s=s.delete(d.key),r.track({type:1,doc:d})}return{tu:o,iu:r,Cs:a,mutatedKeys:s}}su(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r,i){const s=this.tu;this.tu=e.tu,this.mutatedKeys=e.mutatedKeys;const o=e.iu.ya();o.sort((d,f)=>function(g,_){const b=P=>{switch(P){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ae(20277,{Rt:P})}};return b(g)-b(_)}(d.type,f.type)||this.eu(d.doc,f.doc)),this.ou(r),i=i??!1;const a=n&&!i?this._u():[],u=this.Xa.size===0&&this.current&&!i?1:0,c=u!==this.Za;return this.Za=u,o.length!==0||c?{snapshot:new So(this.query,e.tu,s,o,e.mutatedKeys,u===0,c,!1,!!r&&r.resumeToken.approximateByteSize()>0),au:a}:{au:a}}va(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({tu:this.tu,iu:new Ev,mutatedKeys:this.mutatedKeys,Cs:!1},!1)):{au:[]}}uu(e){return!this.Ya.has(e)&&!!this.tu.has(e)&&!this.tu.get(e).hasLocalMutations}ou(e){e&&(e.addedDocuments.forEach(n=>this.Ya=this.Ya.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.Ya=this.Ya.delete(n)),this.current=e.current)}_u(){if(!this.current)return[];const e=this.Xa;this.Xa=xe(),this.tu.forEach(r=>{this.uu(r.key)&&(this.Xa=this.Xa.add(r.key))});const n=[];return e.forEach(r=>{this.Xa.has(r)||n.push(new Jk(r))}),this.Xa.forEach(r=>{e.has(r)||n.push(new Yk(r))}),n}cu(e){this.Ya=e.Qs,this.Xa=xe();const n=this.ru(e.documents);return this.applyChanges(n,!0)}lu(){return So.fromInitialDocuments(this.query,this.tu,this.mutatedKeys,this.Za===0,this.hasCachedResults)}}const Eg="SyncEngine";class b4{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class S4{constructor(e){this.key=e,this.hu=!1}}class A4{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Pu={},this.Tu=new Es(a=>gk(a),Eh),this.Iu=new Map,this.Eu=new Set,this.du=new Ge(ee.comparator),this.Au=new Map,this.Ru=new lg,this.Vu={},this.mu=new Map,this.fu=bo.cr(),this.onlineState="Unknown",this.gu=void 0}get isPrimaryClient(){return this.gu===!0}}async function C4(t,e,n=!0){const r=iI(t);let i;const s=r.Tu.get(e);return s?(r.sharedClientState.addLocalQueryTarget(s.targetId),i=s.view.lu()):i=await Zk(r,e,n,!0),i}async function N4(t,e){const n=iI(t);await Zk(n,e,!0,!1)}async function Zk(t,e,n,r){const i=await XD(t.localStore,lr(e)),s=i.targetId,o=t.sharedClientState.addLocalQueryTarget(s,n);let a;return r&&(a=await R4(t,e,s,o==="current",i.resumeToken)),t.isPrimaryClient&&n&&Hk(t.remoteStore,i),a}async function R4(t,e,n,r,i){t.pu=(f,m,g)=>async function(b,P,x,k){let E=P.view.ru(x);E.Cs&&(E=await gv(b.localStore,P.query,!1).then(({documents:v})=>P.view.ru(v,E)));const O=k&&k.targetChanges.get(P.targetId),M=k&&k.targetMismatches.get(P.targetId)!=null,D=P.view.applyChanges(E,b.isPrimaryClient,O,M);return bv(b,P.targetId,D.au),D.snapshot}(t,f,m,g);const s=await gv(t.localStore,e,!0),o=new T4(e,s.Qs),a=o.ru(s.documents),u=Rl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(a,t.isPrimaryClient,u);bv(t,n,c.au);const d=new b4(e,n,o);return t.Tu.set(e,d),t.Iu.has(n)?t.Iu.get(n).push(e):t.Iu.set(n,[e]),c.snapshot}async function P4(t,e,n){const r=fe(t),i=r.Tu.get(e),s=r.Iu.get(i.targetId);if(s.length>1)return r.Iu.set(i.targetId,s.filter(o=>!Eh(o,e))),void r.Tu.delete(e);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(i.targetId),r.sharedClientState.isActiveQueryTarget(i.targetId)||await xp(r.localStore,i.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(i.targetId),n&&dg(r.remoteStore,i.targetId),Ip(r,i.targetId)}).catch(jo)):(Ip(r,i.targetId),await xp(r.localStore,i.targetId,!0))}async function D4(t,e){const n=fe(t),r=n.Tu.get(e),i=n.Iu.get(r.targetId);n.isPrimaryClient&&i.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),dg(n.remoteStore,r.targetId))}async function j4(t,e,n){const r=z4(t);try{const i=await function(o,a){const u=fe(o),c=Oe.now(),d=a.reduce((g,_)=>g.add(_.key),xe());let f,m;return u.persistence.runTransaction("Locally write mutations","readwrite",g=>{let _=Lr(),b=xe();return u.Ns.getEntries(g,d).next(P=>{_=P,_.forEach((x,k)=>{k.isValidDocument()||(b=b.add(x))})}).next(()=>u.localDocuments.getOverlayedDocuments(g,_)).next(P=>{f=P;const x=[];for(const k of a){const E=Q2(k,f.get(k.key).overlayedDocument);E!=null&&x.push(new ji(k.key,E,uk(E.value.mapValue),Ut.exists(!0)))}return u.mutationQueue.addMutationBatch(g,c,x,a)}).next(P=>{m=P;const x=P.applyToLocalDocumentSet(f,b);return u.documentOverlayCache.saveOverlays(g,P.batchId,x)})}).then(()=>({batchId:m.batchId,changes:_k(f)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,a,u){let c=o.Vu[o.currentUser.toKey()];c||(c=new Ge(ve)),c=c.insert(a,u),o.Vu[o.currentUser.toKey()]=c}(r,i.batchId,n),await Dl(r,i.changes),await Rh(r.remoteStore)}catch(i){const s=yg(i,"Failed to persist write");n.reject(s)}}async function eI(t,e){const n=fe(t);try{const r=await GD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.Au.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1,22616),i.addedDocuments.size>0?o.hu=!0:i.modifiedDocuments.size>0?Ae(o.hu,14607):i.removedDocuments.size>0&&(Ae(o.hu,42227),o.hu=!1))}),await Dl(n,r,e)}catch(r){await jo(r)}}function Tv(t,e,n){const r=fe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.Tu.forEach((s,o)=>{const a=o.view.va(e);a.snapshot&&i.push(a.snapshot)}),function(o,a){const u=fe(o);u.onlineState=a;let c=!1;u.queries.forEach((d,f)=>{for(const m of f.Sa)m.va(a)&&(c=!0)}),c&&vg(u)}(r.eventManager,e),i.length&&r.Pu.H_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function O4(t,e,n){const r=fe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.Au.get(e),s=i&&i.key;if(s){let o=new Ge(ee.comparator);o=o.insert(s,Nt.newNoDocument(s,de.min()));const a=xe().add(s),u=new Ah(de.min(),new Map,new Ge(ve),o,a);await eI(r,u),r.du=r.du.remove(s),r.Au.delete(e),kg(r)}else await xp(r.localStore,e,!1).then(()=>Ip(r,e,n)).catch(jo)}async function L4(t,e){const n=fe(t),r=e.batch.batchId;try{const i=await WD(n.localStore,e);nI(n,r,null),tI(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Dl(n,i)}catch(i){await jo(i)}}async function M4(t,e,n){const r=fe(t);try{const i=await function(o,a){const u=fe(o);return u.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let d;return u.mutationQueue.lookupMutationBatch(c,a).next(f=>(Ae(f!==null,37113),d=f.keys(),u.mutationQueue.removeMutationBatch(c,f))).next(()=>u.mutationQueue.performConsistencyCheck(c)).next(()=>u.documentOverlayCache.removeOverlaysForBatchId(c,d,a)).next(()=>u.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,d)).next(()=>u.localDocuments.getDocuments(c,d))})}(r.localStore,e);nI(r,e,n),tI(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Dl(r,i)}catch(i){await jo(i)}}function tI(t,e){(t.mu.get(e)||[]).forEach(n=>{n.resolve()}),t.mu.delete(e)}function nI(t,e,n){const r=fe(t);let i=r.Vu[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.Vu[r.currentUser.toKey()]=i}}function Ip(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Iu.get(e))t.Tu.delete(r),n&&t.Pu.yu(r,n);t.Iu.delete(e),t.isPrimaryClient&&t.Ru.jr(e).forEach(r=>{t.Ru.containsKey(r)||rI(t,r)})}function rI(t,e){t.Eu.delete(e.path.canonicalString());const n=t.du.get(e);n!==null&&(dg(t.remoteStore,n),t.du=t.du.remove(e),t.Au.delete(n),kg(t))}function bv(t,e,n){for(const r of n)r instanceof Yk?(t.Ru.addReference(r.key,e),V4(t,r)):r instanceof Jk?(J(Eg,"Document no longer in limbo: "+r.key),t.Ru.removeReference(r.key,e),t.Ru.containsKey(r.key)||rI(t,r.key)):ae(19791,{wu:r})}function V4(t,e){const n=e.key,r=n.path.canonicalString();t.du.get(n)||t.Eu.has(r)||(J(Eg,"New document in limbo: "+n),t.Eu.add(r),kg(t))}function kg(t){for(;t.Eu.size>0&&t.du.size<t.maxConcurrentLimboResolutions;){const e=t.Eu.values().next().value;t.Eu.delete(e);const n=new ee(Pe.fromString(e)),r=t.fu.next();t.Au.set(r,new S4(n)),t.du=t.du.insert(n,r),Hk(t.remoteStore,new ii(lr(xh(n.path)),r,"TargetPurposeLimboResolution",yh.ce))}}async function Dl(t,e,n){const r=fe(t),i=[],s=[],o=[];r.Tu.isEmpty()||(r.Tu.forEach((a,u)=>{o.push(r.pu(u,e,n).then(c=>{var d;if((c||n)&&r.isPrimaryClient){const f=c?!c.fromCache:(d=n==null?void 0:n.targetChanges.get(u.targetId))==null?void 0:d.current;r.sharedClientState.updateQueryState(u.targetId,f?"current":"not-current")}if(c){i.push(c);const f=cg.As(u.targetId,c);s.push(f)}}))}),await Promise.all(o),r.Pu.H_(i),await async function(u,c){const d=fe(u);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>$.forEach(c,m=>$.forEach(m.Es,g=>d.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>$.forEach(m.ds,g=>d.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Oo(f))throw f;J(hg,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=d.Ms.get(m),_=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(_);d.Ms=d.Ms.insert(m,b)}}}(r.localStore,s))}async function F4(t,e){const n=fe(t);if(!n.currentUser.isEqual(e)){J(Eg,"User change. New user:",e.toKey());const r=await zk(n.localStore,e);n.currentUser=e,function(s,o){s.mu.forEach(a=>{a.forEach(u=>{u.reject(new G(U.CANCELLED,o))})}),s.mu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Dl(n,r.Ls)}}function U4(t,e){const n=fe(t),r=n.Au.get(e);if(r&&r.hu)return xe().add(r.key);{let i=xe();const s=n.Iu.get(e);if(!s)return i;for(const o of s){const a=n.Tu.get(o);i=i.unionWith(a.view.nu)}return i}}function iI(t){const e=fe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eI.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=U4.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=O4.bind(null,e),e.Pu.H_=k4.bind(null,e.eventManager),e.Pu.yu=I4.bind(null,e.eventManager),e}function z4(t){const e=fe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=L4.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=M4.bind(null,e),e}class Fc{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=Ch(e.databaseInfo.databaseId),this.sharedClientState=this.Du(e),this.persistence=this.Cu(e),await this.persistence.start(),this.localStore=this.vu(e),this.gcScheduler=this.Fu(e,this.localStore),this.indexBackfillerScheduler=this.Mu(e,this.localStore)}Fu(e,n){return null}Mu(e,n){return null}vu(e){return HD(this.persistence,new BD,e.initialUser,this.serializer)}Cu(e){return new Uk(ug.mi,this.serializer)}Du(e){return new JD}async terminate(){var e,n;(e=this.gcScheduler)==null||e.stop(),(n=this.indexBackfillerScheduler)==null||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Fc.provider={build:()=>new Fc};class B4 extends Fc{constructor(e){super(),this.cacheSizeBytes=e}Fu(e,n){Ae(this.persistence.referenceDelegate instanceof Mc,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new SD(r,e.asyncQueue,n)}Cu(e){const n=this.cacheSizeBytes!==void 0?Kt.withCacheSize(this.cacheSizeBytes):Kt.DEFAULT;return new Uk(r=>Mc.mi(r,n),this.serializer)}}class Tp{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>Tv(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=F4.bind(null,this.syncEngine),await v4(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new E4}()}createDatastore(e){const n=Ch(e.databaseInfo.databaseId),r=function(s){return new r4(s)}(e.databaseInfo);return function(s,o,a,u){return new a4(s,o,a,u)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,a){return new u4(r,i,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,n=>Tv(this.syncEngine,n,0),function(){return _v.v()?new _v:new ZD}())}createSyncEngine(e,n){return function(i,s,o,a,u,c,d){const f=new A4(i,s,o,a,u,c);return d&&(f.gu=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}async terminate(){var e,n;await async function(i){const s=fe(i);J(ds,"RemoteStore shutting down."),s.Ea.add(5),await Pl(s),s.Aa.shutdown(),s.Ra.set("Unknown")}(this.remoteStore),(e=this.datastore)==null||e.terminate(),(n=this.eventManager)==null||n.terminate()}}Tp.provider={build:()=>new Tp};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Ou(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Ou(this.observer.error,e):Or("Uncaught Error in snapshot listener:",e.toString()))}Nu(){this.muted=!0}Ou(e,n){setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Si="FirestoreClient";class $4{constructor(e,n,r,i,s){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=At.UNAUTHENTICATED,this.clientId=mh.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(r,async o=>{J(Si,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(J(Si,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Tr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=yg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function Wd(t,e){t.asyncQueue.verifyOperationInProgress(),J(Si,"Initializing OfflineComponentProvider");const n=t.configuration;await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await zk(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function Sv(t,e){t.asyncQueue.verifyOperationInProgress();const n=await q4(t);J(Si,"Initializing OnlineComponentProvider"),await e.initialize(n,t.configuration),t.setCredentialChangeListener(r=>xv(e.remoteStore,r)),t.setAppCheckTokenChangeListener((r,i)=>xv(e.remoteStore,i)),t._onlineComponents=e}async function q4(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){J(Si,"Using user provided OfflineComponentProvider");try{await Wd(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!function(i){return i.name==="FirebaseError"?i.code===U.FAILED_PRECONDITION||i.code===U.UNIMPLEMENTED:!(typeof DOMException<"u"&&i instanceof DOMException)||i.code===22||i.code===20||i.code===11}(n))throw n;hs("Error using user provided cache. Falling back to memory cache: "+n),await Wd(t,new Fc)}}else J(Si,"Using default OfflineComponentProvider"),await Wd(t,new B4(void 0));return t._offlineComponents}async function sI(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(J(Si,"Using user provided OnlineComponentProvider"),await Sv(t,t._uninitializedComponentsProvider._online)):(J(Si,"Using default OnlineComponentProvider"),await Sv(t,new Tp))),t._onlineComponents}function H4(t){return sI(t).then(e=>e.syncEngine)}async function Uc(t){const e=await sI(t),n=e.eventManager;return n.onListen=C4.bind(null,e.syncEngine),n.onUnlisten=P4.bind(null,e.syncEngine),n.onFirstRemoteStoreListen=N4.bind(null,e.syncEngine),n.onLastRemoteStoreUnlisten=D4.bind(null,e.syncEngine),n}function W4(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new Ig({next:m=>{d.Nu(),o.enqueueAndForget(()=>_g(s,f));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new G(U.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&u&&u.source==="server"?c.reject(new G(U.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new xg(xh(a.path),d,{includeMetadataChanges:!0,qa:!0});return wg(s,f)}(await Uc(t),t.asyncQueue,e,n,r)),r.promise}function G4(t,e,n={}){const r=new Tr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,a,u,c){const d=new Ig({next:m=>{d.Nu(),o.enqueueAndForget(()=>_g(s,f)),m.fromCache&&u.source==="server"?c.reject(new G(U.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new xg(a,d,{includeMetadataChanges:!0,qa:!0});return wg(s,f)}(await Uc(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oI(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Av=new Map;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI="firestore.googleapis.com",Cv=!0;class Nv{constructor(e){if(e.host===void 0){if(e.ssl!==void 0)throw new G(U.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=aI,this.ssl=Cv}else this.host=e.host,this.ssl=e.ssl??Cv;if(this.isUsingEmulator=e.emulatorOptions!==void 0,this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=Fk;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<TD)throw new G(U.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}JE("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=oI(e.experimentalLongPollingOptions??{}),function(r){if(r.timeoutSeconds!==void 0){if(isNaN(r.timeoutSeconds))throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (must not be NaN)`);if(r.timeoutSeconds<5)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (minimum allowed value is 5)`);if(r.timeoutSeconds>30)throw new G(U.INVALID_ARGUMENT,`invalid long polling timeout: ${r.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Ph{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Nv({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new G(U.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new G(U.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Nv(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new XE;switch(r.type){case"firstParty":return new i2(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(U.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=Av.get(n);r&&(J("ComponentProvider","Removing Datastore"),Av.delete(n),r.terminate())}(this),Promise.resolve()}}function lI(t,e,n,r={}){var c;t=Rt(t,Ph);const i=Ri(e),s=t._getSettings(),o={...s,emulatorOptions:t._getEmulatorOptions()},a=`${e}:${n}`;i&&(Mm(`https://${a}`),Vm("Firestore",!0)),s.host!==aI&&s.host!==a&&hs("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const u={...s,host:a,ssl:i,emulatorOptions:r};if(!Pr(u,o)&&(t._setSettings(u),r.mockUserToken)){let d,f;if(typeof r.mockUserToken=="string")d=r.mockUserToken,f=At.MOCK_USER;else{d=iE(r.mockUserToken,(c=t._app)==null?void 0:c.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new G(U.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");f=new At(m)}t._authCredentials=new t2(new QE(d,f))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hn{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Hn(this.firestore,e,this._query)}}class qe{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new br(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new qe(this.firestore,e,this._key)}toJSON(){return{type:qe._jsonSchemaVersion,referencePath:this._key.toString()}}static fromJSON(e,n,r){if(Cl(n,qe._jsonSchema))return new qe(e,r||null,new ee(Pe.fromString(n.referencePath)))}}qe._jsonSchemaVersion="firestore/documentReference/1.0",qe._jsonSchema={type:ot("string",qe._jsonSchemaVersion),referencePath:ot("string")};class br extends Hn{constructor(e,n,r){super(e,n,xh(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new qe(this.firestore,null,new ee(e))}withConverter(e){return new br(this.firestore,e,this._path)}}function Ie(t,e,...n){if(t=Ve(t),YE("collection","path",e),t instanceof Ph){const r=Pe.fromString(e,...n);return q_(r),new br(t,null,r)}{if(!(t instanceof qe||t instanceof br))throw new G(U.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return q_(r),new br(t.firestore,null,r)}}function Xe(t,e,...n){if(t=Ve(t),arguments.length===1&&(e=mh.newId()),YE("doc","path",e),t instanceof Ph){const r=Pe.fromString(e,...n);return $_(r),new qe(t,null,new ee(r))}{if(!(t instanceof qe||t instanceof br))throw new G(U.INVALID_ARGUMENT,"Expected first argument to doc() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Pe.fromString(e,...n));return $_(r),new qe(t.firestore,t instanceof br?t.converter:null,new ee(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rv="AsyncQueue";class Pv{constructor(e=Promise.resolve()){this.Xu=[],this.ec=!1,this.tc=[],this.nc=null,this.rc=!1,this.sc=!1,this.oc=[],this.M_=new $k(this,"async_queue_retry"),this._c=()=>{const r=Hd();r&&J(Rv,"Visibility state changed to "+r.visibilityState),this.M_.w_()},this.ac=e;const n=Hd();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this._c)}get isShuttingDown(){return this.ec}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.uc(),this.cc(e)}enterRestrictedMode(e){if(!this.ec){this.ec=!0,this.sc=e||!1;const n=Hd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this._c)}}enqueue(e){if(this.uc(),this.ec)return new Promise(()=>{});const n=new Tr;return this.cc(()=>this.ec&&this.sc?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Xu.push(e),this.lc()))}async lc(){if(this.Xu.length!==0){try{await this.Xu[0](),this.Xu.shift(),this.M_.reset()}catch(e){if(!Oo(e))throw e;J(Rv,"Operation failed with retryable error: "+e)}this.Xu.length>0&&this.M_.p_(()=>this.lc())}}cc(e){const n=this.ac.then(()=>(this.rc=!0,e().catch(r=>{throw this.nc=r,this.rc=!1,Or("INTERNAL UNHANDLED ERROR: ",Dv(r)),r}).then(r=>(this.rc=!1,r))));return this.ac=n,n}enqueueAfterDelay(e,n,r){this.uc(),this.oc.indexOf(e)>-1&&(n=0);const i=gg.createAndSchedule(this,e,n,r,s=>this.hc(s));return this.tc.push(i),i}uc(){this.nc&&ae(47125,{Pc:Dv(this.nc)})}verifyOperationInProgress(){}async Tc(){let e;do e=this.ac,await e;while(e!==this.ac)}Ic(e){for(const n of this.tc)if(n.timerId===e)return!0;return!1}Ec(e){return this.Tc().then(()=>{this.tc.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.tc)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.Tc()})}dc(e){this.oc.push(e)}hc(e){const n=this.tc.indexOf(e);this.tc.splice(n,1)}}function Dv(t){let e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+`
`+t.stack),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jv(t){return function(n,r){if(typeof n!="object"||n===null)return!1;const i=n;for(const s of r)if(s in i&&typeof i[s]=="function")return!0;return!1}(t,["next","error","complete"])}class qn extends Ph{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=new Pv,this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new Pv(e),this._firestoreClient=void 0,await e}}}function uI(t,e){const n=typeof t=="object"?t:zm(),r=typeof t=="string"?t:Pc,i=ch(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=tE("firestore");s&&lI(i,...s)}return i}function Mo(t){if(t._terminated)throw new G(U.FAILED_PRECONDITION,"The client has already been terminated.");return t._firestoreClient||K4(t),t._firestoreClient}function K4(t){var r,i,s;const e=t._freezeSettings(),n=function(a,u,c,d){return new x2(a,u,c,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,oI(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(t._databaseId,((r=t._app)==null?void 0:r.options.appId)||"",t._persistenceKey,e);t._componentsProvider||(i=e.localCache)!=null&&i._offlineComponentProvider&&((s=e.localCache)!=null&&s._onlineComponentProvider)&&(t._componentsProvider={_offline:e.localCache._offlineComponentProvider,_online:e.localCache._onlineComponentProvider}),t._firestoreClient=new $4(t._authCredentials,t._appCheckCredentials,t._queue,n,t._componentsProvider&&function(a){const u=a==null?void 0:a._online.build();return{_offline:a==null?void 0:a._offline.build(u),_online:u}}(t._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e){this._byteString=e}static fromBase64String(e){try{return new un(vt.fromBase64String(e))}catch(n){throw new G(U.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new un(vt.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}toJSON(){return{type:un._jsonSchemaVersion,bytes:this.toBase64()}}static fromJSON(e){if(Cl(e,un._jsonSchema))return un.fromBase64String(e.bytes)}}un._jsonSchemaVersion="firestore/bytes/1.0",un._jsonSchema={type:ot("string",un._jsonSchemaVersion),bytes:ot("string")};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vo{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(U.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new wt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oi{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vn{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(U.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(U.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}_compareTo(e){return ve(this._lat,e._lat)||ve(this._long,e._long)}toJSON(){return{latitude:this._lat,longitude:this._long,type:Vn._jsonSchemaVersion}}static fromJSON(e){if(Cl(e,Vn._jsonSchema))return new Vn(e.latitude,e.longitude)}}Vn._jsonSchemaVersion="firestore/geoPoint/1.0",Vn._jsonSchema={type:ot("string",Vn._jsonSchemaVersion),latitude:ot("number"),longitude:ot("number")};/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fn{constructor(e){this._values=(e||[]).map(n=>n)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(r,i){if(r.length!==i.length)return!1;for(let s=0;s<r.length;++s)if(r[s]!==i[s])return!1;return!0}(this._values,e._values)}toJSON(){return{type:Fn._jsonSchemaVersion,vectorValues:this._values}}static fromJSON(e){if(Cl(e,Fn._jsonSchema)){if(Array.isArray(e.vectorValues)&&e.vectorValues.every(n=>typeof n=="number"))return new Fn(e.vectorValues);throw new G(U.INVALID_ARGUMENT,"Expected 'vectorValues' field to be a number array")}}}Fn._jsonSchemaVersion="firestore/vectorValue/1.0",Fn._jsonSchema={type:ot("string",Fn._jsonSchemaVersion),vectorValues:ot("object")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Q4=/^__.*__$/;class X4{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new ji(e,this.data,this.fieldMask,n,this.fieldTransforms):new Nl(e,this.data,n,this.fieldTransforms)}}class cI{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return new ji(e,this.data,this.fieldMask,n,this.fieldTransforms)}}function hI(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ae(40011,{Ac:t})}}class Dh{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.Rc(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Ac(){return this.settings.Ac}Vc(e){return new Dh({...this.settings,...e},this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}mc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.gc(e),r}yc(e){var i;const n=(i=this.path)==null?void 0:i.child(e),r=this.Vc({path:n,fc:!1});return r.Rc(),r}wc(e){return this.Vc({path:void 0,fc:!0})}Sc(e){return zc(e,this.settings.methodName,this.settings.bc||!1,this.path,this.settings.Dc)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}Rc(){if(this.path)for(let e=0;e<this.path.length;e++)this.gc(this.path.get(e))}gc(e){if(e.length===0)throw this.Sc("Document fields must not be empty");if(hI(this.Ac)&&Q4.test(e))throw this.Sc('Document fields cannot begin and end with "__"')}}class Y4{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ch(e)}Cc(e,n,r,i=!1){return new Dh({Ac:e,methodName:n,Dc:r,path:wt.emptyPath(),fc:!1,bc:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Fo(t){const e=t._freezeSettings(),n=Ch(t._databaseId);return new Y4(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Tg(t,e,n,r,i,s={}){const o=t.Cc(s.merge||s.mergeFields?2:0,e,n,i);Ng("Data must be an object, but it was:",o,r);const a=gI(r,o);let u,c;if(s.merge)u=new hn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const d=[];for(const f of s.mergeFields){const m=bp(e,f,n);if(!o.contains(m))throw new G(U.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);wI(d,m)||d.push(m)}u=new hn(d),c=o.fieldTransforms.filter(f=>u.covers(f.field))}else u=null,c=o.fieldTransforms;return new X4(new Xt(a),u,c)}class jh extends Oi{_toFieldTransform(e){if(e.Ac!==2)throw e.Ac===1?e.Sc(`${this._methodName}() can only appear at the top level of your update data`):e.Sc(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof jh}}function dI(t,e,n){return new Dh({Ac:3,Dc:e.settings.Dc,methodName:t._methodName,fc:n},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class bg extends Oi{_toFieldTransform(e){return new Th(e.path,new ml)}isEqual(e){return e instanceof bg}}class Sg extends Oi{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=dI(this,e,!0),r=this.vc.map(s=>Is(s,n)),i=new Io(r);return new Th(e.path,i)}isEqual(e){return e instanceof Sg&&Pr(this.vc,e.vc)}}class Ag extends Oi{constructor(e,n){super(e),this.vc=n}_toFieldTransform(e){const n=dI(this,e,!0),r=this.vc.map(s=>Is(s,n)),i=new To(r);return new Th(e.path,i)}isEqual(e){return e instanceof Ag&&Pr(this.vc,e.vc)}}class Cg extends Oi{constructor(e,n){super(e),this.Fc=n}_toFieldTransform(e){const n=new gl(e.serializer,Ek(e.serializer,this.Fc));return new Th(e.path,n)}isEqual(e){return e instanceof Cg&&this.Fc===e.Fc}}function fI(t,e,n,r){const i=t.Cc(1,e,n);Ng("Data must be an object, but it was:",i,r);const s=[],o=Xt.empty();Di(r,(u,c)=>{const d=Rg(e,u,n);c=Ve(c);const f=i.yc(d);if(c instanceof jh)s.push(d);else{const m=Is(c,f);m!=null&&(s.push(d),o.set(d,m))}});const a=new hn(s);return new cI(o,a,i.fieldTransforms)}function pI(t,e,n,r,i,s){const o=t.Cc(1,e,n),a=[bp(e,r,n)],u=[i];if(s.length%2!=0)throw new G(U.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(bp(e,s[m])),u.push(s[m+1]);const c=[],d=Xt.empty();for(let m=a.length-1;m>=0;--m)if(!wI(c,a[m])){const g=a[m];let _=u[m];_=Ve(_);const b=o.yc(g);if(_ instanceof jh)c.push(g);else{const P=Is(_,b);P!=null&&(c.push(g),d.set(g,P))}}const f=new hn(c);return new cI(d,f,o.fieldTransforms)}function mI(t,e,n,r=!1){return Is(n,t.Cc(r?4:3,e))}function Is(t,e){if(yI(t=Ve(t)))return Ng("Unsupported field value:",e,t),gI(t,e);if(t instanceof Oi)return function(r,i){if(!hI(i.Ac))throw i.Sc(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.Sc(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.fc&&e.Ac!==4)throw e.Sc("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const a of r){let u=Is(a,i.wc(o));u==null&&(u={nullValue:"NULL_VALUE"}),s.push(u),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=Ve(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return Ek(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Oe.fromDate(r);return{timestampValue:Lc(i.serializer,s)}}if(r instanceof Oe){const s=new Oe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Lc(i.serializer,s)}}if(r instanceof Vn)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof un)return{bytesValue:Pk(i.serializer,r._byteString)};if(r instanceof qe){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.Sc(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:ag(r.firestore._databaseId||i.databaseId,r._key.path)}}if(r instanceof Fn)return function(o,a){return{mapValue:{fields:{[ak]:{stringValue:lk},[Dc]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Sc("VectorValues must only contain numeric values.");return ig(a.serializer,c)})}}}}}}(r,i);throw i.Sc(`Unsupported field value: ${gh(r)}`)}(t,e)}function gI(t,e){const n={};return tk(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Di(t,(r,i)=>{const s=Is(i,e.mc(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function yI(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Oe||t instanceof Vn||t instanceof un||t instanceof qe||t instanceof Oi||t instanceof Fn)}function Ng(t,e,n){if(!yI(n)||!ZE(n)){const r=gh(n);throw r==="an object"?e.Sc(t+" a custom object"):e.Sc(t+" "+r)}}function bp(t,e,n){if((e=Ve(e))instanceof Vo)return e._internalPath;if(typeof e=="string")return Rg(t,e);throw zc("Field path arguments must be of type string or ",t,!1,void 0,n)}const J4=new RegExp("[~\\*/\\[\\]]");function Rg(t,e,n){if(e.search(J4)>=0)throw zc(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Vo(...e.split("."))._internalPath}catch{throw zc(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function zc(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let a=`Function ${e}() called with invalid data`;n&&(a+=" (via `toFirestore()`)"),a+=". ";let u="";return(s||o)&&(u+=" (found",s&&(u+=` in field ${r}`),o&&(u+=` in document ${i}`),u+=")"),new G(U.INVALID_ARGUMENT,a+t+u)}function wI(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new qe(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Z4(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(Oh("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class Z4 extends Pg{data(){return super.data()}}function Oh(t,e){return typeof e=="string"?Rg(t,e):e instanceof Vo?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _I(t){if(t.limitType==="L"&&t.explicitOrderBy.length===0)throw new G(U.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Dg{}class jl extends Dg{}function mn(t,e,...n){let r=[];e instanceof Dg&&r.push(e),r=r.concat(n),function(s){const o=s.filter(u=>u instanceof Lh).length,a=s.filter(u=>u instanceof Ol).length;if(o>1||o>0&&a>0)throw new G(U.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)t=i._apply(t);return t}class Ol extends jl{constructor(e,n,r){super(),this._field=e,this._op=n,this._value=r,this.type="where"}static _create(e,n,r){return new Ol(e,n,r)}_apply(e){const n=this._parse(e);return xI(e._query,n),new Hn(e.firestore,e.converter,gp(e._query,n))}_parse(e){const n=Fo(e.firestore);return function(s,o,a,u,c,d,f){let m;if(c.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new G(U.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){Lv(f,d);const _=[];for(const b of f)_.push(Ov(u,s,b));m={arrayValue:{values:_}}}else m=Ov(u,s,f)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||Lv(f,d),m=mI(a,o,f,d==="in"||d==="not-in");return st.create(c,d,m)}(e._query,"where",n,e.firestore._databaseId,this._field,this._op,this._value)}}function jg(t,e,n){const r=e,i=Oh("where",t);return Ol._create(i,r,n)}class Lh extends Dg{constructor(e,n){super(),this.type=e,this._queryConstraints=n}static _create(e,n){return new Lh(e,n)}_parse(e){const n=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:$n.create(n,this._getOperator())}_apply(e){const n=this._parse(e);return n.getFilters().length===0?e:(function(i,s){let o=i;const a=s.getFlattenedFilters();for(const u of a)xI(o,u),o=gp(o,u)}(e._query,n),new Hn(e.firestore,e.converter,gp(e._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class Mh extends jl{constructor(e,n){super(),this._field=e,this._direction=n,this.type="orderBy"}static _create(e,n){return new Mh(e,n)}_apply(e){const n=function(i,s,o){if(i.startAt!==null)throw new G(U.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(i.endAt!==null)throw new G(U.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new pl(s,o)}(e._query,this._field,this._direction);return new Hn(e.firestore,e.converter,function(i,s){const o=i.explicitOrderBy.concat([s]);return new xs(i.path,i.collectionGroup,o,i.filters.slice(),i.limit,i.limitType,i.startAt,i.endAt)}(e._query,n))}}function Un(t,e="asc"){const n=e,r=Oh("orderBy",t);return Mh._create(r,n)}class Vh extends jl{constructor(e,n,r){super(),this.type=e,this._limit=n,this._limitType=r}static _create(e,n,r){return new Vh(e,n,r)}_apply(e){return new Hn(e.firestore,e.converter,Oc(e._query,this._limit,this._limitType))}}function Bc(t){return c2("limit",t),Vh._create("limit",t,"F")}class Fh extends jl{constructor(e,n,r){super(),this.type=e,this._docOrFields=n,this._inclusive=r}static _create(e,n,r){return new Fh(e,n,r)}_apply(e){const n=ej(e,this.type,this._docOrFields,this._inclusive);return new Hn(e.firestore,e.converter,function(i,s){return new xs(i.path,i.collectionGroup,i.explicitOrderBy.slice(),i.filters.slice(),i.limit,i.limitType,s,i.endAt)}(e._query,n))}}function vI(...t){return Fh._create("startAfter",t,!1)}function ej(t,e,n,r){if(n[0]=Ve(n[0]),n[0]instanceof Pg)return function(s,o,a,u,c){if(!u)throw new G(U.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${a}().`);const d=[];for(const f of so(s))if(f.field.isKeyField())d.push(jc(o,u.key));else{const m=u.data.field(f.field);if(_h(m))throw new G(U.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+f.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(m===null){const g=f.field.canonicalString();throw new G(U.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${g}' (used as the orderBy) does not exist.`)}d.push(m)}return new ko(d,c)}(t._query,t.firestore._databaseId,e,n[0]._document,r);{const i=Fo(t.firestore);return function(o,a,u,c,d,f){const m=o.explicitOrderBy;if(d.length>m.length)throw new G(U.INVALID_ARGUMENT,`Too many arguments provided to ${c}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const g=[];for(let _=0;_<d.length;_++){const b=d[_];if(m[_].field.isKeyField()){if(typeof b!="string")throw new G(U.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${c}(), but got a ${typeof b}`);if(!rg(o)&&b.indexOf("/")!==-1)throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${c}() must be a plain document ID, but '${b}' contains a slash.`);const P=o.path.child(Pe.fromString(b));if(!ee.isDocumentKey(P))throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${c}() must result in a valid document path, but '${P}' is not because it contains an odd number of segments.`);const x=new ee(P);g.push(jc(a,x))}else{const P=mI(u,c,b);g.push(P)}}return new ko(g,f)}(t._query,t.firestore._databaseId,i,e,n,r)}}function Ov(t,e,n){if(typeof(n=Ve(n))=="string"){if(n==="")throw new G(U.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!rg(e)&&n.indexOf("/")!==-1)throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=e.path.child(Pe.fromString(n));if(!ee.isDocumentKey(r))throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return jc(t,new ee(r))}if(n instanceof qe)return jc(t,n._key);throw new G(U.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${gh(n)}.`)}function Lv(t,e){if(!Array.isArray(t)||t.length===0)throw new G(U.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xI(t,e){const n=function(i,s){for(const o of i)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(t.filters,function(i){switch(i){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(n!==null)throw n===e.op?new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new G(U.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${n.toString()}' filters.`)}class EI{convertValue(e,n="none"){switch(Ti(e)){case 0:return null;case 1:return e.booleanValue;case 2:return et(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(Ii(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 11:return this.convertObject(e.mapValue,n);case 10:return this.convertVectorValue(e.mapValue);default:throw ae(62114,{value:e})}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Di(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertVectorValue(e){var r,i,s;const n=(s=(i=(r=e.fields)==null?void 0:r[Dc].arrayValue)==null?void 0:i.values)==null?void 0:s.map(o=>et(o.doubleValue));return new Fn(n)}convertGeoPoint(e){return new Vn(et(e.latitude),et(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=vh(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(dl(e));default:return null}}convertTimestamp(e){const n=ki(e);return new Oe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Pe.fromString(e);Ae(Vk(r),9688,{name:e});const i=new vo(r.get(1),r.get(3)),s=new ee(r.popFirst(5));return i.isEqual(n)||Or(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Og(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}class Qs{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yi extends Pg{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new Fa(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(Oh("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"DocumentSnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e=this._document,n={};return n.type=yi._jsonSchemaVersion,n.bundle="",n.bundleSource="DocumentSnapshot",n.bundleName=this._key.toString(),!e||!e.isValidDocument()||!e.isFoundDocument()?n:(this._userDataWriter.convertObjectMap(e.data.value.mapValue.fields,"previous"),n.bundle=(this._firestore,this.ref.path,"NOT SUPPORTED"),n)}}yi._jsonSchemaVersion="firestore/documentSnapshot/1.0",yi._jsonSchema={type:ot("string",yi._jsonSchemaVersion),bundleSource:ot("string","DocumentSnapshot"),bundleName:ot("string"),bundle:ot("string")};class Fa extends yi{data(e={}){return super.data(e)}}class wi{constructor(e,n,r,i){this._firestore=e,this._userDataWriter=n,this._snapshot=i,this.metadata=new Qs(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(n=>e.push(n)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,n){this._snapshot.docs.forEach(r=>{e.call(n,new Fa(this._firestore,this._userDataWriter,r.key,r,new Qs(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const n=!!e.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new G(U.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(i,s){if(i._snapshot.oldDocs.isEmpty()){let o=0;return i._snapshot.docChanges.map(a=>{const u=new Fa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);return a.doc,{type:"added",doc:u,oldIndex:-1,newIndex:o++}})}{let o=i._snapshot.oldDocs;return i._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const u=new Fa(i._firestore,i._userDataWriter,a.doc.key,a.doc,new Qs(i._snapshot.mutatedKeys.has(a.doc.key),i._snapshot.fromCache),i.query.converter);let c=-1,d=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),d=o.indexOf(a.doc.key)),{type:tj(a.type),doc:u,oldIndex:c,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}toJSON(){if(this.metadata.hasPendingWrites)throw new G(U.FAILED_PRECONDITION,"QuerySnapshot.toJSON() attempted to serialize a document with pending writes. Await waitForPendingWrites() before invoking toJSON().");const e={};e.type=wi._jsonSchemaVersion,e.bundleSource="QuerySnapshot",e.bundleName=mh.newId(),this._firestore._databaseId.database,this._firestore._databaseId.projectId;const n=[],r=[],i=[];return this.docs.forEach(s=>{s._document!==null&&(n.push(s._document),r.push(this._userDataWriter.convertObjectMap(s._document.data.value.mapValue.fields,"previous")),i.push(s.ref.path))}),e.bundle=(this._firestore,this.query._query,e.bundleName,"NOT SUPPORTED"),e}}function tj(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ae(61501,{type:t})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ll(t){t=Rt(t,qe);const e=Rt(t.firestore,qn);return W4(Mo(e),t._key).then(n=>kI(e,t,n))}wi._jsonSchemaVersion="firestore/querySnapshot/1.0",wi._jsonSchema={type:ot("string",wi._jsonSchemaVersion),bundleSource:ot("string","QuerySnapshot"),bundleName:ot("string"),bundle:ot("string")};class Lg extends EI{constructor(e){super(),this.firestore=e}convertBytes(e){return new un(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new qe(this.firestore,null,n)}}function dt(t){t=Rt(t,Hn);const e=Rt(t.firestore,qn),n=Mo(e),r=new Lg(e);return _I(t._query),G4(n,t._query).then(i=>new wi(e,r,t,i))}function Uh(t,e,n){t=Rt(t,qe);const r=Rt(t.firestore,qn),i=Og(t.converter,e,n);return Uo(r,[Tg(Fo(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Ut.none())])}function fs(t,e,n,...r){t=Rt(t,qe);const i=Rt(t.firestore,qn),s=Fo(i);let o;return o=typeof(e=Ve(e))=="string"||e instanceof Vo?pI(s,"updateDoc",t._key,e,n,r):fI(s,"updateDoc",t._key,e),Uo(i,[o.toMutation(t._key,Ut.exists(!0))])}function Ao(t){return Uo(Rt(t.firestore,qn),[new Sh(t._key,Ut.none())])}function Sr(t,e){const n=Rt(t.firestore,qn),r=Xe(t),i=Og(t.converter,e);return Uo(n,[Tg(Fo(t.firestore),"addDoc",r._key,i,t.converter!==null,{}).toMutation(r._key,Ut.exists(!1))]).then(()=>r)}function Ml(t,...e){var u,c,d;t=Ve(t);let n={includeMetadataChanges:!1,source:"default"},r=0;typeof e[r]!="object"||jv(e[r])||(n=e[r++]);const i={includeMetadataChanges:n.includeMetadataChanges,source:n.source};if(jv(e[r])){const f=e[r];e[r]=(u=f.next)==null?void 0:u.bind(f),e[r+1]=(c=f.error)==null?void 0:c.bind(f),e[r+2]=(d=f.complete)==null?void 0:d.bind(f)}let s,o,a;if(t instanceof qe)o=Rt(t.firestore,qn),a=xh(t._key.path),s={next:f=>{e[r]&&e[r](kI(o,t,f))},error:e[r+1],complete:e[r+2]};else{const f=Rt(t,Hn);o=Rt(f.firestore,qn),a=f._query;const m=new Lg(o);s={next:g=>{e[r]&&e[r](new wi(o,m,f,g))},error:e[r+1],complete:e[r+2]},_I(t._query)}return function(m,g,_,b){const P=new Ig(b),x=new xg(g,P,_);return m.asyncQueue.enqueueAndForget(async()=>wg(await Uc(m),x)),()=>{P.Nu(),m.asyncQueue.enqueueAndForget(async()=>_g(await Uc(m),x))}}(Mo(o),a,i,s)}function Uo(t,e){return function(r,i){const s=new Tr;return r.asyncQueue.enqueueAndForget(async()=>j4(await H4(r),i,s)),s.promise}(Mo(t),e)}function kI(t,e,n){const r=n.docs.get(e._key),i=new Lg(t);return new yi(t,i,e._key,r,new Qs(n.hasPendingWrites,n.fromCache),e.converter)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class II{constructor(e,n){this._firestore=e,this._commitHandler=n,this._mutations=[],this._committed=!1,this._dataReader=Fo(e)}set(e,n,r){this._verifyNotCommitted();const i=Gd(e,this._firestore),s=Og(i.converter,n,r),o=Tg(this._dataReader,"WriteBatch.set",i._key,s,i.converter!==null,r);return this._mutations.push(o.toMutation(i._key,Ut.none())),this}update(e,n,r,...i){this._verifyNotCommitted();const s=Gd(e,this._firestore);let o;return o=typeof(n=Ve(n))=="string"||n instanceof Vo?pI(this._dataReader,"WriteBatch.update",s._key,n,r,i):fI(this._dataReader,"WriteBatch.update",s._key,n),this._mutations.push(o.toMutation(s._key,Ut.exists(!0))),this}delete(e){this._verifyNotCommitted();const n=Gd(e,this._firestore);return this._mutations=this._mutations.concat(new Sh(n._key,Ut.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new G(U.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function Gd(t,e){if((t=Ve(t)).firestore!==e)throw new G(U.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}function zh(){return new bg("serverTimestamp")}function nj(...t){return new Sg("arrayUnion",t)}function rj(...t){return new Ag("arrayRemove",t)}function Bh(t){return new Cg("increment",t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sp(t){return Mo(t=Rt(t,qn)),new II(t,e=>Uo(t,e))}(function(e,n=!0){(function(i){Do=i})(ws),ls(new xi("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),a=new qn(new n2(r.getProvider("auth-internal")),new s2(o,r.getProvider("app-check-internal")),function(c,d){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(U.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new vo(c.options.projectId,d)}(o,i),o);return s={useFetchStreams:n,...s},a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),or(F_,U_,e),or(F_,U_,"esm2020")})();const ei=Object.freeze(Object.defineProperty({__proto__:null,AbstractUserDataWriter:EI,Bytes:un,CollectionReference:br,DocumentReference:qe,DocumentSnapshot:yi,FieldPath:Vo,FieldValue:Oi,Firestore:qn,FirestoreError:G,GeoPoint:Vn,Query:Hn,QueryCompositeFilterConstraint:Lh,QueryConstraint:jl,QueryDocumentSnapshot:Fa,QueryFieldFilterConstraint:Ol,QueryLimitConstraint:Vh,QueryOrderByConstraint:Mh,QuerySnapshot:wi,QueryStartAtConstraint:Fh,SnapshotMetadata:Qs,Timestamp:Oe,VectorValue:Fn,WriteBatch:II,_AutoId:mh,_ByteString:vt,_DatabaseId:vo,_DocumentKey:ee,_EmptyAuthCredentialsProvider:XE,_FieldPath:wt,_cast:Rt,_logWarn:hs,_validateIsNotUsedTogether:JE,addDoc:Sr,arrayRemove:rj,arrayUnion:nj,collection:Ie,connectFirestoreEmulator:lI,deleteDoc:Ao,doc:Xe,ensureFirestoreConfigured:Mo,executeWrite:Uo,getDoc:Ll,getDocs:dt,getFirestore:uI,increment:Bh,limit:Bc,onSnapshot:Ml,orderBy:Un,query:mn,serverTimestamp:zh,setDoc:Uh,startAfter:vI,updateDoc:fs,where:jg,writeBatch:Sp},Symbol.toStringTag,{value:"Module"}));/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const TI="firebasestorage.googleapis.com",bI="storageBucket",ij=2*60*1e3,sj=10*60*1e3;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Je extends dr{constructor(e,n,r=0){super(Kd(e),`Firebase Storage: ${n} (${Kd(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,Je.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return Kd(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.customData.serverResponse?this.message=`${this._baseMessage}
${this.customData.serverResponse}`:this.message=this._baseMessage}}var Ye;(function(t){t.UNKNOWN="unknown",t.OBJECT_NOT_FOUND="object-not-found",t.BUCKET_NOT_FOUND="bucket-not-found",t.PROJECT_NOT_FOUND="project-not-found",t.QUOTA_EXCEEDED="quota-exceeded",t.UNAUTHENTICATED="unauthenticated",t.UNAUTHORIZED="unauthorized",t.UNAUTHORIZED_APP="unauthorized-app",t.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",t.INVALID_CHECKSUM="invalid-checksum",t.CANCELED="canceled",t.INVALID_EVENT_NAME="invalid-event-name",t.INVALID_URL="invalid-url",t.INVALID_DEFAULT_BUCKET="invalid-default-bucket",t.NO_DEFAULT_BUCKET="no-default-bucket",t.CANNOT_SLICE_BLOB="cannot-slice-blob",t.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",t.NO_DOWNLOAD_URL="no-download-url",t.INVALID_ARGUMENT="invalid-argument",t.INVALID_ARGUMENT_COUNT="invalid-argument-count",t.APP_DELETED="app-deleted",t.INVALID_ROOT_OPERATION="invalid-root-operation",t.INVALID_FORMAT="invalid-format",t.INTERNAL_ERROR="internal-error",t.UNSUPPORTED_ENVIRONMENT="unsupported-environment"})(Ye||(Ye={}));function Kd(t){return"storage/"+t}function Mg(){const t="An unknown error occurred, please check the error payload for server response.";return new Je(Ye.UNKNOWN,t)}function oj(t){return new Je(Ye.OBJECT_NOT_FOUND,"Object '"+t+"' does not exist.")}function aj(t){return new Je(Ye.QUOTA_EXCEEDED,"Quota for bucket '"+t+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}function lj(){const t="User is not authenticated, please authenticate using Firebase Authentication and try again.";return new Je(Ye.UNAUTHENTICATED,t)}function uj(){return new Je(Ye.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}function cj(t){return new Je(Ye.UNAUTHORIZED,"User does not have permission to access '"+t+"'.")}function hj(){return new Je(Ye.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function dj(){return new Je(Ye.CANCELED,"User canceled the upload/download.")}function fj(t){return new Je(Ye.INVALID_URL,"Invalid URL '"+t+"'.")}function pj(t){return new Je(Ye.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+t+"'.")}function mj(){return new Je(Ye.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+bI+"' property when initializing the app?")}function gj(){return new Je(Ye.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function yj(){return new Je(Ye.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}function wj(t){return new Je(Ye.UNSUPPORTED_ENVIRONMENT,`${t} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}function Ap(t){return new Je(Ye.INVALID_ARGUMENT,t)}function SI(){return new Je(Ye.APP_DELETED,"The Firebase app was deleted.")}function _j(t){return new Je(Ye.INVALID_ROOT_OPERATION,"The operation '"+t+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function Ua(t,e){return new Je(Ye.INVALID_FORMAT,"String does not match format '"+t+"': "+e)}function ha(t){throw new Je(Ye.INTERNAL_ERROR,"Internal error: "+t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dn{constructor(e,n){this.bucket=e,this.path_=n}get path(){return this.path_}get isRoot(){return this.path.length===0}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,n){let r;try{r=dn.makeFromUrl(e,n)}catch{return new dn(e,"")}if(r.path==="")return r;throw pj(e)}static makeFromUrl(e,n){let r=null;const i="([A-Za-z0-9.\\-_]+)";function s(O){O.path.charAt(O.path.length-1)==="/"&&(O.path_=O.path_.slice(0,-1))}const o="(/(.*))?$",a=new RegExp("^gs://"+i+o,"i"),u={bucket:1,path:3};function c(O){O.path_=decodeURIComponent(O.path)}const d="v[A-Za-z0-9_]+",f=n.replace(/[.]/g,"\\."),m="(/([^?#]*).*)?$",g=new RegExp(`^https?://${f}/${d}/b/${i}/o${m}`,"i"),_={bucket:1,path:3},b=n===TI?"(?:storage.googleapis.com|storage.cloud.google.com)":n,P="([^?#]*)",x=new RegExp(`^https?://${b}/${i}/${P}`,"i"),E=[{regex:a,indices:u,postModify:s},{regex:g,indices:_,postModify:c},{regex:x,indices:{bucket:1,path:2},postModify:c}];for(let O=0;O<E.length;O++){const M=E[O],D=M.regex.exec(e);if(D){const v=D[M.indices.bucket];let w=D[M.indices.path];w||(w=""),r=new dn(v,w),M.postModify(r);break}}if(r==null)throw fj(e);return r}}class vj{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xj(t,e,n){let r=1,i=null,s=null,o=!1,a=0;function u(){return a===2}let c=!1;function d(...P){c||(c=!0,e.apply(null,P))}function f(P){i=setTimeout(()=>{i=null,t(g,u())},P)}function m(){s&&clearTimeout(s)}function g(P,...x){if(c){m();return}if(P){m(),d.call(null,P,...x);return}if(u()||o){m(),d.call(null,P,...x);return}r<64&&(r*=2);let E;a===1?(a=2,E=0):E=(r+Math.random())*1e3,f(E)}let _=!1;function b(P){_||(_=!0,m(),!c&&(i!==null?(P||(a=2),clearTimeout(i),f(0)):P||(a=1)))}return f(0),s=setTimeout(()=>{o=!0,b(!0)},n),b}function Ej(t){t(!1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kj(t){return t!==void 0}function Ij(t){return typeof t=="object"&&!Array.isArray(t)}function Vg(t){return typeof t=="string"||t instanceof String}function Mv(t){return Fg()&&t instanceof Blob}function Fg(){return typeof Blob<"u"}function Vv(t,e,n,r){if(r<e)throw Ap(`Invalid value for '${t}'. Expected ${e} or greater.`);if(r>n)throw Ap(`Invalid value for '${t}'. Expected ${n} or less.`)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ug(t,e,n){let r=e;return n==null&&(r=`https://${e}`),`${n}://${r}/v0${t}`}function AI(t){const e=encodeURIComponent;let n="?";for(const r in t)if(t.hasOwnProperty(r)){const i=e(r)+"="+e(t[r]);n=n+i+"&"}return n=n.slice(0,-1),n}var ns;(function(t){t[t.NO_ERROR=0]="NO_ERROR",t[t.NETWORK_ERROR=1]="NETWORK_ERROR",t[t.ABORT=2]="ABORT"})(ns||(ns={}));/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tj(t,e){const n=t>=500&&t<600,i=[408,429].indexOf(t)!==-1,s=e.indexOf(t)!==-1;return n||i||s}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bj{constructor(e,n,r,i,s,o,a,u,c,d,f,m=!0,g=!1){this.url_=e,this.method_=n,this.headers_=r,this.body_=i,this.successCodes_=s,this.additionalRetryCodes_=o,this.callback_=a,this.errorCallback_=u,this.timeout_=c,this.progressCallback_=d,this.connectionFactory_=f,this.retry=m,this.isUsingEmulator=g,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((_,b)=>{this.resolve_=_,this.reject_=b,this.start_()})}start_(){const e=(r,i)=>{if(i){r(!1,new xu(!1,null,!0));return}const s=this.connectionFactory_();this.pendingConnection_=s;const o=a=>{const u=a.loaded,c=a.lengthComputable?a.total:-1;this.progressCallback_!==null&&this.progressCallback_(u,c)};this.progressCallback_!==null&&s.addUploadProgressListener(o),s.send(this.url_,this.method_,this.isUsingEmulator,this.body_,this.headers_).then(()=>{this.progressCallback_!==null&&s.removeUploadProgressListener(o),this.pendingConnection_=null;const a=s.getErrorCode()===ns.NO_ERROR,u=s.getStatus();if(!a||Tj(u,this.additionalRetryCodes_)&&this.retry){const d=s.getErrorCode()===ns.ABORT;r(!1,new xu(!1,null,d));return}const c=this.successCodes_.indexOf(u)!==-1;r(!0,new xu(c,s))})},n=(r,i)=>{const s=this.resolve_,o=this.reject_,a=i.connection;if(i.wasSuccessCode)try{const u=this.callback_(a,a.getResponse());kj(u)?s(u):s()}catch(u){o(u)}else if(a!==null){const u=Mg();u.serverResponse=a.getErrorText(),this.errorCallback_?o(this.errorCallback_(a,u)):o(u)}else if(i.canceled){const u=this.appDelete_?SI():dj();o(u)}else{const u=hj();o(u)}};this.canceled_?n(!1,new xu(!1,null,!0)):this.backoffId_=xj(e,n,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,this.backoffId_!==null&&Ej(this.backoffId_),this.pendingConnection_!==null&&this.pendingConnection_.abort()}}class xu{constructor(e,n,r){this.wasSuccessCode=e,this.connection=n,this.canceled=!!r}}function Sj(t,e){e!==null&&e.length>0&&(t.Authorization="Firebase "+e)}function Aj(t,e){t["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}function Cj(t,e){e&&(t["X-Firebase-GMPID"]=e)}function Nj(t,e){e!==null&&(t["X-Firebase-AppCheck"]=e)}function Rj(t,e,n,r,i,s,o=!0,a=!1){const u=AI(t.urlParams),c=t.url+u,d=Object.assign({},t.headers);return Cj(d,e),Sj(d,n),Aj(d,s),Nj(d,r),new bj(c,t.method,d,t.body,t.successCodes,t.additionalRetryCodes,t.handler,t.errorHandler,t.timeout,t.progressCallback,i,o,a)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pj(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}function Dj(...t){const e=Pj();if(e!==void 0){const n=new e;for(let r=0;r<t.length;r++)n.append(t[r]);return n.getBlob()}else{if(Fg())return new Blob(t);throw new Je(Ye.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}}function jj(t,e,n){return t.webkitSlice?t.webkitSlice(e,n):t.mozSlice?t.mozSlice(e,n):t.slice?t.slice(e,n):null}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oj(t){if(typeof atob>"u")throw wj("base-64");return atob(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rr={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class Qd{constructor(e,n){this.data=e,this.contentType=n||null}}function Lj(t,e){switch(t){case rr.RAW:return new Qd(CI(e));case rr.BASE64:case rr.BASE64URL:return new Qd(NI(t,e));case rr.DATA_URL:return new Qd(Vj(e),Fj(e))}throw Mg()}function CI(t){const e=[];for(let n=0;n<t.length;n++){let r=t.charCodeAt(n);if(r<=127)e.push(r);else if(r<=2047)e.push(192|r>>6,128|r&63);else if((r&64512)===55296)if(!(n<t.length-1&&(t.charCodeAt(n+1)&64512)===56320))e.push(239,191,189);else{const s=r,o=t.charCodeAt(++n);r=65536|(s&1023)<<10|o&1023,e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|r&63)}else(r&64512)===56320?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|r&63)}return new Uint8Array(e)}function Mj(t){let e;try{e=decodeURIComponent(t)}catch{throw Ua(rr.DATA_URL,"Malformed data URL.")}return CI(e)}function NI(t,e){switch(t){case rr.BASE64:{const i=e.indexOf("-")!==-1,s=e.indexOf("_")!==-1;if(i||s)throw Ua(t,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case rr.BASE64URL:{const i=e.indexOf("+")!==-1,s=e.indexOf("/")!==-1;if(i||s)throw Ua(t,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let n;try{n=Oj(e)}catch(i){throw i.message.includes("polyfill")?i:Ua(t,"Invalid character found")}const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}class RI{constructor(e){this.base64=!1,this.contentType=null;const n=e.match(/^data:([^,]+)?,/);if(n===null)throw Ua(rr.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=n[1]||null;r!=null&&(this.base64=Uj(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}function Vj(t){const e=new RI(t);return e.base64?NI(rr.BASE64,e.rest):Mj(e.rest)}function Fj(t){return new RI(t).contentType}function Uj(t,e){return t.length>=e.length?t.substring(t.length-e.length)===e:!1}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ti{constructor(e,n){let r=0,i="";Mv(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(n?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(n?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,n){if(Mv(this.data_)){const r=this.data_,i=jj(r,e,n);return i===null?null:new ti(i)}else{const r=new Uint8Array(this.data_.buffer,e,n-e);return new ti(r,!0)}}static getBlob(...e){if(Fg()){const n=e.map(r=>r instanceof ti?r.data_:r);return new ti(Dj.apply(null,n))}else{const n=e.map(o=>Vg(o)?Lj(rr.RAW,o).data:o.data_);let r=0;n.forEach(o=>{r+=o.byteLength});const i=new Uint8Array(r);let s=0;return n.forEach(o=>{for(let a=0;a<o.length;a++)i[s++]=o[a]}),new ti(i,!0)}}uploadData(){return this.data_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PI(t){let e;try{e=JSON.parse(t)}catch{return null}return Ij(e)?e:null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zj(t){if(t.length===0)return null;const e=t.lastIndexOf("/");return e===-1?"":t.slice(0,e)}function Bj(t,e){const n=e.split("/").filter(r=>r.length>0).join("/");return t.length===0?n:t+"/"+n}function DI(t){const e=t.lastIndexOf("/",t.length-2);return e===-1?t:t.slice(e+1)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $j(t,e){return e}class Mt{constructor(e,n,r,i){this.server=e,this.local=n||e,this.writable=!!r,this.xform=i||$j}}let Eu=null;function qj(t){return!Vg(t)||t.length<2?t:DI(t)}function jI(){if(Eu)return Eu;const t=[];t.push(new Mt("bucket")),t.push(new Mt("generation")),t.push(new Mt("metageneration")),t.push(new Mt("name","fullPath",!0));function e(s,o){return qj(o)}const n=new Mt("name");n.xform=e,t.push(n);function r(s,o){return o!==void 0?Number(o):o}const i=new Mt("size");return i.xform=r,t.push(i),t.push(new Mt("timeCreated")),t.push(new Mt("updated")),t.push(new Mt("md5Hash",null,!0)),t.push(new Mt("cacheControl",null,!0)),t.push(new Mt("contentDisposition",null,!0)),t.push(new Mt("contentEncoding",null,!0)),t.push(new Mt("contentLanguage",null,!0)),t.push(new Mt("contentType",null,!0)),t.push(new Mt("metadata","customMetadata",!0)),Eu=t,Eu}function Hj(t,e){function n(){const r=t.bucket,i=t.fullPath,s=new dn(r,i);return e._makeStorageReference(s)}Object.defineProperty(t,"ref",{get:n})}function Wj(t,e,n){const r={};r.type="file";const i=n.length;for(let s=0;s<i;s++){const o=n[s];r[o.local]=o.xform(r,e[o.server])}return Hj(r,t),r}function OI(t,e,n){const r=PI(e);return r===null?null:Wj(t,r,n)}function Gj(t,e,n,r){const i=PI(e);if(i===null||!Vg(i.downloadTokens))return null;const s=i.downloadTokens;if(s.length===0)return null;const o=encodeURIComponent;return s.split(",").map(c=>{const d=t.bucket,f=t.fullPath,m="/b/"+o(d)+"/o/"+o(f),g=Ug(m,n,r),_=AI({alt:"media",token:c});return g+_})[0]}function Kj(t,e){const n={},r=e.length;for(let i=0;i<r;i++){const s=e[i];s.writable&&(n[s.server]=t[s.local])}return JSON.stringify(n)}class LI{constructor(e,n,r,i){this.url=e,this.method=n,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function MI(t){if(!t)throw Mg()}function Qj(t,e){function n(r,i){const s=OI(t,i,e);return MI(s!==null),s}return n}function Xj(t,e){function n(r,i){const s=OI(t,i,e);return MI(s!==null),Gj(s,i,t.host,t._protocol)}return n}function VI(t){function e(n,r){let i;return n.getStatus()===401?n.getErrorText().includes("Firebase App Check token is invalid")?i=uj():i=lj():n.getStatus()===402?i=aj(t.bucket):n.getStatus()===403?i=cj(t.path):i=r,i.status=n.getStatus(),i.serverResponse=r.serverResponse,i}return e}function Yj(t){const e=VI(t);function n(r,i){let s=e(r,i);return r.getStatus()===404&&(s=oj(t.path)),s.serverResponse=i.serverResponse,s}return n}function Jj(t,e,n){const r=e.fullServerUrl(),i=Ug(r,t.host,t._protocol),s="GET",o=t.maxOperationRetryTime,a=new LI(i,s,Xj(t,n),o);return a.errorHandler=Yj(e),a}function Zj(t,e){return t&&t.contentType||e&&e.type()||"application/octet-stream"}function eO(t,e,n){const r=Object.assign({},n);return r.fullPath=t.path,r.size=e.size(),r.contentType||(r.contentType=Zj(null,e)),r}function tO(t,e,n,r,i){const s=e.bucketOnlyServerUrl(),o={"X-Goog-Upload-Protocol":"multipart"};function a(){let E="";for(let O=0;O<2;O++)E=E+Math.random().toString().slice(2);return E}const u=a();o["Content-Type"]="multipart/related; boundary="+u;const c=eO(e,r,i),d=Kj(c,n),f="--"+u+`\r
Content-Type: application/json; charset=utf-8\r
\r
`+d+`\r
--`+u+`\r
Content-Type: `+c.contentType+`\r
\r
`,m=`\r
--`+u+"--",g=ti.getBlob(f,r,m);if(g===null)throw gj();const _={name:c.fullPath},b=Ug(s,t.host,t._protocol),P="POST",x=t.maxUploadRetryTime,k=new LI(b,P,Qj(t,n),x);return k.urlParams=_,k.headers=o,k.body=g.uploadData(),k.errorHandler=VI(e),k}class nO{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=ns.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=ns.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=ns.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,n,r,i,s){if(this.sent_)throw ha("cannot .send() more than once");if(Ri(e)&&r&&(this.xhr_.withCredentials=!0),this.sent_=!0,this.xhr_.open(n,e,!0),s!==void 0)for(const o in s)s.hasOwnProperty(o)&&this.xhr_.setRequestHeader(o,s[o].toString());return i!==void 0?this.xhr_.send(i):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw ha("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw ha("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw ha("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw ha("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){this.xhr_.upload!=null&&this.xhr_.upload.removeEventListener("progress",e)}}class rO extends nO{initXhr(){this.xhr_.responseType="text"}}function FI(){return new rO}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e,n){this._service=e,n instanceof dn?this._location=n:this._location=dn.makeFromUrl(n,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,n){return new ps(e,n)}get root(){const e=new dn(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return DI(this._location.path)}get storage(){return this._service}get parent(){const e=zj(this._location.path);if(e===null)return null;const n=new dn(this._location.bucket,e);return new ps(this._service,n)}_throwIfRoot(e){if(this._location.path==="")throw _j(e)}}function iO(t,e,n){t._throwIfRoot("uploadBytes");const r=tO(t.storage,t._location,jI(),new ti(e,!0),n);return t.storage.makeRequestWithTokens(r,FI).then(i=>({metadata:i,ref:t}))}function sO(t){t._throwIfRoot("getDownloadURL");const e=Jj(t.storage,t._location,jI());return t.storage.makeRequestWithTokens(e,FI).then(n=>{if(n===null)throw yj();return n})}function oO(t,e){const n=Bj(t._location.path,e),r=new dn(t._location.bucket,n);return new ps(t.storage,r)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aO(t){return/^[A-Za-z]+:\/\//.test(t)}function lO(t,e){return new ps(t,e)}function UI(t,e){if(t instanceof zg){const n=t;if(n._bucket==null)throw mj();const r=new ps(n,n._bucket);return e!=null?UI(r,e):r}else return e!==void 0?oO(t,e):t}function uO(t,e){if(e&&aO(e)){if(t instanceof zg)return lO(t,e);throw Ap("To use ref(service, url), the first argument must be a Storage instance.")}else return UI(t,e)}function Fv(t,e){const n=e==null?void 0:e[bI];return n==null?null:dn.makeFromBucketSpec(n,t)}function cO(t,e,n,r={}){t.host=`${e}:${n}`;const i=Ri(e);i&&(Mm(`https://${t.host}/b`),Vm("Storage",!0)),t._isUsingEmulator=!0,t._protocol=i?"https":"http";const{mockUserToken:s}=r;s&&(t._overrideAuthToken=typeof s=="string"?s:iE(s,t.app.options.projectId))}class zg{constructor(e,n,r,i,s,o=!1){this.app=e,this._authProvider=n,this._appCheckProvider=r,this._url=i,this._firebaseVersion=s,this._isUsingEmulator=o,this._bucket=null,this._host=TI,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=ij,this._maxUploadRetryTime=sj,this._requests=new Set,i!=null?this._bucket=dn.makeFromBucketSpec(i,this._host):this._bucket=Fv(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._url!=null?this._bucket=dn.makeFromBucketSpec(this._url,e):this._bucket=Fv(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Vv("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Vv("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}async _getAuthToken(){if(this._overrideAuthToken)return this._overrideAuthToken;const e=this._authProvider.getImmediate({optional:!0});if(e){const n=await e.getToken();if(n!==null)return n.accessToken}return null}async _getAppCheckToken(){if(ln(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const e=this._appCheckProvider.getImmediate({optional:!0});return e?(await e.getToken()).token:null}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new ps(this,e)}_makeRequest(e,n,r,i,s=!0){if(this._deleted)return new vj(SI());{const o=Rj(e,this._appId,r,i,n,this._firebaseVersion,s,this._isUsingEmulator);return this._requests.add(o),o.getPromise().then(()=>this._requests.delete(o),()=>this._requests.delete(o)),o}}async makeRequestWithTokens(e,n){const[r,i]=await Promise.all([this._getAuthToken(),this._getAppCheckToken()]);return this._makeRequest(e,n,r,i).getPromise()}}const Uv="@firebase/storage",zv="0.14.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zI="storage";function hO(t,e,n){return t=Ve(t),iO(t,e,n)}function dO(t){return t=Ve(t),sO(t)}function fO(t,e){return t=Ve(t),uO(t,e)}function pO(t=zm(),e){t=Ve(t);const r=ch(t,zI).getImmediate({identifier:e}),i=tE("storage");return i&&mO(r,...i),r}function mO(t,e,n,r={}){cO(t,e,n,r)}function gO(t,{instanceIdentifier:e}){const n=t.getProvider("app").getImmediate(),r=t.getProvider("auth-internal"),i=t.getProvider("app-check-internal");return new zg(n,r,i,e,ws)}function yO(){ls(new xi(zI,gO,"PUBLIC").setMultipleInstances(!0)),or(Uv,zv,""),or(Uv,zv,"esm2020")}yO();const wO={apiKey:"AIzaSyAK-Ot-50OeOtQdIuMHB7OrdANLLsI8g_Q",authDomain:"app-virtus-e960b.firebaseapp.com",projectId:"app-virtus-e960b",storageBucket:"app-virtus-e960b.firebasestorage.app",messagingSenderId:"489042960704",appId:"1:489042960704:web:6ed94a23b2151d60575aa5"},Bg=aE(wO),Ia=ZP(Bg),ie=uI(Bg),BI=pO(Bg),$I=new _r,da=Object.freeze(Object.defineProperty({__proto__:null,auth:Ia,db:ie,googleProvider:$I,storage:BI},Symbol.toStringTag,{value:"Module"})),qI=F.createContext();function _n(){return F.useContext(qI)}function _O({children:t}){const[e,n]=F.useState(null),[r,i]=F.useState(!0),[s,o]=F.useState([]);function a(){return lP(Ia,$I)}function u(b,P){return VR(Ia,b,P)}function c(){return BR(Ia)}async function d(b){if(e)try{const{db:P}=await Gt(async()=>{const{db:v}=await Promise.resolve().then(()=>da);return{db:v}},void 0,import.meta.url),{doc:x,updateDoc:k,arrayUnion:E,arrayRemove:O}=await Gt(async()=>{const{doc:v,updateDoc:w,arrayUnion:I,arrayRemove:S}=await Promise.resolve().then(()=>ei);return{doc:v,updateDoc:w,arrayUnion:I,arrayRemove:S}},void 0,import.meta.url),M=x(P,"users",e.uid);s.includes(b)?(await k(M,{savedPosts:O(b)}),o(v=>v.filter(w=>w!==b))):(await k(M,{savedPosts:E(b)}),o(v=>[...v,b]))}catch(P){console.error("Error toggling saved post:",P)}}async function f(b){if(e)try{const{db:P}=await Gt(async()=>{const{db:M}=await Promise.resolve().then(()=>da);return{db:M}},void 0,import.meta.url),{doc:x,updateDoc:k,increment:E}=await Gt(async()=>{const{doc:M,updateDoc:D,increment:v}=await Promise.resolve().then(()=>ei);return{doc:M,updateDoc:D,increment:v}},void 0,import.meta.url),O=x(P,"users",e.uid);await k(O,{xp:E(b)}),n(M=>({...M,xp:(M.xp||0)+b}))}catch(P){console.error("Error adding XP:",P)}}async function m(b){var P;if(e)try{const{db:x}=await Gt(async()=>{const{db:S}=await Promise.resolve().then(()=>da);return{db:S}},void 0,import.meta.url),{doc:k,updateDoc:E,arrayUnion:O,arrayRemove:M,increment:D}=await Gt(async()=>{const{doc:S,updateDoc:A,arrayUnion:R,arrayRemove:C,increment:te}=await Promise.resolve().then(()=>ei);return{doc:S,updateDoc:A,arrayUnion:R,arrayRemove:C,increment:te}},void 0,import.meta.url),v=k(x,"users",e.uid),w=k(x,"posts",b);((P=e.likedPosts)==null?void 0:P.includes(b))?(await E(v,{likedPosts:M(b)}),await E(w,{likes:D(-1)}),n(S=>({...S,likedPosts:S.likedPosts.filter(A=>A!==b)}))):(await E(v,{likedPosts:O(b)}),await E(w,{likes:D(1)}),n(S=>({...S,likedPosts:[...S.likedPosts||[],b]})))}catch(x){console.error("Error toggling like:",x)}}async function g(){if(e)try{const{db:b}=await Gt(async()=>{const{db:te}=await Promise.resolve().then(()=>da);return{db:te}},void 0,import.meta.url),{doc:P,updateDoc:x,getDoc:k,serverTimestamp:E,Timestamp:O}=await Gt(async()=>{const{doc:te,updateDoc:ne,getDoc:X,serverTimestamp:W,Timestamp:B}=await Promise.resolve().then(()=>ei);return{doc:te,updateDoc:ne,getDoc:X,serverTimestamp:W,Timestamp:B}},void 0,import.meta.url),M=P(b,"users",e.uid),D=await k(M);if(!D.exists())return;const v=D.data(),w=v.lastStreakDate?v.lastStreakDate.toDate():null,I=v.streak||0,S=new Date,A=new Date(S.getFullYear(),S.getMonth(),S.getDate());let R=I,C=!1;if(!w)R=1,C=!0;else{const te=new Date(w.getFullYear(),w.getMonth(),w.getDate()),ne=Math.abs(A-te),X=Math.ceil(ne/(1e3*60*60*24));X===1?(R=I+1,C=!0):X>1&&(R=1,C=!0)}C&&(await x(M,{streak:R,lastStreakDate:E()}),n(te=>({...te,streak:R})))}catch(b){console.error("Error updating streak:",b)}}F.useEffect(()=>zR(Ia,async P=>{if(P){const x=P.providerData.some(k=>k.providerId==="password");P.isAdmin=x;try{const{db:k}=await Gt(async()=>{const{db:S}=await Promise.resolve().then(()=>da);return{db:S}},void 0,import.meta.url),{doc:E,setDoc:O,getDoc:M,serverTimestamp:D,increment:v}=await Gt(async()=>{const{doc:S,setDoc:A,getDoc:R,serverTimestamp:C,increment:te}=await Promise.resolve().then(()=>ei);return{doc:S,setDoc:A,getDoc:R,serverTimestamp:C,increment:te}},void 0,import.meta.url),w=E(k,"users",P.uid),I=await M(w);if(I.exists()){const S=I.data();o(S.savedPosts||[]),P.xp=S.xp||0,P.joinDate=S.createdAt?S.createdAt.toDate():new Date,P.likedPosts=S.likedPosts||[]}else P.xp=0,P.likedPosts=[];if(await O(w,{uid:P.uid,email:P.email,displayName:P.displayName,photoURL:P.photoURL,lastLogin:D(),createdAt:I.exists()&&I.data().createdAt?I.data().createdAt:D(),isAdmin:x},{merge:!0}),!I.exists()){const S=E(k,"stats","global");await O(S,{totalUsers:v(1)},{merge:!0})}}catch(k){console.error("Error updating user in Firestore:",k)}}else o([]),e&&n(x=>({...x,likedPosts:[]}));n(P),i(!1)}),[]);const _={user:e,savedPosts:s,toggleSavePost:d,addXp:f,toggleLikePost:m,checkAndIncrementStreak:g,loginWithGoogle:a,loginWithEmail:u,logout:c};return h.jsx(qI.Provider,{value:_,children:!r&&t})}const yl=[{name:"INICIADO",min:0,color:"text-neutral-500"},{name:"ASSOCIADO",min:7,color:"text-neutral-400"},{name:"CAVALHEIRO",min:30,color:"text-neutral-300"},{name:"EMBAIXADOR",min:90,color:"text-neutral-200"},{name:"MINISTRO",min:180,color:"text-neutral-100"},{name:"SOBERANO",min:365,color:"text-white"}];function vO({activeTab:t,selectedCategory:e,setSelectedCategory:n,streak:r,userImage:i}){const{user:s}=useAuth(),[o,a]=F.useState(["PRINCIPAL"]);F.useEffect(()=>{const f=mn(Ie(ie,"categories"),Un("order","asc")),m=Ml(f,g=>{const _=g.docs.map(b=>b.data().name);a(["PRINCIPAL",..._])});return()=>m()},[]);const u={home:{title:"VIRTUS",subtitle:"SOCIEDADE PRIVADA"},networking:{title:"NETWORKING",subtitle:"CONEXES DE VALOR"},rituals:{title:"RITUAIS",subtitle:"DISCIPLINA DIRIA"},legacy:{title:"PERFIL",subtitle:"SUA JORNADA"}},{title:c,subtitle:d}=u[t]||u.home;return h.jsxs("header",{className:"px-8 pt-6 pb-4 bg-black sticky top-0 z-40 border-b border-white/5 backdrop-blur-sm bg-opacity-90",children:[h.jsxs("div",{className:"flex justify-between items-end mb-4",children:[h.jsxs("div",{children:[h.jsx("p",{className:"text-[9px] text-neutral-500 font-bold uppercase tracking-[0.3em] mb-1",children:d}),h.jsxs("h2",{className:"text-3xl font-light text-white uppercase tracking-[0.15em] leading-none",children:[c,h.jsx("span",{className:"text-neutral-600",children:"."})]})]}),h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsxs("div",{className:"flex items-center gap-1 bg-neutral-900/50 px-2 py-1 rounded-full border border-white/5",children:[h.jsx(Flame,{className:"w-3 h-3 text-orange-500 fill-orange-500"}),h.jsx("span",{className:"text-[10px] font-bold text-orange-500",children:r})]}),h.jsx("div",{className:"w-10 h-10 rounded-full border border-white/10 overflow-hidden",children:h.jsx("img",{src:i,alt:"Profile",className:"w-full h-full object-cover"})})]})]}),t==="home"&&h.jsx("div",{className:"flex gap-6 overflow-x-auto pb-2 scrollbar-hide -mx-8 px-8",children:o.map(f=>h.jsx("button",{onClick:()=>n(f),className:`
                  whitespace-nowrap pb-2 text-[9px] font-bold tracking-[0.2em] border-b-[1px] transition-all
                  ${e===f?"border-white text-white":"border-transparent text-neutral-600 hover:text-neutral-400"}
                `,children:f},f))})]})}function ku({icon:t,label:e,isActive:n,onClick:r}){return h.jsxs("button",{onClick:r,className:`flex flex-col items-center justify-center gap-3 transition-all duration-300 w-20
        ${n?"text-white":"text-neutral-700 hover:text-neutral-500"}`,children:[h.jsx("div",{className:`transition-transform duration-300 ${n?"-translate-y-1":""}`,children:$0.cloneElement(t,{size:18,strokeWidth:1})}),h.jsx("span",{className:`text-[8px] font-bold tracking-[0.2em] transition-opacity duration-300 ${n?"opacity-100":"opacity-0"}`,children:e})]})}function xO({activeTab:t,setActiveTab:e}){return h.jsx("nav",{className:"fixed bottom-0 w-full bg-black border-t border-white/5 pb-safe px-0 flex justify-center h-20 z-40",children:h.jsxs("div",{className:"flex w-full max-w-md justify-between px-8",children:[h.jsx(ku,{icon:h.jsx(qA,{}),label:"HOME",isActive:t==="home",onClick:()=>e("home")}),h.jsx(ku,{icon:h.jsx(ts,{}),label:"NETWORKING",isActive:t==="networking",onClick:()=>e("networking")}),h.jsx(ku,{icon:h.jsx(UA,{}),label:"RITUAIS",isActive:t==="rituals",onClick:()=>e("rituals")}),h.jsx(ku,{icon:h.jsx(ys,{}),label:"PERFIL",isActive:t==="legacy",onClick:()=>e("legacy")})]})})}function EO(t,e){const n={};return(t[t.length-1]===""?[...t,""]:t).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const kO=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,IO=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,TO={};function Bv(t,e){return(TO.jsx?IO:kO).test(t)}const bO=/[ \t\n\f\r]/g;function SO(t){return typeof t=="object"?t.type==="text"?$v(t.value):!1:$v(t)}function $v(t){return t.replace(bO,"")===""}class Vl{constructor(e,n,r){this.normal=n,this.property=e,r&&(this.space=r)}}Vl.prototype.normal={};Vl.prototype.property={};Vl.prototype.space=void 0;function HI(t,e){const n={},r={};for(const i of t)Object.assign(n,i.property),Object.assign(r,i.normal);return new Vl(n,r,e)}function Cp(t){return t.toLowerCase()}class nn{constructor(e,n){this.attribute=n,this.property=e}}nn.prototype.attribute="";nn.prototype.booleanish=!1;nn.prototype.boolean=!1;nn.prototype.commaOrSpaceSeparated=!1;nn.prototype.commaSeparated=!1;nn.prototype.defined=!1;nn.prototype.mustUseProperty=!1;nn.prototype.number=!1;nn.prototype.overloadedBoolean=!1;nn.prototype.property="";nn.prototype.spaceSeparated=!1;nn.prototype.space=void 0;let AO=0;const pe=Ts(),rt=Ts(),Np=Ts(),H=Ts(),je=Ts(),ao=Ts(),on=Ts();function Ts(){return 2**++AO}const Rp=Object.freeze(Object.defineProperty({__proto__:null,boolean:pe,booleanish:rt,commaOrSpaceSeparated:on,commaSeparated:ao,number:H,overloadedBoolean:Np,spaceSeparated:je},Symbol.toStringTag,{value:"Module"})),Xd=Object.keys(Rp);class $g extends nn{constructor(e,n,r,i){let s=-1;if(super(e,n),qv(this,"space",i),typeof r=="number")for(;++s<Xd.length;){const o=Xd[s];qv(this,Xd[s],(r&Rp[o])===Rp[o])}}}$g.prototype.defined=!0;function qv(t,e,n){n&&(t[e]=n)}function zo(t){const e={},n={};for(const[r,i]of Object.entries(t.properties)){const s=new $g(r,t.transform(t.attributes||{},r),i,t.space);t.mustUseProperty&&t.mustUseProperty.includes(r)&&(s.mustUseProperty=!0),e[r]=s,n[Cp(r)]=r,n[Cp(s.attribute)]=r}return new Vl(e,n,t.space)}const WI=zo({properties:{ariaActiveDescendant:null,ariaAtomic:rt,ariaAutoComplete:null,ariaBusy:rt,ariaChecked:rt,ariaColCount:H,ariaColIndex:H,ariaColSpan:H,ariaControls:je,ariaCurrent:null,ariaDescribedBy:je,ariaDetails:null,ariaDisabled:rt,ariaDropEffect:je,ariaErrorMessage:null,ariaExpanded:rt,ariaFlowTo:je,ariaGrabbed:rt,ariaHasPopup:null,ariaHidden:rt,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:je,ariaLevel:H,ariaLive:null,ariaModal:rt,ariaMultiLine:rt,ariaMultiSelectable:rt,ariaOrientation:null,ariaOwns:je,ariaPlaceholder:null,ariaPosInSet:H,ariaPressed:rt,ariaReadOnly:rt,ariaRelevant:null,ariaRequired:rt,ariaRoleDescription:je,ariaRowCount:H,ariaRowIndex:H,ariaRowSpan:H,ariaSelected:rt,ariaSetSize:H,ariaSort:null,ariaValueMax:H,ariaValueMin:H,ariaValueNow:H,ariaValueText:null,role:null},transform(t,e){return e==="role"?e:"aria-"+e.slice(4).toLowerCase()}});function GI(t,e){return e in t?t[e]:e}function KI(t,e){return GI(t,e.toLowerCase())}const CO=zo({attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ao,acceptCharset:je,accessKey:je,action:null,allow:null,allowFullScreen:pe,allowPaymentRequest:pe,allowUserMedia:pe,alt:null,as:null,async:pe,autoCapitalize:null,autoComplete:je,autoFocus:pe,autoPlay:pe,blocking:je,capture:null,charSet:null,checked:pe,cite:null,className:je,cols:H,colSpan:null,content:null,contentEditable:rt,controls:pe,controlsList:je,coords:H|ao,crossOrigin:null,data:null,dateTime:null,decoding:null,default:pe,defer:pe,dir:null,dirName:null,disabled:pe,download:Np,draggable:rt,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:pe,formTarget:null,headers:je,height:H,hidden:Np,high:H,href:null,hrefLang:null,htmlFor:je,httpEquiv:je,id:null,imageSizes:null,imageSrcSet:null,inert:pe,inputMode:null,integrity:null,is:null,isMap:pe,itemId:null,itemProp:je,itemRef:je,itemScope:pe,itemType:je,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:pe,low:H,manifest:null,max:null,maxLength:H,media:null,method:null,min:null,minLength:H,multiple:pe,muted:pe,name:null,nonce:null,noModule:pe,noValidate:pe,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:pe,optimum:H,pattern:null,ping:je,placeholder:null,playsInline:pe,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:pe,referrerPolicy:null,rel:je,required:pe,reversed:pe,rows:H,rowSpan:H,sandbox:je,scope:null,scoped:pe,seamless:pe,selected:pe,shadowRootClonable:pe,shadowRootDelegatesFocus:pe,shadowRootMode:null,shape:null,size:H,sizes:null,slot:null,span:H,spellCheck:rt,src:null,srcDoc:null,srcLang:null,srcSet:null,start:H,step:null,style:null,tabIndex:H,target:null,title:null,translate:null,type:null,typeMustMatch:pe,useMap:null,value:rt,width:H,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:je,axis:null,background:null,bgColor:null,border:H,borderColor:null,bottomMargin:H,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:pe,declare:pe,event:null,face:null,frame:null,frameBorder:null,hSpace:H,leftMargin:H,link:null,longDesc:null,lowSrc:null,marginHeight:H,marginWidth:H,noResize:pe,noHref:pe,noShade:pe,noWrap:pe,object:null,profile:null,prompt:null,rev:null,rightMargin:H,rules:null,scheme:null,scrolling:rt,standby:null,summary:null,text:null,topMargin:H,valueType:null,version:null,vAlign:null,vLink:null,vSpace:H,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:pe,disableRemotePlayback:pe,prefix:null,property:null,results:H,security:null,unselectable:null},space:"html",transform:KI}),NO=zo({attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},properties:{about:on,accentHeight:H,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:H,amplitude:H,arabicForm:null,ascent:H,attributeName:null,attributeType:null,azimuth:H,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:H,by:null,calcMode:null,capHeight:H,className:je,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:H,diffuseConstant:H,direction:null,display:null,dur:null,divisor:H,dominantBaseline:null,download:pe,dx:null,dy:null,edgeMode:null,editable:null,elevation:H,enableBackground:null,end:null,event:null,exponent:H,externalResourcesRequired:null,fill:null,fillOpacity:H,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ao,g2:ao,glyphName:ao,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:H,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:H,horizOriginX:H,horizOriginY:H,id:null,ideographic:H,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:H,k:H,k1:H,k2:H,k3:H,k4:H,kernelMatrix:on,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:H,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:H,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:H,overlineThickness:H,paintOrder:null,panose1:null,path:null,pathLength:H,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:je,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:H,pointsAtY:H,pointsAtZ:H,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:on,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:on,rev:on,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:on,requiredFeatures:on,requiredFonts:on,requiredFormats:on,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:H,specularExponent:H,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:H,strikethroughThickness:H,string:null,stroke:null,strokeDashArray:on,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:H,strokeOpacity:H,strokeWidth:null,style:null,surfaceScale:H,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:on,tabIndex:H,tableValues:null,target:null,targetX:H,targetY:H,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:on,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:H,underlineThickness:H,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:H,values:null,vAlphabetic:H,vMathematical:H,vectorEffect:null,vHanging:H,vIdeographic:H,version:null,vertAdvY:H,vertOriginX:H,vertOriginY:H,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:H,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null},space:"svg",transform:GI}),QI=zo({properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null},space:"xlink",transform(t,e){return"xlink:"+e.slice(5).toLowerCase()}}),XI=zo({attributes:{xmlnsxlink:"xmlns:xlink"},properties:{xmlnsXLink:null,xmlns:null},space:"xmlns",transform:KI}),YI=zo({properties:{xmlBase:null,xmlLang:null,xmlSpace:null},space:"xml",transform(t,e){return"xml:"+e.slice(3).toLowerCase()}}),RO={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},PO=/[A-Z]/g,Hv=/-[a-z]/g,DO=/^data[-\w.:]+$/i;function jO(t,e){const n=Cp(e);let r=e,i=nn;if(n in t.normal)return t.property[t.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&DO.test(e)){if(e.charAt(4)==="-"){const s=e.slice(5).replace(Hv,LO);r="data"+s.charAt(0).toUpperCase()+s.slice(1)}else{const s=e.slice(4);if(!Hv.test(s)){let o=s.replace(PO,OO);o.charAt(0)!=="-"&&(o="-"+o),e="data"+o}}i=$g}return new i(r,e)}function OO(t){return"-"+t.toLowerCase()}function LO(t){return t.charAt(1).toUpperCase()}const MO=HI([WI,CO,QI,XI,YI],"html"),qg=HI([WI,NO,QI,XI,YI],"svg");function VO(t){return t.join(" ").trim()}var Hg={},Wv=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,FO=/\n/g,UO=/^\s*/,zO=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,BO=/^:\s*/,$O=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,qO=/^[;\s]*/,HO=/^\s+|\s+$/g,WO=`
`,Gv="/",Kv="*",Wi="",GO="comment",KO="declaration";function QO(t,e){if(typeof t!="string")throw new TypeError("First argument must be a string");if(!t)return[];e=e||{};var n=1,r=1;function i(_){var b=_.match(FO);b&&(n+=b.length);var P=_.lastIndexOf(WO);r=~P?_.length-P:r+_.length}function s(){var _={line:n,column:r};return function(b){return b.position=new o(_),c(),b}}function o(_){this.start=_,this.end={line:n,column:r},this.source=e.source}o.prototype.content=t;function a(_){var b=new Error(e.source+":"+n+":"+r+": "+_);if(b.reason=_,b.filename=e.source,b.line=n,b.column=r,b.source=t,!e.silent)throw b}function u(_){var b=_.exec(t);if(b){var P=b[0];return i(P),t=t.slice(P.length),b}}function c(){u(UO)}function d(_){var b;for(_=_||[];b=f();)b!==!1&&_.push(b);return _}function f(){var _=s();if(!(Gv!=t.charAt(0)||Kv!=t.charAt(1))){for(var b=2;Wi!=t.charAt(b)&&(Kv!=t.charAt(b)||Gv!=t.charAt(b+1));)++b;if(b+=2,Wi===t.charAt(b-1))return a("End of comment missing");var P=t.slice(2,b-2);return r+=2,i(P),t=t.slice(b),r+=2,_({type:GO,comment:P})}}function m(){var _=s(),b=u(zO);if(b){if(f(),!u(BO))return a("property missing ':'");var P=u($O),x=_({type:KO,property:Qv(b[0].replace(Wv,Wi)),value:P?Qv(P[0].replace(Wv,Wi)):Wi});return u(qO),x}}function g(){var _=[];d(_);for(var b;b=m();)b!==!1&&(_.push(b),d(_));return _}return c(),g()}function Qv(t){return t?t.replace(HO,Wi):Wi}var XO=QO,YO=Yu&&Yu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Hg,"__esModule",{value:!0});Hg.default=ZO;const JO=YO(XO);function ZO(t,e){let n=null;if(!t||typeof t!="string")return n;const r=(0,JO.default)(t),i=typeof e=="function";return r.forEach(s=>{if(s.type!=="declaration")return;const{property:o,value:a}=s;i?e(o,a,s):a&&(n=n||{},n[o]=a)}),n}var $h={};Object.defineProperty($h,"__esModule",{value:!0});$h.camelCase=void 0;var eL=/^--[a-zA-Z0-9_-]+$/,tL=/-([a-z])/g,nL=/^[^-]+$/,rL=/^-(webkit|moz|ms|o|khtml)-/,iL=/^-(ms)-/,sL=function(t){return!t||nL.test(t)||eL.test(t)},oL=function(t,e){return e.toUpperCase()},Xv=function(t,e){return"".concat(e,"-")},aL=function(t,e){return e===void 0&&(e={}),sL(t)?t:(t=t.toLowerCase(),e.reactCompat?t=t.replace(iL,Xv):t=t.replace(rL,Xv),t.replace(tL,oL))};$h.camelCase=aL;var lL=Yu&&Yu.__importDefault||function(t){return t&&t.__esModule?t:{default:t}},uL=lL(Hg),cL=$h;function Pp(t,e){var n={};return!t||typeof t!="string"||(0,uL.default)(t,function(r,i){r&&i&&(n[(0,cL.camelCase)(r,e)]=i)}),n}Pp.default=Pp;var hL=Pp;const dL=Up(hL),JI=ZI("end"),Wg=ZI("start");function ZI(t){return e;function e(n){const r=n&&n.position&&n.position[t]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function fL(t){const e=Wg(t),n=JI(t);if(e&&n)return{start:e,end:n}}function za(t){return!t||typeof t!="object"?"":"position"in t||"type"in t?Yv(t.position):"start"in t||"end"in t?Yv(t):"line"in t||"column"in t?Dp(t):""}function Dp(t){return Jv(t&&t.line)+":"+Jv(t&&t.column)}function Yv(t){return Dp(t&&t.start)+"-"+Dp(t&&t.end)}function Jv(t){return t&&typeof t=="number"?t:1}class jt extends Error{constructor(e,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let i="",s={},o=!1;if(n&&("line"in n&&"column"in n?s={place:n}:"start"in n&&"end"in n?s={place:n}:"type"in n?s={ancestors:[n],place:n.position}:s={...n}),typeof e=="string"?i=e:!s.cause&&e&&(o=!0,i=e.message,s.cause=e),!s.ruleId&&!s.source&&typeof r=="string"){const u=r.indexOf(":");u===-1?s.ruleId=r:(s.source=r.slice(0,u),s.ruleId=r.slice(u+1))}if(!s.place&&s.ancestors&&s.ancestors){const u=s.ancestors[s.ancestors.length-1];u&&(s.place=u.position)}const a=s.place&&"start"in s.place?s.place.start:s.place;this.ancestors=s.ancestors||void 0,this.cause=s.cause||void 0,this.column=a?a.column:void 0,this.fatal=void 0,this.file="",this.message=i,this.line=a?a.line:void 0,this.name=za(s.place)||"1:1",this.place=s.place||void 0,this.reason=this.message,this.ruleId=s.ruleId||void 0,this.source=s.source||void 0,this.stack=o&&s.cause&&typeof s.cause.stack=="string"?s.cause.stack:"",this.actual=void 0,this.expected=void 0,this.note=void 0,this.url=void 0}}jt.prototype.file="";jt.prototype.name="";jt.prototype.reason="";jt.prototype.message="";jt.prototype.stack="";jt.prototype.column=void 0;jt.prototype.line=void 0;jt.prototype.ancestors=void 0;jt.prototype.cause=void 0;jt.prototype.fatal=void 0;jt.prototype.place=void 0;jt.prototype.ruleId=void 0;jt.prototype.source=void 0;const Gg={}.hasOwnProperty,pL=new Map,mL=/[A-Z]/g,gL=new Set(["table","tbody","thead","tfoot","tr"]),yL=new Set(["td","th"]),eT="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function wL(t,e){if(!e||e.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=e.filePath||void 0;let r;if(e.development){if(typeof e.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=bL(n,e.jsxDEV)}else{if(typeof e.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof e.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=TL(n,e.jsx,e.jsxs)}const i={Fragment:e.Fragment,ancestors:[],components:e.components||{},create:r,elementAttributeNameCase:e.elementAttributeNameCase||"react",evaluater:e.createEvaluater?e.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:e.ignoreInvalidStyle||!1,passKeys:e.passKeys!==!1,passNode:e.passNode||!1,schema:e.space==="svg"?qg:MO,stylePropertyNameCase:e.stylePropertyNameCase||"dom",tableCellAlignToStyle:e.tableCellAlignToStyle!==!1},s=tT(i,t,void 0);return s&&typeof s!="string"?s:i.create(t,i.Fragment,{children:s||void 0},void 0)}function tT(t,e,n){if(e.type==="element")return _L(t,e,n);if(e.type==="mdxFlowExpression"||e.type==="mdxTextExpression")return vL(t,e);if(e.type==="mdxJsxFlowElement"||e.type==="mdxJsxTextElement")return EL(t,e,n);if(e.type==="mdxjsEsm")return xL(t,e);if(e.type==="root")return kL(t,e,n);if(e.type==="text")return IL(t,e)}function _L(t,e,n){const r=t.schema;let i=r;e.tagName.toLowerCase()==="svg"&&r.space==="html"&&(i=qg,t.schema=i),t.ancestors.push(e);const s=rT(t,e.tagName,!1),o=SL(t,e);let a=Qg(t,e);return gL.has(e.tagName)&&(a=a.filter(function(u){return typeof u=="string"?!SO(u):!0})),nT(t,o,s,e),Kg(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function vL(t,e){if(e.data&&e.data.estree&&t.evaluater){const r=e.data.estree.body[0];return r.type,t.evaluater.evaluateExpression(r.expression)}wl(t,e.position)}function xL(t,e){if(e.data&&e.data.estree&&t.evaluater)return t.evaluater.evaluateProgram(e.data.estree);wl(t,e.position)}function EL(t,e,n){const r=t.schema;let i=r;e.name==="svg"&&r.space==="html"&&(i=qg,t.schema=i),t.ancestors.push(e);const s=e.name===null?t.Fragment:rT(t,e.name,!0),o=AL(t,e),a=Qg(t,e);return nT(t,o,s,e),Kg(o,a),t.ancestors.pop(),t.schema=r,t.create(e,s,o,n)}function kL(t,e,n){const r={};return Kg(r,Qg(t,e)),t.create(e,t.Fragment,r,n)}function IL(t,e){return e.value}function nT(t,e,n,r){typeof n!="string"&&n!==t.Fragment&&t.passNode&&(e.node=r)}function Kg(t,e){if(e.length>0){const n=e.length>1?e:e[0];n&&(t.children=n)}}function TL(t,e,n){return r;function r(i,s,o,a){const c=Array.isArray(o.children)?n:e;return a?c(s,o,a):c(s,o)}}function bL(t,e){return n;function n(r,i,s,o){const a=Array.isArray(s.children),u=Wg(r);return e(i,s,o,a,{columnNumber:u?u.column-1:void 0,fileName:t,lineNumber:u?u.line:void 0},void 0)}}function SL(t,e){const n={};let r,i;for(i in e.properties)if(i!=="children"&&Gg.call(e.properties,i)){const s=CL(t,i,e.properties[i]);if(s){const[o,a]=s;t.tableCellAlignToStyle&&o==="align"&&typeof a=="string"&&yL.has(e.tagName)?r=a:n[o]=a}}if(r){const s=n.style||(n.style={});s[t.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function AL(t,e){const n={};for(const r of e.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&t.evaluater){const s=r.data.estree.body[0];s.type;const o=s.expression;o.type;const a=o.properties[0];a.type,Object.assign(n,t.evaluater.evaluateExpression(a.argument))}else wl(t,e.position);else{const i=r.name;let s;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&t.evaluater){const a=r.value.data.estree.body[0];a.type,s=t.evaluater.evaluateExpression(a.expression)}else wl(t,e.position);else s=r.value===null?!0:r.value;n[i]=s}return n}function Qg(t,e){const n=[];let r=-1;const i=t.passKeys?new Map:pL;for(;++r<e.children.length;){const s=e.children[r];let o;if(t.passKeys){const u=s.type==="element"?s.tagName:s.type==="mdxJsxFlowElement"||s.type==="mdxJsxTextElement"?s.name:void 0;if(u){const c=i.get(u)||0;o=u+"-"+c,i.set(u,c+1)}}const a=tT(t,s,o);a!==void 0&&n.push(a)}return n}function CL(t,e,n){const r=jO(t.schema,e);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?EO(n):VO(n)),r.property==="style"){let i=typeof n=="object"?n:NL(t,String(n));return t.stylePropertyNameCase==="css"&&(i=RL(i)),["style",i]}return[t.elementAttributeNameCase==="react"&&r.space?RO[r.property]||r.property:r.attribute,n]}}function NL(t,e){try{return dL(e,{reactCompat:!0})}catch(n){if(t.ignoreInvalidStyle)return{};const r=n,i=new jt("Cannot parse `style` attribute",{ancestors:t.ancestors,cause:r,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw i.file=t.filePath||void 0,i.url=eT+"#cannot-parse-style-attribute",i}}function rT(t,e,n){let r;if(!n)r={type:"Literal",value:e};else if(e.includes(".")){const i=e.split(".");let s=-1,o;for(;++s<i.length;){const a=Bv(i[s])?{type:"Identifier",name:i[s]}:{type:"Literal",value:i[s]};o=o?{type:"MemberExpression",object:o,property:a,computed:!!(s&&a.type==="Literal"),optional:!1}:a}r=o}else r=Bv(e)&&!/^[a-z]/.test(e)?{type:"Identifier",name:e}:{type:"Literal",value:e};if(r.type==="Literal"){const i=r.value;return Gg.call(t.components,i)?t.components[i]:i}if(t.evaluater)return t.evaluater.evaluateExpression(r);wl(t)}function wl(t,e){const n=new jt("Cannot handle MDX estrees without `createEvaluater`",{ancestors:t.ancestors,place:e,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=t.filePath||void 0,n.url=eT+"#cannot-handle-mdx-estrees-without-createevaluater",n}function RL(t){const e={};let n;for(n in t)Gg.call(t,n)&&(e[PL(n)]=t[n]);return e}function PL(t){let e=t.replace(mL,DL);return e.slice(0,3)==="ms-"&&(e="-"+e),e}function DL(t){return"-"+t.toLowerCase()}const Yd={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},jL={};function OL(t,e){const n=jL,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,i=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return iT(t,r,i)}function iT(t,e,n){if(LL(t)){if("value"in t)return t.type==="html"&&!n?"":t.value;if(e&&"alt"in t&&t.alt)return t.alt;if("children"in t)return Zv(t.children,e,n)}return Array.isArray(t)?Zv(t,e,n):""}function Zv(t,e,n){const r=[];let i=-1;for(;++i<t.length;)r[i]=iT(t[i],e,n);return r.join("")}function LL(t){return!!(t&&typeof t=="object")}const e0=document.createElement("i");function Xg(t){const e="&"+t+";";e0.innerHTML=e;const n=e0.textContent;return n.charCodeAt(n.length-1)===59&&t!=="semi"||n===e?!1:n}function hr(t,e,n,r){const i=t.length;let s=0,o;if(e<0?e=-e>i?0:i+e:e=e>i?i:e,n=n>0?n:0,r.length<1e4)o=Array.from(r),o.unshift(e,n),t.splice(...o);else for(n&&t.splice(e,n);s<r.length;)o=r.slice(s,s+1e4),o.unshift(e,0),t.splice(...o),s+=1e4,e+=1e4}function kn(t,e){return t.length>0?(hr(t,t.length,0,e),t):e}const t0={}.hasOwnProperty;function ML(t){const e={};let n=-1;for(;++n<t.length;)VL(e,t[n]);return e}function VL(t,e){let n;for(n in e){const i=(t0.call(t,n)?t[n]:void 0)||(t[n]={}),s=e[n];let o;if(s)for(o in s){t0.call(i,o)||(i[o]=[]);const a=s[o];FL(i[o],Array.isArray(a)?a:a?[a]:[])}}}function FL(t,e){let n=-1;const r=[];for(;++n<e.length;)(e[n].add==="after"?t:r).push(e[n]);hr(t,0,0,r)}function sT(t,e){const n=Number.parseInt(t,e);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"":String.fromCodePoint(n)}function lo(t){return t.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const nr=Li(/[A-Za-z]/),fn=Li(/[\dA-Za-z]/),UL=Li(/[#-'*+\--9=?A-Z^-~]/);function jp(t){return t!==null&&(t<32||t===127)}const Op=Li(/\d/),zL=Li(/[\dA-Fa-f]/),BL=Li(/[!-/:-@[-`{-~]/);function he(t){return t!==null&&t<-2}function tn(t){return t!==null&&(t<0||t===32)}function Se(t){return t===-2||t===-1||t===32}const $L=Li(new RegExp("\\p{P}|\\p{S}","u")),qL=Li(/\s/);function Li(t){return e;function e(n){return n!==null&&n>-1&&t.test(String.fromCharCode(n))}}function Bo(t){const e=[];let n=-1,r=0,i=0;for(;++n<t.length;){const s=t.charCodeAt(n);let o="";if(s===37&&fn(t.charCodeAt(n+1))&&fn(t.charCodeAt(n+2)))i=2;else if(s<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(s))||(o=String.fromCharCode(s));else if(s>55295&&s<57344){const a=t.charCodeAt(n+1);s<56320&&a>56319&&a<57344?(o=String.fromCharCode(s,a),i=1):o=""}else o=String.fromCharCode(s);o&&(e.push(t.slice(r,n),encodeURIComponent(o)),r=n+i+1,o=""),i&&(n+=i,i=0)}return e.join("")+t.slice(r)}function Me(t,e,n,r){const i=r?r-1:Number.POSITIVE_INFINITY;let s=0;return o;function o(u){return Se(u)?(t.enter(n),a(u)):e(u)}function a(u){return Se(u)&&s++<i?(t.consume(u),a):(t.exit(n),e(u))}}const HL={tokenize:WL};function WL(t){const e=t.attempt(this.parser.constructs.contentInitial,r,i);let n;return e;function r(a){if(a===null){t.consume(a);return}return t.enter("lineEnding"),t.consume(a),t.exit("lineEnding"),Me(t,e,"linePrefix")}function i(a){return t.enter("paragraph"),s(a)}function s(a){const u=t.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=u),n=u,o(a)}function o(a){if(a===null){t.exit("chunkText"),t.exit("paragraph"),t.consume(a);return}return he(a)?(t.consume(a),t.exit("chunkText"),s):(t.consume(a),o)}}const GL={tokenize:KL},n0={tokenize:QL};function KL(t){const e=this,n=[];let r=0,i,s,o;return a;function a(E){if(r<n.length){const O=n[r];return e.containerState=O[1],t.attempt(O[0].continuation,u,c)(E)}return c(E)}function u(E){if(r++,e.containerState._closeFlow){e.containerState._closeFlow=void 0,i&&k();const O=e.events.length;let M=O,D;for(;M--;)if(e.events[M][0]==="exit"&&e.events[M][1].type==="chunkFlow"){D=e.events[M][1].end;break}x(r);let v=O;for(;v<e.events.length;)e.events[v][1].end={...D},v++;return hr(e.events,M+1,0,e.events.slice(O)),e.events.length=v,c(E)}return a(E)}function c(E){if(r===n.length){if(!i)return m(E);if(i.currentConstruct&&i.currentConstruct.concrete)return _(E);e.interrupt=!!(i.currentConstruct&&!i._gfmTableDynamicInterruptHack)}return e.containerState={},t.check(n0,d,f)(E)}function d(E){return i&&k(),x(r),m(E)}function f(E){return e.parser.lazy[e.now().line]=r!==n.length,o=e.now().offset,_(E)}function m(E){return e.containerState={},t.attempt(n0,g,_)(E)}function g(E){return r++,n.push([e.currentConstruct,e.containerState]),m(E)}function _(E){if(E===null){i&&k(),x(0),t.consume(E);return}return i=i||e.parser.flow(e.now()),t.enter("chunkFlow",{_tokenizer:i,contentType:"flow",previous:s}),b(E)}function b(E){if(E===null){P(t.exit("chunkFlow"),!0),x(0),t.consume(E);return}return he(E)?(t.consume(E),P(t.exit("chunkFlow")),r=0,e.interrupt=void 0,a):(t.consume(E),b)}function P(E,O){const M=e.sliceStream(E);if(O&&M.push(null),E.previous=s,s&&(s.next=E),s=E,i.defineSkip(E.start),i.write(M),e.parser.lazy[E.start.line]){let D=i.events.length;for(;D--;)if(i.events[D][1].start.offset<o&&(!i.events[D][1].end||i.events[D][1].end.offset>o))return;const v=e.events.length;let w=v,I,S;for(;w--;)if(e.events[w][0]==="exit"&&e.events[w][1].type==="chunkFlow"){if(I){S=e.events[w][1].end;break}I=!0}for(x(r),D=v;D<e.events.length;)e.events[D][1].end={...S},D++;hr(e.events,w+1,0,e.events.slice(v)),e.events.length=D}}function x(E){let O=n.length;for(;O-- >E;){const M=n[O];e.containerState=M[1],M[0].exit.call(e,t)}n.length=E}function k(){i.write([null]),s=void 0,i=void 0,e.containerState._closeFlow=void 0}}function QL(t,e,n){return Me(t,t.attempt(this.parser.constructs.document,e,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function r0(t){if(t===null||tn(t)||qL(t))return 1;if($L(t))return 2}function Yg(t,e,n){const r=[];let i=-1;for(;++i<t.length;){const s=t[i].resolveAll;s&&!r.includes(s)&&(e=s(e,n),r.push(s))}return e}const Lp={name:"attention",resolveAll:XL,tokenize:YL};function XL(t,e){let n=-1,r,i,s,o,a,u,c,d;for(;++n<t.length;)if(t[n][0]==="enter"&&t[n][1].type==="attentionSequence"&&t[n][1]._close){for(r=n;r--;)if(t[r][0]==="exit"&&t[r][1].type==="attentionSequence"&&t[r][1]._open&&e.sliceSerialize(t[r][1]).charCodeAt(0)===e.sliceSerialize(t[n][1]).charCodeAt(0)){if((t[r][1]._close||t[n][1]._open)&&(t[n][1].end.offset-t[n][1].start.offset)%3&&!((t[r][1].end.offset-t[r][1].start.offset+t[n][1].end.offset-t[n][1].start.offset)%3))continue;u=t[r][1].end.offset-t[r][1].start.offset>1&&t[n][1].end.offset-t[n][1].start.offset>1?2:1;const f={...t[r][1].end},m={...t[n][1].start};i0(f,-u),i0(m,u),o={type:u>1?"strongSequence":"emphasisSequence",start:f,end:{...t[r][1].end}},a={type:u>1?"strongSequence":"emphasisSequence",start:{...t[n][1].start},end:m},s={type:u>1?"strongText":"emphasisText",start:{...t[r][1].end},end:{...t[n][1].start}},i={type:u>1?"strong":"emphasis",start:{...o.start},end:{...a.end}},t[r][1].end={...o.start},t[n][1].start={...a.end},c=[],t[r][1].end.offset-t[r][1].start.offset&&(c=kn(c,[["enter",t[r][1],e],["exit",t[r][1],e]])),c=kn(c,[["enter",i,e],["enter",o,e],["exit",o,e],["enter",s,e]]),c=kn(c,Yg(e.parser.constructs.insideSpan.null,t.slice(r+1,n),e)),c=kn(c,[["exit",s,e],["enter",a,e],["exit",a,e],["exit",i,e]]),t[n][1].end.offset-t[n][1].start.offset?(d=2,c=kn(c,[["enter",t[n][1],e],["exit",t[n][1],e]])):d=0,hr(t,r-1,n-r+3,c),n=r+c.length-d-2;break}}for(n=-1;++n<t.length;)t[n][1].type==="attentionSequence"&&(t[n][1].type="data");return t}function YL(t,e){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,i=r0(r);let s;return o;function o(u){return s=u,t.enter("attentionSequence"),a(u)}function a(u){if(u===s)return t.consume(u),a;const c=t.exit("attentionSequence"),d=r0(u),f=!d||d===2&&i||n.includes(u),m=!i||i===2&&d||n.includes(r);return c._open=!!(s===42?f:f&&(i||!m)),c._close=!!(s===42?m:m&&(d||!f)),e(u)}}function i0(t,e){t.column+=e,t.offset+=e,t._bufferIndex+=e}const JL={name:"autolink",tokenize:ZL};function ZL(t,e,n){let r=0;return i;function i(g){return t.enter("autolink"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.enter("autolinkProtocol"),s}function s(g){return nr(g)?(t.consume(g),o):g===64?n(g):c(g)}function o(g){return g===43||g===45||g===46||fn(g)?(r=1,a(g)):c(g)}function a(g){return g===58?(t.consume(g),r=0,u):(g===43||g===45||g===46||fn(g))&&r++<32?(t.consume(g),a):(r=0,c(g))}function u(g){return g===62?(t.exit("autolinkProtocol"),t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):g===null||g===32||g===60||jp(g)?n(g):(t.consume(g),u)}function c(g){return g===64?(t.consume(g),d):UL(g)?(t.consume(g),c):n(g)}function d(g){return fn(g)?f(g):n(g)}function f(g){return g===46?(t.consume(g),r=0,d):g===62?(t.exit("autolinkProtocol").type="autolinkEmail",t.enter("autolinkMarker"),t.consume(g),t.exit("autolinkMarker"),t.exit("autolink"),e):m(g)}function m(g){if((g===45||fn(g))&&r++<63){const _=g===45?m:f;return t.consume(g),_}return n(g)}}const qh={partial:!0,tokenize:eM};function eM(t,e,n){return r;function r(s){return Se(s)?Me(t,i,"linePrefix")(s):i(s)}function i(s){return s===null||he(s)?e(s):n(s)}}const oT={continuation:{tokenize:nM},exit:rM,name:"blockQuote",tokenize:tM};function tM(t,e,n){const r=this;return i;function i(o){if(o===62){const a=r.containerState;return a.open||(t.enter("blockQuote",{_container:!0}),a.open=!0),t.enter("blockQuotePrefix"),t.enter("blockQuoteMarker"),t.consume(o),t.exit("blockQuoteMarker"),s}return n(o)}function s(o){return Se(o)?(t.enter("blockQuotePrefixWhitespace"),t.consume(o),t.exit("blockQuotePrefixWhitespace"),t.exit("blockQuotePrefix"),e):(t.exit("blockQuotePrefix"),e(o))}}function nM(t,e,n){const r=this;return i;function i(o){return Se(o)?Me(t,s,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(o):s(o)}function s(o){return t.attempt(oT,e,n)(o)}}function rM(t){t.exit("blockQuote")}const aT={name:"characterEscape",tokenize:iM};function iM(t,e,n){return r;function r(s){return t.enter("characterEscape"),t.enter("escapeMarker"),t.consume(s),t.exit("escapeMarker"),i}function i(s){return BL(s)?(t.enter("characterEscapeValue"),t.consume(s),t.exit("characterEscapeValue"),t.exit("characterEscape"),e):n(s)}}const lT={name:"characterReference",tokenize:sM};function sM(t,e,n){const r=this;let i=0,s,o;return a;function a(f){return t.enter("characterReference"),t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),u}function u(f){return f===35?(t.enter("characterReferenceMarkerNumeric"),t.consume(f),t.exit("characterReferenceMarkerNumeric"),c):(t.enter("characterReferenceValue"),s=31,o=fn,d(f))}function c(f){return f===88||f===120?(t.enter("characterReferenceMarkerHexadecimal"),t.consume(f),t.exit("characterReferenceMarkerHexadecimal"),t.enter("characterReferenceValue"),s=6,o=zL,d):(t.enter("characterReferenceValue"),s=7,o=Op,d(f))}function d(f){if(f===59&&i){const m=t.exit("characterReferenceValue");return o===fn&&!Xg(r.sliceSerialize(m))?n(f):(t.enter("characterReferenceMarker"),t.consume(f),t.exit("characterReferenceMarker"),t.exit("characterReference"),e)}return o(f)&&i++<s?(t.consume(f),d):n(f)}}const s0={partial:!0,tokenize:aM},o0={concrete:!0,name:"codeFenced",tokenize:oM};function oM(t,e,n){const r=this,i={partial:!0,tokenize:M};let s=0,o=0,a;return u;function u(D){return c(D)}function c(D){const v=r.events[r.events.length-1];return s=v&&v[1].type==="linePrefix"?v[2].sliceSerialize(v[1],!0).length:0,a=D,t.enter("codeFenced"),t.enter("codeFencedFence"),t.enter("codeFencedFenceSequence"),d(D)}function d(D){return D===a?(o++,t.consume(D),d):o<3?n(D):(t.exit("codeFencedFenceSequence"),Se(D)?Me(t,f,"whitespace")(D):f(D))}function f(D){return D===null||he(D)?(t.exit("codeFencedFence"),r.interrupt?e(D):t.check(s0,b,O)(D)):(t.enter("codeFencedFenceInfo"),t.enter("chunkString",{contentType:"string"}),m(D))}function m(D){return D===null||he(D)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),f(D)):Se(D)?(t.exit("chunkString"),t.exit("codeFencedFenceInfo"),Me(t,g,"whitespace")(D)):D===96&&D===a?n(D):(t.consume(D),m)}function g(D){return D===null||he(D)?f(D):(t.enter("codeFencedFenceMeta"),t.enter("chunkString",{contentType:"string"}),_(D))}function _(D){return D===null||he(D)?(t.exit("chunkString"),t.exit("codeFencedFenceMeta"),f(D)):D===96&&D===a?n(D):(t.consume(D),_)}function b(D){return t.attempt(i,O,P)(D)}function P(D){return t.enter("lineEnding"),t.consume(D),t.exit("lineEnding"),x}function x(D){return s>0&&Se(D)?Me(t,k,"linePrefix",s+1)(D):k(D)}function k(D){return D===null||he(D)?t.check(s0,b,O)(D):(t.enter("codeFlowValue"),E(D))}function E(D){return D===null||he(D)?(t.exit("codeFlowValue"),k(D)):(t.consume(D),E)}function O(D){return t.exit("codeFenced"),e(D)}function M(D,v,w){let I=0;return S;function S(ne){return D.enter("lineEnding"),D.consume(ne),D.exit("lineEnding"),A}function A(ne){return D.enter("codeFencedFence"),Se(ne)?Me(D,R,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ne):R(ne)}function R(ne){return ne===a?(D.enter("codeFencedFenceSequence"),C(ne)):w(ne)}function C(ne){return ne===a?(I++,D.consume(ne),C):I>=o?(D.exit("codeFencedFenceSequence"),Se(ne)?Me(D,te,"whitespace")(ne):te(ne)):w(ne)}function te(ne){return ne===null||he(ne)?(D.exit("codeFencedFence"),v(ne)):w(ne)}}}function aM(t,e,n){const r=this;return i;function i(o){return o===null?n(o):(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}const Jd={name:"codeIndented",tokenize:uM},lM={partial:!0,tokenize:cM};function uM(t,e,n){const r=this;return i;function i(c){return t.enter("codeIndented"),Me(t,s,"linePrefix",5)(c)}function s(c){const d=r.events[r.events.length-1];return d&&d[1].type==="linePrefix"&&d[2].sliceSerialize(d[1],!0).length>=4?o(c):n(c)}function o(c){return c===null?u(c):he(c)?t.attempt(lM,o,u)(c):(t.enter("codeFlowValue"),a(c))}function a(c){return c===null||he(c)?(t.exit("codeFlowValue"),o(c)):(t.consume(c),a)}function u(c){return t.exit("codeIndented"),e(c)}}function cM(t,e,n){const r=this;return i;function i(o){return r.parser.lazy[r.now().line]?n(o):he(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),i):Me(t,s,"linePrefix",5)(o)}function s(o){const a=r.events[r.events.length-1];return a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):he(o)?i(o):n(o)}}const hM={name:"codeText",previous:fM,resolve:dM,tokenize:pM};function dM(t){let e=t.length-4,n=3,r,i;if((t[n][1].type==="lineEnding"||t[n][1].type==="space")&&(t[e][1].type==="lineEnding"||t[e][1].type==="space")){for(r=n;++r<e;)if(t[r][1].type==="codeTextData"){t[n][1].type="codeTextPadding",t[e][1].type="codeTextPadding",n+=2,e-=2;break}}for(r=n-1,e++;++r<=e;)i===void 0?r!==e&&t[r][1].type!=="lineEnding"&&(i=r):(r===e||t[r][1].type==="lineEnding")&&(t[i][1].type="codeTextData",r!==i+2&&(t[i][1].end=t[r-1][1].end,t.splice(i+2,r-i-2),e-=r-i-2,r=i+2),i=void 0);return t}function fM(t){return t!==96||this.events[this.events.length-1][1].type==="characterEscape"}function pM(t,e,n){let r=0,i,s;return o;function o(f){return t.enter("codeText"),t.enter("codeTextSequence"),a(f)}function a(f){return f===96?(t.consume(f),r++,a):(t.exit("codeTextSequence"),u(f))}function u(f){return f===null?n(f):f===32?(t.enter("space"),t.consume(f),t.exit("space"),u):f===96?(s=t.enter("codeTextSequence"),i=0,d(f)):he(f)?(t.enter("lineEnding"),t.consume(f),t.exit("lineEnding"),u):(t.enter("codeTextData"),c(f))}function c(f){return f===null||f===32||f===96||he(f)?(t.exit("codeTextData"),u(f)):(t.consume(f),c)}function d(f){return f===96?(t.consume(f),i++,d):i===r?(t.exit("codeTextSequence"),t.exit("codeText"),e(f)):(s.type="codeTextData",c(f))}}class mM{constructor(e){this.left=e?[...e]:[],this.right=[]}get(e){if(e<0||e>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+e+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return e<this.left.length?this.left[e]:this.right[this.right.length-e+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(e,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(e,r):e>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-e+this.left.length).reverse():this.left.slice(e).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(e,n,r){const i=n||0;this.setCursor(Math.trunc(e));const s=this.right.splice(this.right.length-i,Number.POSITIVE_INFINITY);return r&&fa(this.left,r),s.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(e){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(e)}pushMany(e){this.setCursor(Number.POSITIVE_INFINITY),fa(this.left,e)}unshift(e){this.setCursor(0),this.right.push(e)}unshiftMany(e){this.setCursor(0),fa(this.right,e.reverse())}setCursor(e){if(!(e===this.left.length||e>this.left.length&&this.right.length===0||e<0&&this.left.length===0))if(e<this.left.length){const n=this.left.splice(e,Number.POSITIVE_INFINITY);fa(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-e,Number.POSITIVE_INFINITY);fa(this.left,n.reverse())}}}function fa(t,e){let n=0;if(e.length<1e4)t.push(...e);else for(;n<e.length;)t.push(...e.slice(n,n+1e4)),n+=1e4}function uT(t){const e={};let n=-1,r,i,s,o,a,u,c;const d=new mM(t);for(;++n<d.length;){for(;n in e;)n=e[n];if(r=d.get(n),n&&r[1].type==="chunkFlow"&&d.get(n-1)[1].type==="listItemPrefix"&&(u=r[1]._tokenizer.events,s=0,s<u.length&&u[s][1].type==="lineEndingBlank"&&(s+=2),s<u.length&&u[s][1].type==="content"))for(;++s<u.length&&u[s][1].type!=="content";)u[s][1].type==="chunkText"&&(u[s][1]._isInFirstContentOfListItem=!0,s++);if(r[0]==="enter")r[1].contentType&&(Object.assign(e,gM(d,n)),n=e[n],c=!0);else if(r[1]._container){for(s=n,i=void 0;s--;)if(o=d.get(s),o[1].type==="lineEnding"||o[1].type==="lineEndingBlank")o[0]==="enter"&&(i&&(d.get(i)[1].type="lineEndingBlank"),o[1].type="lineEnding",i=s);else if(!(o[1].type==="linePrefix"||o[1].type==="listItemIndent"))break;i&&(r[1].end={...d.get(i)[1].start},a=d.slice(i,n),a.unshift(r),d.splice(i,n-i+1,a))}}return hr(t,0,Number.POSITIVE_INFINITY,d.slice(0)),!c}function gM(t,e){const n=t.get(e)[1],r=t.get(e)[2];let i=e-1;const s=[];let o=n._tokenizer;o||(o=r.parser[n.contentType](n.start),n._contentTypeTextTrailing&&(o._contentTypeTextTrailing=!0));const a=o.events,u=[],c={};let d,f,m=-1,g=n,_=0,b=0;const P=[b];for(;g;){for(;t.get(++i)[1]!==g;);s.push(i),g._tokenizer||(d=r.sliceStream(g),g.next||d.push(null),f&&o.defineSkip(g.start),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=!0),o.write(d),g._isInFirstContentOfListItem&&(o._gfmTasklistFirstContentOfListItem=void 0)),f=g,g=g.next}for(g=n;++m<a.length;)a[m][0]==="exit"&&a[m-1][0]==="enter"&&a[m][1].type===a[m-1][1].type&&a[m][1].start.line!==a[m][1].end.line&&(b=m+1,P.push(b),g._tokenizer=void 0,g.previous=void 0,g=g.next);for(o.events=[],g?(g._tokenizer=void 0,g.previous=void 0):P.pop(),m=P.length;m--;){const x=a.slice(P[m],P[m+1]),k=s.pop();u.push([k,k+x.length-1]),t.splice(k,2,x)}for(u.reverse(),m=-1;++m<u.length;)c[_+u[m][0]]=_+u[m][1],_+=u[m][1]-u[m][0]-1;return c}const yM={resolve:_M,tokenize:vM},wM={partial:!0,tokenize:xM};function _M(t){return uT(t),t}function vM(t,e){let n;return r;function r(a){return t.enter("content"),n=t.enter("chunkContent",{contentType:"content"}),i(a)}function i(a){return a===null?s(a):he(a)?t.check(wM,o,s)(a):(t.consume(a),i)}function s(a){return t.exit("chunkContent"),t.exit("content"),e(a)}function o(a){return t.consume(a),t.exit("chunkContent"),n.next=t.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,i}}function xM(t,e,n){const r=this;return i;function i(o){return t.exit("chunkContent"),t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),Me(t,s,"linePrefix")}function s(o){if(o===null||he(o))return n(o);const a=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&a&&a[1].type==="linePrefix"&&a[2].sliceSerialize(a[1],!0).length>=4?e(o):t.interrupt(r.parser.constructs.flow,n,e)(o)}}function cT(t,e,n,r,i,s,o,a,u){const c=u||Number.POSITIVE_INFINITY;let d=0;return f;function f(x){return x===60?(t.enter(r),t.enter(i),t.enter(s),t.consume(x),t.exit(s),m):x===null||x===32||x===41||jp(x)?n(x):(t.enter(r),t.enter(o),t.enter(a),t.enter("chunkString",{contentType:"string"}),b(x))}function m(x){return x===62?(t.enter(s),t.consume(x),t.exit(s),t.exit(i),t.exit(r),e):(t.enter(a),t.enter("chunkString",{contentType:"string"}),g(x))}function g(x){return x===62?(t.exit("chunkString"),t.exit(a),m(x)):x===null||x===60||he(x)?n(x):(t.consume(x),x===92?_:g)}function _(x){return x===60||x===62||x===92?(t.consume(x),g):g(x)}function b(x){return!d&&(x===null||x===41||tn(x))?(t.exit("chunkString"),t.exit(a),t.exit(o),t.exit(r),e(x)):d<c&&x===40?(t.consume(x),d++,b):x===41?(t.consume(x),d--,b):x===null||x===32||x===40||jp(x)?n(x):(t.consume(x),x===92?P:b)}function P(x){return x===40||x===41||x===92?(t.consume(x),b):b(x)}}function hT(t,e,n,r,i,s){const o=this;let a=0,u;return c;function c(g){return t.enter(r),t.enter(i),t.consume(g),t.exit(i),t.enter(s),d}function d(g){return a>999||g===null||g===91||g===93&&!u||g===94&&!a&&"_hiddenFootnoteSupport"in o.parser.constructs?n(g):g===93?(t.exit(s),t.enter(i),t.consume(g),t.exit(i),t.exit(r),e):he(g)?(t.enter("lineEnding"),t.consume(g),t.exit("lineEnding"),d):(t.enter("chunkString",{contentType:"string"}),f(g))}function f(g){return g===null||g===91||g===93||he(g)||a++>999?(t.exit("chunkString"),d(g)):(t.consume(g),u||(u=!Se(g)),g===92?m:f)}function m(g){return g===91||g===92||g===93?(t.consume(g),a++,f):f(g)}}function dT(t,e,n,r,i,s){let o;return a;function a(m){return m===34||m===39||m===40?(t.enter(r),t.enter(i),t.consume(m),t.exit(i),o=m===40?41:m,u):n(m)}function u(m){return m===o?(t.enter(i),t.consume(m),t.exit(i),t.exit(r),e):(t.enter(s),c(m))}function c(m){return m===o?(t.exit(s),u(o)):m===null?n(m):he(m)?(t.enter("lineEnding"),t.consume(m),t.exit("lineEnding"),Me(t,c,"linePrefix")):(t.enter("chunkString",{contentType:"string"}),d(m))}function d(m){return m===o||m===null||he(m)?(t.exit("chunkString"),c(m)):(t.consume(m),m===92?f:d)}function f(m){return m===o||m===92?(t.consume(m),d):d(m)}}function Ba(t,e){let n;return r;function r(i){return he(i)?(t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),n=!0,r):Se(i)?Me(t,r,n?"linePrefix":"lineSuffix")(i):e(i)}}const EM={name:"definition",tokenize:IM},kM={partial:!0,tokenize:TM};function IM(t,e,n){const r=this;let i;return s;function s(g){return t.enter("definition"),o(g)}function o(g){return hT.call(r,t,a,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(g)}function a(g){return i=lo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),g===58?(t.enter("definitionMarker"),t.consume(g),t.exit("definitionMarker"),u):n(g)}function u(g){return tn(g)?Ba(t,c)(g):c(g)}function c(g){return cT(t,d,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(g)}function d(g){return t.attempt(kM,f,f)(g)}function f(g){return Se(g)?Me(t,m,"whitespace")(g):m(g)}function m(g){return g===null||he(g)?(t.exit("definition"),r.parser.defined.push(i),e(g)):n(g)}}function TM(t,e,n){return r;function r(a){return tn(a)?Ba(t,i)(a):n(a)}function i(a){return dT(t,s,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(a)}function s(a){return Se(a)?Me(t,o,"whitespace")(a):o(a)}function o(a){return a===null||he(a)?e(a):n(a)}}const bM={name:"hardBreakEscape",tokenize:SM};function SM(t,e,n){return r;function r(s){return t.enter("hardBreakEscape"),t.consume(s),i}function i(s){return he(s)?(t.exit("hardBreakEscape"),e(s)):n(s)}}const AM={name:"headingAtx",resolve:CM,tokenize:NM};function CM(t,e){let n=t.length-2,r=3,i,s;return t[r][1].type==="whitespace"&&(r+=2),n-2>r&&t[n][1].type==="whitespace"&&(n-=2),t[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&t[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(i={type:"atxHeadingText",start:t[r][1].start,end:t[n][1].end},s={type:"chunkText",start:t[r][1].start,end:t[n][1].end,contentType:"text"},hr(t,r,n-r+1,[["enter",i,e],["enter",s,e],["exit",s,e],["exit",i,e]])),t}function NM(t,e,n){let r=0;return i;function i(d){return t.enter("atxHeading"),s(d)}function s(d){return t.enter("atxHeadingSequence"),o(d)}function o(d){return d===35&&r++<6?(t.consume(d),o):d===null||tn(d)?(t.exit("atxHeadingSequence"),a(d)):n(d)}function a(d){return d===35?(t.enter("atxHeadingSequence"),u(d)):d===null||he(d)?(t.exit("atxHeading"),e(d)):Se(d)?Me(t,a,"whitespace")(d):(t.enter("atxHeadingText"),c(d))}function u(d){return d===35?(t.consume(d),u):(t.exit("atxHeadingSequence"),a(d))}function c(d){return d===null||d===35||tn(d)?(t.exit("atxHeadingText"),a(d)):(t.consume(d),c)}}const RM=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],a0=["pre","script","style","textarea"],PM={concrete:!0,name:"htmlFlow",resolveTo:OM,tokenize:LM},DM={partial:!0,tokenize:VM},jM={partial:!0,tokenize:MM};function OM(t){let e=t.length;for(;e--&&!(t[e][0]==="enter"&&t[e][1].type==="htmlFlow"););return e>1&&t[e-2][1].type==="linePrefix"&&(t[e][1].start=t[e-2][1].start,t[e+1][1].start=t[e-2][1].start,t.splice(e-2,2)),t}function LM(t,e,n){const r=this;let i,s,o,a,u;return c;function c(j){return d(j)}function d(j){return t.enter("htmlFlow"),t.enter("htmlFlowData"),t.consume(j),f}function f(j){return j===33?(t.consume(j),m):j===47?(t.consume(j),s=!0,b):j===63?(t.consume(j),i=3,r.interrupt?e:N):nr(j)?(t.consume(j),o=String.fromCharCode(j),P):n(j)}function m(j){return j===45?(t.consume(j),i=2,g):j===91?(t.consume(j),i=5,a=0,_):nr(j)?(t.consume(j),i=4,r.interrupt?e:N):n(j)}function g(j){return j===45?(t.consume(j),r.interrupt?e:N):n(j)}function _(j){const be="CDATA[";return j===be.charCodeAt(a++)?(t.consume(j),a===be.length?r.interrupt?e:R:_):n(j)}function b(j){return nr(j)?(t.consume(j),o=String.fromCharCode(j),P):n(j)}function P(j){if(j===null||j===47||j===62||tn(j)){const be=j===47,De=o.toLowerCase();return!be&&!s&&a0.includes(De)?(i=1,r.interrupt?e(j):R(j)):RM.includes(o.toLowerCase())?(i=6,be?(t.consume(j),x):r.interrupt?e(j):R(j)):(i=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(j):s?k(j):E(j))}return j===45||fn(j)?(t.consume(j),o+=String.fromCharCode(j),P):n(j)}function x(j){return j===62?(t.consume(j),r.interrupt?e:R):n(j)}function k(j){return Se(j)?(t.consume(j),k):S(j)}function E(j){return j===47?(t.consume(j),S):j===58||j===95||nr(j)?(t.consume(j),O):Se(j)?(t.consume(j),E):S(j)}function O(j){return j===45||j===46||j===58||j===95||fn(j)?(t.consume(j),O):M(j)}function M(j){return j===61?(t.consume(j),D):Se(j)?(t.consume(j),M):E(j)}function D(j){return j===null||j===60||j===61||j===62||j===96?n(j):j===34||j===39?(t.consume(j),u=j,v):Se(j)?(t.consume(j),D):w(j)}function v(j){return j===u?(t.consume(j),u=null,I):j===null||he(j)?n(j):(t.consume(j),v)}function w(j){return j===null||j===34||j===39||j===47||j===60||j===61||j===62||j===96||tn(j)?M(j):(t.consume(j),w)}function I(j){return j===47||j===62||Se(j)?E(j):n(j)}function S(j){return j===62?(t.consume(j),A):n(j)}function A(j){return j===null||he(j)?R(j):Se(j)?(t.consume(j),A):n(j)}function R(j){return j===45&&i===2?(t.consume(j),X):j===60&&i===1?(t.consume(j),W):j===62&&i===4?(t.consume(j),ue):j===63&&i===3?(t.consume(j),N):j===93&&i===5?(t.consume(j),Y):he(j)&&(i===6||i===7)?(t.exit("htmlFlowData"),t.check(DM,me,C)(j)):j===null||he(j)?(t.exit("htmlFlowData"),C(j)):(t.consume(j),R)}function C(j){return t.check(jM,te,me)(j)}function te(j){return t.enter("lineEnding"),t.consume(j),t.exit("lineEnding"),ne}function ne(j){return j===null||he(j)?C(j):(t.enter("htmlFlowData"),R(j))}function X(j){return j===45?(t.consume(j),N):R(j)}function W(j){return j===47?(t.consume(j),o="",B):R(j)}function B(j){if(j===62){const be=o.toLowerCase();return a0.includes(be)?(t.consume(j),ue):R(j)}return nr(j)&&o.length<8?(t.consume(j),o+=String.fromCharCode(j),B):R(j)}function Y(j){return j===93?(t.consume(j),N):R(j)}function N(j){return j===62?(t.consume(j),ue):j===45&&i===2?(t.consume(j),N):R(j)}function ue(j){return j===null||he(j)?(t.exit("htmlFlowData"),me(j)):(t.consume(j),ue)}function me(j){return t.exit("htmlFlow"),e(j)}}function MM(t,e,n){const r=this;return i;function i(o){return he(o)?(t.enter("lineEnding"),t.consume(o),t.exit("lineEnding"),s):n(o)}function s(o){return r.parser.lazy[r.now().line]?n(o):e(o)}}function VM(t,e,n){return r;function r(i){return t.enter("lineEnding"),t.consume(i),t.exit("lineEnding"),t.attempt(qh,e,n)}}const FM={name:"htmlText",tokenize:UM};function UM(t,e,n){const r=this;let i,s,o;return a;function a(N){return t.enter("htmlText"),t.enter("htmlTextData"),t.consume(N),u}function u(N){return N===33?(t.consume(N),c):N===47?(t.consume(N),M):N===63?(t.consume(N),E):nr(N)?(t.consume(N),w):n(N)}function c(N){return N===45?(t.consume(N),d):N===91?(t.consume(N),s=0,_):nr(N)?(t.consume(N),k):n(N)}function d(N){return N===45?(t.consume(N),g):n(N)}function f(N){return N===null?n(N):N===45?(t.consume(N),m):he(N)?(o=f,W(N)):(t.consume(N),f)}function m(N){return N===45?(t.consume(N),g):f(N)}function g(N){return N===62?X(N):N===45?m(N):f(N)}function _(N){const ue="CDATA[";return N===ue.charCodeAt(s++)?(t.consume(N),s===ue.length?b:_):n(N)}function b(N){return N===null?n(N):N===93?(t.consume(N),P):he(N)?(o=b,W(N)):(t.consume(N),b)}function P(N){return N===93?(t.consume(N),x):b(N)}function x(N){return N===62?X(N):N===93?(t.consume(N),x):b(N)}function k(N){return N===null||N===62?X(N):he(N)?(o=k,W(N)):(t.consume(N),k)}function E(N){return N===null?n(N):N===63?(t.consume(N),O):he(N)?(o=E,W(N)):(t.consume(N),E)}function O(N){return N===62?X(N):E(N)}function M(N){return nr(N)?(t.consume(N),D):n(N)}function D(N){return N===45||fn(N)?(t.consume(N),D):v(N)}function v(N){return he(N)?(o=v,W(N)):Se(N)?(t.consume(N),v):X(N)}function w(N){return N===45||fn(N)?(t.consume(N),w):N===47||N===62||tn(N)?I(N):n(N)}function I(N){return N===47?(t.consume(N),X):N===58||N===95||nr(N)?(t.consume(N),S):he(N)?(o=I,W(N)):Se(N)?(t.consume(N),I):X(N)}function S(N){return N===45||N===46||N===58||N===95||fn(N)?(t.consume(N),S):A(N)}function A(N){return N===61?(t.consume(N),R):he(N)?(o=A,W(N)):Se(N)?(t.consume(N),A):I(N)}function R(N){return N===null||N===60||N===61||N===62||N===96?n(N):N===34||N===39?(t.consume(N),i=N,C):he(N)?(o=R,W(N)):Se(N)?(t.consume(N),R):(t.consume(N),te)}function C(N){return N===i?(t.consume(N),i=void 0,ne):N===null?n(N):he(N)?(o=C,W(N)):(t.consume(N),C)}function te(N){return N===null||N===34||N===39||N===60||N===61||N===96?n(N):N===47||N===62||tn(N)?I(N):(t.consume(N),te)}function ne(N){return N===47||N===62||tn(N)?I(N):n(N)}function X(N){return N===62?(t.consume(N),t.exit("htmlTextData"),t.exit("htmlText"),e):n(N)}function W(N){return t.exit("htmlTextData"),t.enter("lineEnding"),t.consume(N),t.exit("lineEnding"),B}function B(N){return Se(N)?Me(t,Y,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(N):Y(N)}function Y(N){return t.enter("htmlTextData"),o(N)}}const Jg={name:"labelEnd",resolveAll:qM,resolveTo:HM,tokenize:WM},zM={tokenize:GM},BM={tokenize:KM},$M={tokenize:QM};function qM(t){let e=-1;const n=[];for(;++e<t.length;){const r=t[e][1];if(n.push(t[e]),r.type==="labelImage"||r.type==="labelLink"||r.type==="labelEnd"){const i=r.type==="labelImage"?4:2;r.type="data",e+=i}}return t.length!==n.length&&hr(t,0,t.length,n),t}function HM(t,e){let n=t.length,r=0,i,s,o,a;for(;n--;)if(i=t[n][1],s){if(i.type==="link"||i.type==="labelLink"&&i._inactive)break;t[n][0]==="enter"&&i.type==="labelLink"&&(i._inactive=!0)}else if(o){if(t[n][0]==="enter"&&(i.type==="labelImage"||i.type==="labelLink")&&!i._balanced&&(s=n,i.type!=="labelLink")){r=2;break}}else i.type==="labelEnd"&&(o=n);const u={type:t[s][1].type==="labelLink"?"link":"image",start:{...t[s][1].start},end:{...t[t.length-1][1].end}},c={type:"label",start:{...t[s][1].start},end:{...t[o][1].end}},d={type:"labelText",start:{...t[s+r+2][1].end},end:{...t[o-2][1].start}};return a=[["enter",u,e],["enter",c,e]],a=kn(a,t.slice(s+1,s+r+3)),a=kn(a,[["enter",d,e]]),a=kn(a,Yg(e.parser.constructs.insideSpan.null,t.slice(s+r+4,o-3),e)),a=kn(a,[["exit",d,e],t[o-2],t[o-1],["exit",c,e]]),a=kn(a,t.slice(o+1)),a=kn(a,[["exit",u,e]]),hr(t,s,t.length,a),t}function WM(t,e,n){const r=this;let i=r.events.length,s,o;for(;i--;)if((r.events[i][1].type==="labelImage"||r.events[i][1].type==="labelLink")&&!r.events[i][1]._balanced){s=r.events[i][1];break}return a;function a(m){return s?s._inactive?f(m):(o=r.parser.defined.includes(lo(r.sliceSerialize({start:s.end,end:r.now()}))),t.enter("labelEnd"),t.enter("labelMarker"),t.consume(m),t.exit("labelMarker"),t.exit("labelEnd"),u):n(m)}function u(m){return m===40?t.attempt(zM,d,o?d:f)(m):m===91?t.attempt(BM,d,o?c:f)(m):o?d(m):f(m)}function c(m){return t.attempt($M,d,f)(m)}function d(m){return e(m)}function f(m){return s._balanced=!0,n(m)}}function GM(t,e,n){return r;function r(f){return t.enter("resource"),t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),i}function i(f){return tn(f)?Ba(t,s)(f):s(f)}function s(f){return f===41?d(f):cT(t,o,a,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(f)}function o(f){return tn(f)?Ba(t,u)(f):d(f)}function a(f){return n(f)}function u(f){return f===34||f===39||f===40?dT(t,c,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(f):d(f)}function c(f){return tn(f)?Ba(t,d)(f):d(f)}function d(f){return f===41?(t.enter("resourceMarker"),t.consume(f),t.exit("resourceMarker"),t.exit("resource"),e):n(f)}}function KM(t,e,n){const r=this;return i;function i(a){return hT.call(r,t,s,o,"reference","referenceMarker","referenceString")(a)}function s(a){return r.parser.defined.includes(lo(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?e(a):n(a)}function o(a){return n(a)}}function QM(t,e,n){return r;function r(s){return t.enter("reference"),t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),i}function i(s){return s===93?(t.enter("referenceMarker"),t.consume(s),t.exit("referenceMarker"),t.exit("reference"),e):n(s)}}const XM={name:"labelStartImage",resolveAll:Jg.resolveAll,tokenize:YM};function YM(t,e,n){const r=this;return i;function i(a){return t.enter("labelImage"),t.enter("labelImageMarker"),t.consume(a),t.exit("labelImageMarker"),s}function s(a){return a===91?(t.enter("labelMarker"),t.consume(a),t.exit("labelMarker"),t.exit("labelImage"),o):n(a)}function o(a){return a===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(a):e(a)}}const JM={name:"labelStartLink",resolveAll:Jg.resolveAll,tokenize:ZM};function ZM(t,e,n){const r=this;return i;function i(o){return t.enter("labelLink"),t.enter("labelMarker"),t.consume(o),t.exit("labelMarker"),t.exit("labelLink"),s}function s(o){return o===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(o):e(o)}}const Zd={name:"lineEnding",tokenize:eV};function eV(t,e){return n;function n(r){return t.enter("lineEnding"),t.consume(r),t.exit("lineEnding"),Me(t,e,"linePrefix")}}const Qu={name:"thematicBreak",tokenize:tV};function tV(t,e,n){let r=0,i;return s;function s(c){return t.enter("thematicBreak"),o(c)}function o(c){return i=c,a(c)}function a(c){return c===i?(t.enter("thematicBreakSequence"),u(c)):r>=3&&(c===null||he(c))?(t.exit("thematicBreak"),e(c)):n(c)}function u(c){return c===i?(t.consume(c),r++,u):(t.exit("thematicBreakSequence"),Se(c)?Me(t,a,"whitespace")(c):a(c))}}const Wt={continuation:{tokenize:sV},exit:aV,name:"list",tokenize:iV},nV={partial:!0,tokenize:lV},rV={partial:!0,tokenize:oV};function iV(t,e,n){const r=this,i=r.events[r.events.length-1];let s=i&&i[1].type==="linePrefix"?i[2].sliceSerialize(i[1],!0).length:0,o=0;return a;function a(g){const _=r.containerState.type||(g===42||g===43||g===45?"listUnordered":"listOrdered");if(_==="listUnordered"?!r.containerState.marker||g===r.containerState.marker:Op(g)){if(r.containerState.type||(r.containerState.type=_,t.enter(_,{_container:!0})),_==="listUnordered")return t.enter("listItemPrefix"),g===42||g===45?t.check(Qu,n,c)(g):c(g);if(!r.interrupt||g===49)return t.enter("listItemPrefix"),t.enter("listItemValue"),u(g)}return n(g)}function u(g){return Op(g)&&++o<10?(t.consume(g),u):(!r.interrupt||o<2)&&(r.containerState.marker?g===r.containerState.marker:g===41||g===46)?(t.exit("listItemValue"),c(g)):n(g)}function c(g){return t.enter("listItemMarker"),t.consume(g),t.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||g,t.check(qh,r.interrupt?n:d,t.attempt(nV,m,f))}function d(g){return r.containerState.initialBlankLine=!0,s++,m(g)}function f(g){return Se(g)?(t.enter("listItemPrefixWhitespace"),t.consume(g),t.exit("listItemPrefixWhitespace"),m):n(g)}function m(g){return r.containerState.size=s+r.sliceSerialize(t.exit("listItemPrefix"),!0).length,e(g)}}function sV(t,e,n){const r=this;return r.containerState._closeFlow=void 0,t.check(qh,i,s);function i(a){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Me(t,e,"listItemIndent",r.containerState.size+1)(a)}function s(a){return r.containerState.furtherBlankLines||!Se(a)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,o(a)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,t.attempt(rV,e,o)(a))}function o(a){return r.containerState._closeFlow=!0,r.interrupt=void 0,Me(t,t.attempt(Wt,e,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(a)}}function oV(t,e,n){const r=this;return Me(t,i,"listItemIndent",r.containerState.size+1);function i(s){const o=r.events[r.events.length-1];return o&&o[1].type==="listItemIndent"&&o[2].sliceSerialize(o[1],!0).length===r.containerState.size?e(s):n(s)}}function aV(t){t.exit(this.containerState.type)}function lV(t,e,n){const r=this;return Me(t,i,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function i(s){const o=r.events[r.events.length-1];return!Se(s)&&o&&o[1].type==="listItemPrefixWhitespace"?e(s):n(s)}}const l0={name:"setextUnderline",resolveTo:uV,tokenize:cV};function uV(t,e){let n=t.length,r,i,s;for(;n--;)if(t[n][0]==="enter"){if(t[n][1].type==="content"){r=n;break}t[n][1].type==="paragraph"&&(i=n)}else t[n][1].type==="content"&&t.splice(n,1),!s&&t[n][1].type==="definition"&&(s=n);const o={type:"setextHeading",start:{...t[r][1].start},end:{...t[t.length-1][1].end}};return t[i][1].type="setextHeadingText",s?(t.splice(i,0,["enter",o,e]),t.splice(s+1,0,["exit",t[r][1],e]),t[r][1].end={...t[s][1].end}):t[r][1]=o,t.push(["exit",o,e]),t}function cV(t,e,n){const r=this;let i;return s;function s(c){let d=r.events.length,f;for(;d--;)if(r.events[d][1].type!=="lineEnding"&&r.events[d][1].type!=="linePrefix"&&r.events[d][1].type!=="content"){f=r.events[d][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||f)?(t.enter("setextHeadingLine"),i=c,o(c)):n(c)}function o(c){return t.enter("setextHeadingLineSequence"),a(c)}function a(c){return c===i?(t.consume(c),a):(t.exit("setextHeadingLineSequence"),Se(c)?Me(t,u,"lineSuffix")(c):u(c))}function u(c){return c===null||he(c)?(t.exit("setextHeadingLine"),e(c)):n(c)}}const hV={tokenize:dV};function dV(t){const e=this,n=t.attempt(qh,r,t.attempt(this.parser.constructs.flowInitial,i,Me(t,t.attempt(this.parser.constructs.flow,i,t.attempt(yM,i)),"linePrefix")));return n;function r(s){if(s===null){t.consume(s);return}return t.enter("lineEndingBlank"),t.consume(s),t.exit("lineEndingBlank"),e.currentConstruct=void 0,n}function i(s){if(s===null){t.consume(s);return}return t.enter("lineEnding"),t.consume(s),t.exit("lineEnding"),e.currentConstruct=void 0,n}}const fV={resolveAll:pT()},pV=fT("string"),mV=fT("text");function fT(t){return{resolveAll:pT(t==="text"?gV:void 0),tokenize:e};function e(n){const r=this,i=this.parser.constructs[t],s=n.attempt(i,o,a);return o;function o(d){return c(d)?s(d):a(d)}function a(d){if(d===null){n.consume(d);return}return n.enter("data"),n.consume(d),u}function u(d){return c(d)?(n.exit("data"),s(d)):(n.consume(d),u)}function c(d){if(d===null)return!0;const f=i[d];let m=-1;if(f)for(;++m<f.length;){const g=f[m];if(!g.previous||g.previous.call(r,r.previous))return!0}return!1}}}function pT(t){return e;function e(n,r){let i=-1,s;for(;++i<=n.length;)s===void 0?n[i]&&n[i][1].type==="data"&&(s=i,i++):(!n[i]||n[i][1].type!=="data")&&(i!==s+2&&(n[s][1].end=n[i-1][1].end,n.splice(s+2,i-s-2),i=s+2),s=void 0);return t?t(n,r):n}}function gV(t,e){let n=0;for(;++n<=t.length;)if((n===t.length||t[n][1].type==="lineEnding")&&t[n-1][1].type==="data"){const r=t[n-1][1],i=e.sliceStream(r);let s=i.length,o=-1,a=0,u;for(;s--;){const c=i[s];if(typeof c=="string"){for(o=c.length;c.charCodeAt(o-1)===32;)a++,o--;if(o)break;o=-1}else if(c===-2)u=!0,a++;else if(c!==-1){s++;break}}if(e._contentTypeTextTrailing&&n===t.length&&(a=0),a){const c={type:n===t.length||u||a<2?"lineSuffix":"hardBreakTrailing",start:{_bufferIndex:s?o:r.start._bufferIndex+o,_index:r.start._index+s,line:r.end.line,column:r.end.column-a,offset:r.end.offset-a},end:{...r.end}};r.end={...c.start},r.start.offset===r.end.offset?Object.assign(r,c):(t.splice(n,0,["enter",c,e],["exit",c,e]),n+=2)}n++}return t}const yV={42:Wt,43:Wt,45:Wt,48:Wt,49:Wt,50:Wt,51:Wt,52:Wt,53:Wt,54:Wt,55:Wt,56:Wt,57:Wt,62:oT},wV={91:EM},_V={[-2]:Jd,[-1]:Jd,32:Jd},vV={35:AM,42:Qu,45:[l0,Qu],60:PM,61:l0,95:Qu,96:o0,126:o0},xV={38:lT,92:aT},EV={[-5]:Zd,[-4]:Zd,[-3]:Zd,33:XM,38:lT,42:Lp,60:[JL,FM],91:JM,92:[bM,aT],93:Jg,95:Lp,96:hM},kV={null:[Lp,fV]},IV={null:[42,95]},TV={null:[]},bV=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:IV,contentInitial:wV,disable:TV,document:yV,flow:vV,flowInitial:_V,insideSpan:kV,string:xV,text:EV},Symbol.toStringTag,{value:"Module"}));function SV(t,e,n){let r={_bufferIndex:-1,_index:0,line:n&&n.line||1,column:n&&n.column||1,offset:n&&n.offset||0};const i={},s=[];let o=[],a=[];const u={attempt:v(M),check:v(D),consume:k,enter:E,exit:O,interrupt:v(D,{interrupt:!0})},c={code:null,containerState:{},defineSkip:b,events:[],now:_,parser:t,previous:null,sliceSerialize:m,sliceStream:g,write:f};let d=e.tokenize.call(c,u);return e.resolveAll&&s.push(e),c;function f(A){return o=kn(o,A),P(),o[o.length-1]!==null?[]:(w(e,0),c.events=Yg(s,c.events,c),c.events)}function m(A,R){return CV(g(A),R)}function g(A){return AV(o,A)}function _(){const{_bufferIndex:A,_index:R,line:C,column:te,offset:ne}=r;return{_bufferIndex:A,_index:R,line:C,column:te,offset:ne}}function b(A){i[A.line]=A.column,S()}function P(){let A;for(;r._index<o.length;){const R=o[r._index];if(typeof R=="string")for(A=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===A&&r._bufferIndex<R.length;)x(R.charCodeAt(r._bufferIndex));else x(R)}}function x(A){d=d(A)}function k(A){he(A)?(r.line++,r.column=1,r.offset+=A===-3?2:1,S()):A!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===o[r._index].length&&(r._bufferIndex=-1,r._index++)),c.previous=A}function E(A,R){const C=R||{};return C.type=A,C.start=_(),c.events.push(["enter",C,c]),a.push(C),C}function O(A){const R=a.pop();return R.end=_(),c.events.push(["exit",R,c]),R}function M(A,R){w(A,R.from)}function D(A,R){R.restore()}function v(A,R){return C;function C(te,ne,X){let W,B,Y,N;return Array.isArray(te)?me(te):"tokenize"in te?me([te]):ue(te);function ue(Ee){return ft;function ft($t){const vn=$t!==null&&Ee[$t],rn=$t!==null&&Ee.null,fr=[...Array.isArray(vn)?vn:vn?[vn]:[],...Array.isArray(rn)?rn:rn?[rn]:[]];return me(fr)($t)}}function me(Ee){return W=Ee,B=0,Ee.length===0?X:j(Ee[B])}function j(Ee){return ft;function ft($t){return N=I(),Y=Ee,Ee.partial||(c.currentConstruct=Ee),Ee.name&&c.parser.constructs.disable.null.includes(Ee.name)?De():Ee.tokenize.call(R?Object.assign(Object.create(c),R):c,u,be,De)($t)}}function be(Ee){return A(Y,N),ne}function De(Ee){return N.restore(),++B<W.length?j(W[B]):X}}}function w(A,R){A.resolveAll&&!s.includes(A)&&s.push(A),A.resolve&&hr(c.events,R,c.events.length-R,A.resolve(c.events.slice(R),c)),A.resolveTo&&(c.events=A.resolveTo(c.events,c))}function I(){const A=_(),R=c.previous,C=c.currentConstruct,te=c.events.length,ne=Array.from(a);return{from:te,restore:X};function X(){r=A,c.previous=R,c.currentConstruct=C,c.events.length=te,a=ne,S()}}function S(){r.line in i&&r.column<2&&(r.column=i[r.line],r.offset+=i[r.line]-1)}}function AV(t,e){const n=e.start._index,r=e.start._bufferIndex,i=e.end._index,s=e.end._bufferIndex;let o;if(n===i)o=[t[n].slice(r,s)];else{if(o=t.slice(n,i),r>-1){const a=o[0];typeof a=="string"?o[0]=a.slice(r):o.shift()}s>0&&o.push(t[i].slice(0,s))}return o}function CV(t,e){let n=-1;const r=[];let i;for(;++n<t.length;){const s=t[n];let o;if(typeof s=="string")o=s;else switch(s){case-5:{o="\r";break}case-4:{o=`
`;break}case-3:{o=`\r
`;break}case-2:{o=e?" ":"	";break}case-1:{if(!e&&i)continue;o=" ";break}default:o=String.fromCharCode(s)}i=s===-2,r.push(o)}return r.join("")}function NV(t){const r={constructs:ML([bV,...(t||{}).extensions||[]]),content:i(HL),defined:[],document:i(GL),flow:i(hV),lazy:{},string:i(pV),text:i(mV)};return r;function i(s){return o;function o(a){return SV(r,s,a)}}}function RV(t){for(;!uT(t););return t}const u0=/[\0\t\n\r]/g;function PV(){let t=1,e="",n=!0,r;return i;function i(s,o,a){const u=[];let c,d,f,m,g;for(s=e+(typeof s=="string"?s.toString():new TextDecoder(o||void 0).decode(s)),f=0,e="",n&&(s.charCodeAt(0)===65279&&f++,n=void 0);f<s.length;){if(u0.lastIndex=f,c=u0.exec(s),m=c&&c.index!==void 0?c.index:s.length,g=s.charCodeAt(m),!c){e=s.slice(f);break}if(g===10&&f===m&&r)u.push(-3),r=void 0;else switch(r&&(u.push(-5),r=void 0),f<m&&(u.push(s.slice(f,m)),t+=m-f),g){case 0:{u.push(65533),t++;break}case 9:{for(d=Math.ceil(t/4)*4,u.push(-2);t++<d;)u.push(-1);break}case 10:{u.push(-4),t=1;break}default:r=!0,t=1}f=m+1}return a&&(r&&u.push(-5),e&&u.push(e),u.push(null)),u}}const DV=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function jV(t){return t.replace(DV,OV)}function OV(t,e,n){if(e)return e;if(n.charCodeAt(0)===35){const i=n.charCodeAt(1),s=i===120||i===88;return sT(n.slice(s?2:1),s?16:10)}return Xg(n)||t}const mT={}.hasOwnProperty;function LV(t,e,n){return typeof e!="string"&&(n=e,e=void 0),MV(n)(RV(NV(n).document().write(PV()(t,e,!0))))}function MV(t){const e={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:s(at),autolinkProtocol:I,autolinkEmail:I,atxHeading:s(Cn),blockQuote:s(rn),characterEscape:I,characterReference:I,codeFenced:s(fr),codeFencedFenceInfo:o,codeFencedFenceMeta:o,codeIndented:s(fr,o),codeText:s(bs,o),codeTextData:I,data:I,codeFlowValue:I,definition:s(se),definitionDestinationString:o,definitionLabelString:o,definitionTitleString:o,emphasis:s(re),hardBreakEscape:s(Wn),hardBreakTrailing:s(Wn),htmlFlow:s(Gn,o),htmlFlowData:I,htmlText:s(Gn,o),htmlTextData:I,image:s(Ul),label:o,link:s(at),listItem:s(Ss),listItemValue:m,listOrdered:s(pt,f),listUnordered:s(pt),paragraph:s(Gh),reference:j,referenceString:o,resourceDestinationString:o,resourceTitleString:o,setextHeading:s(Cn),strong:s(zl),thematicBreak:s(Mi)},exit:{atxHeading:u(),atxHeadingSequence:M,autolink:u(),autolinkEmail:vn,autolinkProtocol:$t,blockQuote:u(),characterEscapeValue:S,characterReferenceMarkerHexadecimal:De,characterReferenceMarkerNumeric:De,characterReferenceValue:Ee,characterReference:ft,codeFenced:u(P),codeFencedFence:b,codeFencedFenceInfo:g,codeFencedFenceMeta:_,codeFlowValue:S,codeIndented:u(x),codeText:u(ne),codeTextData:S,data:S,definition:u(),definitionDestinationString:O,definitionLabelString:k,definitionTitleString:E,emphasis:u(),hardBreakEscape:u(R),hardBreakTrailing:u(R),htmlFlow:u(C),htmlFlowData:S,htmlText:u(te),htmlTextData:S,image:u(W),label:Y,labelText:B,lineEnding:A,link:u(X),listItem:u(),listOrdered:u(),listUnordered:u(),paragraph:u(),referenceString:be,resourceDestinationString:N,resourceTitleString:ue,resource:me,setextHeading:u(w),setextHeadingLineSequence:v,setextHeadingText:D,strong:u(),thematicBreak:u()}};gT(e,(t||{}).mdastExtensions||[]);const n={};return r;function r(z){let K={type:"root",children:[]};const ce={stack:[K],tokenStack:[],config:e,enter:a,exit:c,buffer:o,resume:d,data:n},ye=[];let Ce=-1;for(;++Ce<z.length;)if(z[Ce][1].type==="listOrdered"||z[Ce][1].type==="listUnordered")if(z[Ce][0]==="enter")ye.push(Ce);else{const qt=ye.pop();Ce=i(z,qt,Ce)}for(Ce=-1;++Ce<z.length;){const qt=e[z[Ce][0]];mT.call(qt,z[Ce][1].type)&&qt[z[Ce][1].type].call(Object.assign({sliceSerialize:z[Ce][2].sliceSerialize},ce),z[Ce][1])}if(ce.tokenStack.length>0){const qt=ce.tokenStack[ce.tokenStack.length-1];(qt[1]||c0).call(ce,void 0,qt[0])}for(K.position={start:Wr(z.length>0?z[0][1].start:{line:1,column:1,offset:0}),end:Wr(z.length>0?z[z.length-2][1].end:{line:1,column:1,offset:0})},Ce=-1;++Ce<e.transforms.length;)K=e.transforms[Ce](K)||K;return K}function i(z,K,ce){let ye=K-1,Ce=-1,qt=!1,Kn,Ot,pr,mr;for(;++ye<=ce;){const Ze=z[ye];switch(Ze[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{Ze[0]==="enter"?Ce++:Ce--,mr=void 0;break}case"lineEndingBlank":{Ze[0]==="enter"&&(Kn&&!mr&&!Ce&&!pr&&(pr=ye),mr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:mr=void 0}if(!Ce&&Ze[0]==="enter"&&Ze[1].type==="listItemPrefix"||Ce===-1&&Ze[0]==="exit"&&(Ze[1].type==="listUnordered"||Ze[1].type==="listOrdered")){if(Kn){let gr=ye;for(Ot=void 0;gr--;){const Ht=z[gr];if(Ht[1].type==="lineEnding"||Ht[1].type==="lineEndingBlank"){if(Ht[0]==="exit")continue;Ot&&(z[Ot][1].type="lineEndingBlank",qt=!0),Ht[1].type="lineEnding",Ot=gr}else if(!(Ht[1].type==="linePrefix"||Ht[1].type==="blockQuotePrefix"||Ht[1].type==="blockQuotePrefixWhitespace"||Ht[1].type==="blockQuoteMarker"||Ht[1].type==="listItemIndent"))break}pr&&(!Ot||pr<Ot)&&(Kn._spread=!0),Kn.end=Object.assign({},Ot?z[Ot][1].start:Ze[1].end),z.splice(Ot||ye,0,["exit",Kn,Ze[2]]),ye++,ce++}if(Ze[1].type==="listItemPrefix"){const gr={type:"listItem",_spread:!1,start:Object.assign({},Ze[1].start),end:void 0};Kn=gr,z.splice(ye,0,["enter",gr,Ze[2]]),ye++,ce++,pr=void 0,mr=!0}}}return z[K][1]._spread=qt,ce}function s(z,K){return ce;function ce(ye){a.call(this,z(ye),ye),K&&K.call(this,ye)}}function o(){this.stack.push({type:"fragment",children:[]})}function a(z,K,ce){this.stack[this.stack.length-1].children.push(z),this.stack.push(z),this.tokenStack.push([K,ce||void 0]),z.position={start:Wr(K.start),end:void 0}}function u(z){return K;function K(ce){z&&z.call(this,ce),c.call(this,ce)}}function c(z,K){const ce=this.stack.pop(),ye=this.tokenStack.pop();if(ye)ye[0].type!==z.type&&(K?K.call(this,z,ye[0]):(ye[1]||c0).call(this,z,ye[0]));else throw new Error("Cannot close `"+z.type+"` ("+za({start:z.start,end:z.end})+"): its not open");ce.position.end=Wr(z.end)}function d(){return OL(this.stack.pop())}function f(){this.data.expectingFirstListItemValue=!0}function m(z){if(this.data.expectingFirstListItemValue){const K=this.stack[this.stack.length-2];K.start=Number.parseInt(this.sliceSerialize(z),10),this.data.expectingFirstListItemValue=void 0}}function g(){const z=this.resume(),K=this.stack[this.stack.length-1];K.lang=z}function _(){const z=this.resume(),K=this.stack[this.stack.length-1];K.meta=z}function b(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function P(){const z=this.resume(),K=this.stack[this.stack.length-1];K.value=z.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function x(){const z=this.resume(),K=this.stack[this.stack.length-1];K.value=z.replace(/(\r?\n|\r)$/g,"")}function k(z){const K=this.resume(),ce=this.stack[this.stack.length-1];ce.label=K,ce.identifier=lo(this.sliceSerialize(z)).toLowerCase()}function E(){const z=this.resume(),K=this.stack[this.stack.length-1];K.title=z}function O(){const z=this.resume(),K=this.stack[this.stack.length-1];K.url=z}function M(z){const K=this.stack[this.stack.length-1];if(!K.depth){const ce=this.sliceSerialize(z).length;K.depth=ce}}function D(){this.data.setextHeadingSlurpLineEnding=!0}function v(z){const K=this.stack[this.stack.length-1];K.depth=this.sliceSerialize(z).codePointAt(0)===61?1:2}function w(){this.data.setextHeadingSlurpLineEnding=void 0}function I(z){const ce=this.stack[this.stack.length-1].children;let ye=ce[ce.length-1];(!ye||ye.type!=="text")&&(ye=Kh(),ye.position={start:Wr(z.start),end:void 0},ce.push(ye)),this.stack.push(ye)}function S(z){const K=this.stack.pop();K.value+=this.sliceSerialize(z),K.position.end=Wr(z.end)}function A(z){const K=this.stack[this.stack.length-1];if(this.data.atHardBreak){const ce=K.children[K.children.length-1];ce.position.end=Wr(z.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&e.canContainEols.includes(K.type)&&(I.call(this,z),S.call(this,z))}function R(){this.data.atHardBreak=!0}function C(){const z=this.resume(),K=this.stack[this.stack.length-1];K.value=z}function te(){const z=this.resume(),K=this.stack[this.stack.length-1];K.value=z}function ne(){const z=this.resume(),K=this.stack[this.stack.length-1];K.value=z}function X(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=K,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function W(){const z=this.stack[this.stack.length-1];if(this.data.inReference){const K=this.data.referenceType||"shortcut";z.type+="Reference",z.referenceType=K,delete z.url,delete z.title}else delete z.identifier,delete z.label;this.data.referenceType=void 0}function B(z){const K=this.sliceSerialize(z),ce=this.stack[this.stack.length-2];ce.label=jV(K),ce.identifier=lo(K).toLowerCase()}function Y(){const z=this.stack[this.stack.length-1],K=this.resume(),ce=this.stack[this.stack.length-1];if(this.data.inReference=!0,ce.type==="link"){const ye=z.children;ce.children=ye}else ce.alt=K}function N(){const z=this.resume(),K=this.stack[this.stack.length-1];K.url=z}function ue(){const z=this.resume(),K=this.stack[this.stack.length-1];K.title=z}function me(){this.data.inReference=void 0}function j(){this.data.referenceType="collapsed"}function be(z){const K=this.resume(),ce=this.stack[this.stack.length-1];ce.label=K,ce.identifier=lo(this.sliceSerialize(z)).toLowerCase(),this.data.referenceType="full"}function De(z){this.data.characterReferenceType=z.type}function Ee(z){const K=this.sliceSerialize(z),ce=this.data.characterReferenceType;let ye;ce?(ye=sT(K,ce==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):ye=Xg(K);const Ce=this.stack[this.stack.length-1];Ce.value+=ye}function ft(z){const K=this.stack.pop();K.position.end=Wr(z.end)}function $t(z){S.call(this,z);const K=this.stack[this.stack.length-1];K.url=this.sliceSerialize(z)}function vn(z){S.call(this,z);const K=this.stack[this.stack.length-1];K.url="mailto:"+this.sliceSerialize(z)}function rn(){return{type:"blockquote",children:[]}}function fr(){return{type:"code",lang:null,meta:null,value:""}}function bs(){return{type:"inlineCode",value:""}}function se(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function re(){return{type:"emphasis",children:[]}}function Cn(){return{type:"heading",depth:0,children:[]}}function Wn(){return{type:"break"}}function Gn(){return{type:"html",value:""}}function Ul(){return{type:"image",title:null,url:"",alt:null}}function at(){return{type:"link",title:null,url:"",children:[]}}function pt(z){return{type:"list",ordered:z.type==="listOrdered",start:null,spread:z._spread,children:[]}}function Ss(z){return{type:"listItem",spread:z._spread,checked:null,children:[]}}function Gh(){return{type:"paragraph",children:[]}}function zl(){return{type:"strong",children:[]}}function Kh(){return{type:"text",value:""}}function Mi(){return{type:"thematicBreak"}}}function Wr(t){return{line:t.line,column:t.column,offset:t.offset}}function gT(t,e){let n=-1;for(;++n<e.length;){const r=e[n];Array.isArray(r)?gT(t,r):VV(t,r)}}function VV(t,e){let n;for(n in e)if(mT.call(e,n))switch(n){case"canContainEols":{const r=e[n];r&&t[n].push(...r);break}case"transforms":{const r=e[n];r&&t[n].push(...r);break}case"enter":case"exit":{const r=e[n];r&&Object.assign(t[n],r);break}}}function c0(t,e){throw t?new Error("Cannot close `"+t.type+"` ("+za({start:t.start,end:t.end})+"): a different token (`"+e.type+"`, "+za({start:e.start,end:e.end})+") is open"):new Error("Cannot close document, a token (`"+e.type+"`, "+za({start:e.start,end:e.end})+") is still open")}function FV(t){const e=this;e.parser=n;function n(r){return LV(r,{...e.data("settings"),...t,extensions:e.data("micromarkExtensions")||[],mdastExtensions:e.data("fromMarkdownExtensions")||[]})}}function UV(t,e){const n={type:"element",tagName:"blockquote",properties:{},children:t.wrap(t.all(e),!0)};return t.patch(e,n),t.applyData(e,n)}function zV(t,e){const n={type:"element",tagName:"br",properties:{},children:[]};return t.patch(e,n),[t.applyData(e,n),{type:"text",value:`
`}]}function BV(t,e){const n=e.value?e.value+`
`:"",r={},i=e.lang?e.lang.split(/\s+/):[];i.length>0&&(r.className=["language-"+i[0]]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return e.meta&&(s.data={meta:e.meta}),t.patch(e,s),s=t.applyData(e,s),s={type:"element",tagName:"pre",properties:{},children:[s]},t.patch(e,s),s}function $V(t,e){const n={type:"element",tagName:"del",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function qV(t,e){const n={type:"element",tagName:"em",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function HV(t,e){const n=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",r=String(e.identifier).toUpperCase(),i=Bo(r.toLowerCase()),s=t.footnoteOrder.indexOf(r);let o,a=t.footnoteCounts.get(r);a===void 0?(a=0,t.footnoteOrder.push(r),o=t.footnoteOrder.length):o=s+1,a+=1,t.footnoteCounts.set(r,a);const u={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+i,id:n+"fnref-"+i+(a>1?"-"+a:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(o)}]};t.patch(e,u);const c={type:"element",tagName:"sup",properties:{},children:[u]};return t.patch(e,c),t.applyData(e,c)}function WV(t,e){const n={type:"element",tagName:"h"+e.depth,properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function GV(t,e){if(t.options.allowDangerousHtml){const n={type:"raw",value:e.value};return t.patch(e,n),t.applyData(e,n)}}function yT(t,e){const n=e.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(e.label||e.identifier)+"]"),e.type==="imageReference")return[{type:"text",value:"!["+e.alt+r}];const i=t.all(e),s=i[0];s&&s.type==="text"?s.value="["+s.value:i.unshift({type:"text",value:"["});const o=i[i.length-1];return o&&o.type==="text"?o.value+=r:i.push({type:"text",value:r}),i}function KV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yT(t,e);const i={src:Bo(r.url||""),alt:e.alt};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"img",properties:i,children:[]};return t.patch(e,s),t.applyData(e,s)}function QV(t,e){const n={src:Bo(e.url)};e.alt!==null&&e.alt!==void 0&&(n.alt=e.alt),e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"img",properties:n,children:[]};return t.patch(e,r),t.applyData(e,r)}function XV(t,e){const n={type:"text",value:e.value.replace(/\r?\n|\r/g," ")};t.patch(e,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return t.patch(e,r),t.applyData(e,r)}function YV(t,e){const n=String(e.identifier).toUpperCase(),r=t.definitionById.get(n);if(!r)return yT(t,e);const i={href:Bo(r.url||"")};r.title!==null&&r.title!==void 0&&(i.title=r.title);const s={type:"element",tagName:"a",properties:i,children:t.all(e)};return t.patch(e,s),t.applyData(e,s)}function JV(t,e){const n={href:Bo(e.url)};e.title!==null&&e.title!==void 0&&(n.title=e.title);const r={type:"element",tagName:"a",properties:n,children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function ZV(t,e,n){const r=t.all(e),i=n?e3(n):wT(e),s={},o=[];if(typeof e.checked=="boolean"){const d=r[0];let f;d&&d.type==="element"&&d.tagName==="p"?f=d:(f={type:"element",tagName:"p",properties:{},children:[]},r.unshift(f)),f.children.length>0&&f.children.unshift({type:"text",value:" "}),f.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:e.checked,disabled:!0},children:[]}),s.className=["task-list-item"]}let a=-1;for(;++a<r.length;){const d=r[a];(i||a!==0||d.type!=="element"||d.tagName!=="p")&&o.push({type:"text",value:`
`}),d.type==="element"&&d.tagName==="p"&&!i?o.push(...d.children):o.push(d)}const u=r[r.length-1];u&&(i||u.type!=="element"||u.tagName!=="p")&&o.push({type:"text",value:`
`});const c={type:"element",tagName:"li",properties:s,children:o};return t.patch(e,c),t.applyData(e,c)}function e3(t){let e=!1;if(t.type==="list"){e=t.spread||!1;const n=t.children;let r=-1;for(;!e&&++r<n.length;)e=wT(n[r])}return e}function wT(t){const e=t.spread;return e??t.children.length>1}function t3(t,e){const n={},r=t.all(e);let i=-1;for(typeof e.start=="number"&&e.start!==1&&(n.start=e.start);++i<r.length;){const o=r[i];if(o.type==="element"&&o.tagName==="li"&&o.properties&&Array.isArray(o.properties.className)&&o.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const s={type:"element",tagName:e.ordered?"ol":"ul",properties:n,children:t.wrap(r,!0)};return t.patch(e,s),t.applyData(e,s)}function n3(t,e){const n={type:"element",tagName:"p",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function r3(t,e){const n={type:"root",children:t.wrap(t.all(e))};return t.patch(e,n),t.applyData(e,n)}function i3(t,e){const n={type:"element",tagName:"strong",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}function s3(t,e){const n=t.all(e),r=n.shift(),i=[];if(r){const o={type:"element",tagName:"thead",properties:{},children:t.wrap([r],!0)};t.patch(e.children[0],o),i.push(o)}if(n.length>0){const o={type:"element",tagName:"tbody",properties:{},children:t.wrap(n,!0)},a=Wg(e.children[1]),u=JI(e.children[e.children.length-1]);a&&u&&(o.position={start:a,end:u}),i.push(o)}const s={type:"element",tagName:"table",properties:{},children:t.wrap(i,!0)};return t.patch(e,s),t.applyData(e,s)}function o3(t,e,n){const r=n?n.children:void 0,s=(r?r.indexOf(e):1)===0?"th":"td",o=n&&n.type==="table"?n.align:void 0,a=o?o.length:e.children.length;let u=-1;const c=[];for(;++u<a;){const f=e.children[u],m={},g=o?o[u]:void 0;g&&(m.align=g);let _={type:"element",tagName:s,properties:m,children:[]};f&&(_.children=t.all(f),t.patch(f,_),_=t.applyData(f,_)),c.push(_)}const d={type:"element",tagName:"tr",properties:{},children:t.wrap(c,!0)};return t.patch(e,d),t.applyData(e,d)}function a3(t,e){const n={type:"element",tagName:"td",properties:{},children:t.all(e)};return t.patch(e,n),t.applyData(e,n)}const h0=9,d0=32;function l3(t){const e=String(t),n=/\r?\n|\r/g;let r=n.exec(e),i=0;const s=[];for(;r;)s.push(f0(e.slice(i,r.index),i>0,!0),r[0]),i=r.index+r[0].length,r=n.exec(e);return s.push(f0(e.slice(i),i>0,!1)),s.join("")}function f0(t,e,n){let r=0,i=t.length;if(e){let s=t.codePointAt(r);for(;s===h0||s===d0;)r++,s=t.codePointAt(r)}if(n){let s=t.codePointAt(i-1);for(;s===h0||s===d0;)i--,s=t.codePointAt(i-1)}return i>r?t.slice(r,i):""}function u3(t,e){const n={type:"text",value:l3(String(e.value))};return t.patch(e,n),t.applyData(e,n)}function c3(t,e){const n={type:"element",tagName:"hr",properties:{},children:[]};return t.patch(e,n),t.applyData(e,n)}const h3={blockquote:UV,break:zV,code:BV,delete:$V,emphasis:qV,footnoteReference:HV,heading:WV,html:GV,imageReference:KV,image:QV,inlineCode:XV,linkReference:YV,link:JV,listItem:ZV,list:t3,paragraph:n3,root:r3,strong:i3,table:s3,tableCell:a3,tableRow:o3,text:u3,thematicBreak:c3,toml:Iu,yaml:Iu,definition:Iu,footnoteDefinition:Iu};function Iu(){}const _T=-1,Hh=0,$a=1,$c=2,Zg=3,ey=4,ty=5,ny=6,vT=7,xT=8,p0=typeof self=="object"?self:globalThis,d3=(t,e)=>{const n=(i,s)=>(t.set(s,i),i),r=i=>{if(t.has(i))return t.get(i);const[s,o]=e[i];switch(s){case Hh:case _T:return n(o,i);case $a:{const a=n([],i);for(const u of o)a.push(r(u));return a}case $c:{const a=n({},i);for(const[u,c]of o)a[r(u)]=r(c);return a}case Zg:return n(new Date(o),i);case ey:{const{source:a,flags:u}=o;return n(new RegExp(a,u),i)}case ty:{const a=n(new Map,i);for(const[u,c]of o)a.set(r(u),r(c));return a}case ny:{const a=n(new Set,i);for(const u of o)a.add(r(u));return a}case vT:{const{name:a,message:u}=o;return n(new p0[a](u),i)}case xT:return n(BigInt(o),i);case"BigInt":return n(Object(BigInt(o)),i);case"ArrayBuffer":return n(new Uint8Array(o).buffer,o);case"DataView":{const{buffer:a}=new Uint8Array(o);return n(new DataView(a),o)}}return n(new p0[s](o),i)};return r},m0=t=>d3(new Map,t)(0),Ps="",{toString:f3}={},{keys:p3}=Object,pa=t=>{const e=typeof t;if(e!=="object"||!t)return[Hh,e];const n=f3.call(t).slice(8,-1);switch(n){case"Array":return[$a,Ps];case"Object":return[$c,Ps];case"Date":return[Zg,Ps];case"RegExp":return[ey,Ps];case"Map":return[ty,Ps];case"Set":return[ny,Ps];case"DataView":return[$a,n]}return n.includes("Array")?[$a,n]:n.includes("Error")?[vT,n]:[$c,n]},Tu=([t,e])=>t===Hh&&(e==="function"||e==="symbol"),m3=(t,e,n,r)=>{const i=(o,a)=>{const u=r.push(o)-1;return n.set(a,u),u},s=o=>{if(n.has(o))return n.get(o);let[a,u]=pa(o);switch(a){case Hh:{let d=o;switch(u){case"bigint":a=xT,d=o.toString();break;case"function":case"symbol":if(t)throw new TypeError("unable to serialize "+u);d=null;break;case"undefined":return i([_T],o)}return i([a,d],o)}case $a:{if(u){let m=o;return u==="DataView"?m=new Uint8Array(o.buffer):u==="ArrayBuffer"&&(m=new Uint8Array(o)),i([u,[...m]],o)}const d=[],f=i([a,d],o);for(const m of o)d.push(s(m));return f}case $c:{if(u)switch(u){case"BigInt":return i([u,o.toString()],o);case"Boolean":case"Number":case"String":return i([u,o.valueOf()],o)}if(e&&"toJSON"in o)return s(o.toJSON());const d=[],f=i([a,d],o);for(const m of p3(o))(t||!Tu(pa(o[m])))&&d.push([s(m),s(o[m])]);return f}case Zg:return i([a,o.toISOString()],o);case ey:{const{source:d,flags:f}=o;return i([a,{source:d,flags:f}],o)}case ty:{const d=[],f=i([a,d],o);for(const[m,g]of o)(t||!(Tu(pa(m))||Tu(pa(g))))&&d.push([s(m),s(g)]);return f}case ny:{const d=[],f=i([a,d],o);for(const m of o)(t||!Tu(pa(m)))&&d.push(s(m));return f}}const{message:c}=o;return i([a,{name:u,message:c}],o)};return s},g0=(t,{json:e,lossy:n}={})=>{const r=[];return m3(!(e||n),!!e,new Map,r)(t),r},qc=typeof structuredClone=="function"?(t,e)=>e&&("json"in e||"lossy"in e)?m0(g0(t,e)):structuredClone(t):(t,e)=>m0(g0(t,e));function g3(t,e){const n=[{type:"text",value:""}];return e>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(e)}]}),n}function y3(t,e){return"Back to reference "+(t+1)+(e>1?"-"+e:"")}function w3(t){const e=typeof t.options.clobberPrefix=="string"?t.options.clobberPrefix:"user-content-",n=t.options.footnoteBackContent||g3,r=t.options.footnoteBackLabel||y3,i=t.options.footnoteLabel||"Footnotes",s=t.options.footnoteLabelTagName||"h2",o=t.options.footnoteLabelProperties||{className:["sr-only"]},a=[];let u=-1;for(;++u<t.footnoteOrder.length;){const c=t.footnoteById.get(t.footnoteOrder[u]);if(!c)continue;const d=t.all(c),f=String(c.identifier).toUpperCase(),m=Bo(f.toLowerCase());let g=0;const _=[],b=t.footnoteCounts.get(f);for(;b!==void 0&&++g<=b;){_.length>0&&_.push({type:"text",value:" "});let k=typeof n=="string"?n:n(u,g);typeof k=="string"&&(k={type:"text",value:k}),_.push({type:"element",tagName:"a",properties:{href:"#"+e+"fnref-"+m+(g>1?"-"+g:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(u,g),className:["data-footnote-backref"]},children:Array.isArray(k)?k:[k]})}const P=d[d.length-1];if(P&&P.type==="element"&&P.tagName==="p"){const k=P.children[P.children.length-1];k&&k.type==="text"?k.value+=" ":P.children.push({type:"text",value:" "}),P.children.push(..._)}else d.push(..._);const x={type:"element",tagName:"li",properties:{id:e+"fn-"+m},children:t.wrap(d,!0)};t.patch(c,x),a.push(x)}if(a.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:s,properties:{...qc(o),id:"footnote-label"},children:[{type:"text",value:i}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:t.wrap(a,!0)},{type:"text",value:`
`}]}}const ry=function(t){if(t==null)return E3;if(typeof t=="function")return Wh(t);if(typeof t=="object")return Array.isArray(t)?_3(t):v3(t);if(typeof t=="string")return x3(t);throw new Error("Expected function, string, or object as test")};function _3(t){const e=[];let n=-1;for(;++n<t.length;)e[n]=ry(t[n]);return Wh(r);function r(...i){let s=-1;for(;++s<e.length;)if(e[s].apply(this,i))return!0;return!1}}function v3(t){const e=t;return Wh(n);function n(r){const i=r;let s;for(s in t)if(i[s]!==e[s])return!1;return!0}}function x3(t){return Wh(e);function e(n){return n&&n.type===t}}function Wh(t){return e;function e(n,r,i){return!!(k3(n)&&t.call(this,n,typeof r=="number"?r:void 0,i||void 0))}}function E3(){return!0}function k3(t){return t!==null&&typeof t=="object"&&"type"in t}const ET=[],I3=!0,y0=!1,T3="skip";function kT(t,e,n,r){let i;typeof e=="function"&&typeof n!="function"?(r=n,n=e):i=e;const s=ry(i),o=r?-1:1;a(t,void 0,[])();function a(u,c,d){const f=u&&typeof u=="object"?u:{};if(typeof f.type=="string"){const g=typeof f.tagName=="string"?f.tagName:typeof f.name=="string"?f.name:void 0;Object.defineProperty(m,"name",{value:"node ("+(u.type+(g?"<"+g+">":""))+")"})}return m;function m(){let g=ET,_,b,P;if((!e||s(u,c,d[d.length-1]||void 0))&&(g=b3(n(u,d)),g[0]===y0))return g;if("children"in u&&u.children){const x=u;if(x.children&&g[0]!==T3)for(b=(r?x.children.length:-1)+o,P=d.concat(x);b>-1&&b<x.children.length;){const k=x.children[b];if(_=a(k,b,P)(),_[0]===y0)return _;b=typeof _[1]=="number"?_[1]:b+o}}return g}}}function b3(t){return Array.isArray(t)?t:typeof t=="number"?[I3,t]:t==null?ET:[t]}function IT(t,e,n,r){let i,s,o;typeof e=="function"&&typeof n!="function"?(s=void 0,o=e,i=n):(s=e,o=n,i=r),kT(t,s,a,i);function a(u,c){const d=c[c.length-1],f=d?d.children.indexOf(u):void 0;return o(u,f,d)}}const Mp={}.hasOwnProperty,S3={};function A3(t,e){const n=e||S3,r=new Map,i=new Map,s=new Map,o={...h3,...n.handlers},a={all:c,applyData:N3,definitionById:r,footnoteById:i,footnoteCounts:s,footnoteOrder:[],handlers:o,one:u,options:n,patch:C3,wrap:P3};return IT(t,function(d){if(d.type==="definition"||d.type==="footnoteDefinition"){const f=d.type==="definition"?r:i,m=String(d.identifier).toUpperCase();f.has(m)||f.set(m,d)}}),a;function u(d,f){const m=d.type,g=a.handlers[m];if(Mp.call(a.handlers,m)&&g)return g(a,d,f);if(a.options.passThrough&&a.options.passThrough.includes(m)){if("children"in d){const{children:b,...P}=d,x=qc(P);return x.children=a.all(d),x}return qc(d)}return(a.options.unknownHandler||R3)(a,d,f)}function c(d){const f=[];if("children"in d){const m=d.children;let g=-1;for(;++g<m.length;){const _=a.one(m[g],d);if(_){if(g&&m[g-1].type==="break"&&(!Array.isArray(_)&&_.type==="text"&&(_.value=w0(_.value)),!Array.isArray(_)&&_.type==="element")){const b=_.children[0];b&&b.type==="text"&&(b.value=w0(b.value))}Array.isArray(_)?f.push(..._):f.push(_)}}}return f}}function C3(t,e){t.position&&(e.position=fL(t))}function N3(t,e){let n=e;if(t&&t.data){const r=t.data.hName,i=t.data.hChildren,s=t.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const o="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:o}}n.type==="element"&&s&&Object.assign(n.properties,qc(s)),"children"in n&&n.children&&i!==null&&i!==void 0&&(n.children=i)}return n}function R3(t,e){const n=e.data||{},r="value"in e&&!(Mp.call(n,"hProperties")||Mp.call(n,"hChildren"))?{type:"text",value:e.value}:{type:"element",tagName:"div",properties:{},children:t.all(e)};return t.patch(e,r),t.applyData(e,r)}function P3(t,e){const n=[];let r=-1;for(e&&n.push({type:"text",value:`
`});++r<t.length;)r&&n.push({type:"text",value:`
`}),n.push(t[r]);return e&&t.length>0&&n.push({type:"text",value:`
`}),n}function w0(t){let e=0,n=t.charCodeAt(e);for(;n===9||n===32;)e++,n=t.charCodeAt(e);return t.slice(e)}function _0(t,e){const n=A3(t,e),r=n.one(t,void 0),i=w3(n),s=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return i&&s.children.push({type:"text",value:`
`},i),s}function D3(t,e){return t&&"run"in t?async function(n,r){const i=_0(n,{file:r,...e});await t.run(i,r)}:function(n,r){return _0(n,{file:r,...t||e})}}function v0(t){if(t)throw t}var Xu=Object.prototype.hasOwnProperty,TT=Object.prototype.toString,x0=Object.defineProperty,E0=Object.getOwnPropertyDescriptor,k0=function(e){return typeof Array.isArray=="function"?Array.isArray(e):TT.call(e)==="[object Array]"},I0=function(e){if(!e||TT.call(e)!=="[object Object]")return!1;var n=Xu.call(e,"constructor"),r=e.constructor&&e.constructor.prototype&&Xu.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!n&&!r)return!1;var i;for(i in e);return typeof i>"u"||Xu.call(e,i)},T0=function(e,n){x0&&n.name==="__proto__"?x0(e,n.name,{enumerable:!0,configurable:!0,value:n.newValue,writable:!0}):e[n.name]=n.newValue},b0=function(e,n){if(n==="__proto__")if(Xu.call(e,n)){if(E0)return E0(e,n).value}else return;return e[n]},j3=function t(){var e,n,r,i,s,o,a=arguments[0],u=1,c=arguments.length,d=!1;for(typeof a=="boolean"&&(d=a,a=arguments[1]||{},u=2),(a==null||typeof a!="object"&&typeof a!="function")&&(a={});u<c;++u)if(e=arguments[u],e!=null)for(n in e)r=b0(a,n),i=b0(e,n),a!==i&&(d&&i&&(I0(i)||(s=k0(i)))?(s?(s=!1,o=r&&k0(r)?r:[]):o=r&&I0(r)?r:{},T0(a,{name:n,newValue:t(d,o,i)})):typeof i<"u"&&T0(a,{name:n,newValue:i}));return a};const ef=Up(j3);function Vp(t){if(typeof t!="object"||t===null)return!1;const e=Object.getPrototypeOf(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)}function O3(){const t=[],e={run:n,use:r};return e;function n(...i){let s=-1;const o=i.pop();if(typeof o!="function")throw new TypeError("Expected function as last argument, not "+o);a(null,...i);function a(u,...c){const d=t[++s];let f=-1;if(u){o(u);return}for(;++f<i.length;)(c[f]===null||c[f]===void 0)&&(c[f]=i[f]);i=c,d?L3(d,a)(...c):o(null,...c)}}function r(i){if(typeof i!="function")throw new TypeError("Expected `middelware` to be a function, not "+i);return t.push(i),e}}function L3(t,e){let n;return r;function r(...o){const a=t.length>o.length;let u;a&&o.push(i);try{u=t.apply(this,o)}catch(c){const d=c;if(a&&n)throw d;return i(d)}a||(u&&u.then&&typeof u.then=="function"?u.then(s,i):u instanceof Error?i(u):s(u))}function i(o,...a){n||(n=!0,e(o,...a))}function s(o){i(null,o)}}const Zn={basename:M3,dirname:V3,extname:F3,join:U3,sep:"/"};function M3(t,e){if(e!==void 0&&typeof e!="string")throw new TypeError('"ext" argument must be a string');Fl(t);let n=0,r=-1,i=t.length,s;if(e===void 0||e.length===0||e.length>t.length){for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else r<0&&(s=!0,r=i+1);return r<0?"":t.slice(n,r)}if(e===t)return"";let o=-1,a=e.length-1;for(;i--;)if(t.codePointAt(i)===47){if(s){n=i+1;break}}else o<0&&(s=!0,o=i+1),a>-1&&(t.codePointAt(i)===e.codePointAt(a--)?a<0&&(r=i):(a=-1,r=o));return n===r?r=o:r<0&&(r=t.length),t.slice(n,r)}function V3(t){if(Fl(t),t.length===0)return".";let e=-1,n=t.length,r;for(;--n;)if(t.codePointAt(n)===47){if(r){e=n;break}}else r||(r=!0);return e<0?t.codePointAt(0)===47?"/":".":e===1&&t.codePointAt(0)===47?"//":t.slice(0,e)}function F3(t){Fl(t);let e=t.length,n=-1,r=0,i=-1,s=0,o;for(;e--;){const a=t.codePointAt(e);if(a===47){if(o){r=e+1;break}continue}n<0&&(o=!0,n=e+1),a===46?i<0?i=e:s!==1&&(s=1):i>-1&&(s=-1)}return i<0||n<0||s===0||s===1&&i===n-1&&i===r+1?"":t.slice(i,n)}function U3(...t){let e=-1,n;for(;++e<t.length;)Fl(t[e]),t[e]&&(n=n===void 0?t[e]:n+"/"+t[e]);return n===void 0?".":z3(n)}function z3(t){Fl(t);const e=t.codePointAt(0)===47;let n=B3(t,!e);return n.length===0&&!e&&(n="."),n.length>0&&t.codePointAt(t.length-1)===47&&(n+="/"),e?"/"+n:n}function B3(t,e){let n="",r=0,i=-1,s=0,o=-1,a,u;for(;++o<=t.length;){if(o<t.length)a=t.codePointAt(o);else{if(a===47)break;a=47}if(a===47){if(!(i===o-1||s===1))if(i!==o-1&&s===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(u=n.lastIndexOf("/"),u!==n.length-1){u<0?(n="",r=0):(n=n.slice(0,u),r=n.length-1-n.lastIndexOf("/")),i=o,s=0;continue}}else if(n.length>0){n="",r=0,i=o,s=0;continue}}e&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+t.slice(i+1,o):n=t.slice(i+1,o),r=o-i-1;i=o,s=0}else a===46&&s>-1?s++:s=-1}return n}function Fl(t){if(typeof t!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(t))}const $3={cwd:q3};function q3(){return"/"}function Fp(t){return!!(t!==null&&typeof t=="object"&&"href"in t&&t.href&&"protocol"in t&&t.protocol&&t.auth===void 0)}function H3(t){if(typeof t=="string")t=new URL(t);else if(!Fp(t)){const e=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+t+"`");throw e.code="ERR_INVALID_ARG_TYPE",e}if(t.protocol!=="file:"){const e=new TypeError("The URL must be of scheme file");throw e.code="ERR_INVALID_URL_SCHEME",e}return W3(t)}function W3(t){if(t.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const e=t.pathname;let n=-1;for(;++n<e.length;)if(e.codePointAt(n)===37&&e.codePointAt(n+1)===50){const r=e.codePointAt(n+2);if(r===70||r===102){const i=new TypeError("File URL path must not include encoded / characters");throw i.code="ERR_INVALID_FILE_URL_PATH",i}}return decodeURIComponent(e)}const tf=["history","path","basename","stem","extname","dirname"];class bT{constructor(e){let n;e?Fp(e)?n={path:e}:typeof e=="string"||G3(e)?n={value:e}:n=e:n={},this.cwd="cwd"in n?"":$3.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<tf.length;){const s=tf[r];s in n&&n[s]!==void 0&&n[s]!==null&&(this[s]=s==="history"?[...n[s]]:n[s])}let i;for(i in n)tf.includes(i)||(this[i]=n[i])}get basename(){return typeof this.path=="string"?Zn.basename(this.path):void 0}set basename(e){rf(e,"basename"),nf(e,"basename"),this.path=Zn.join(this.dirname||"",e)}get dirname(){return typeof this.path=="string"?Zn.dirname(this.path):void 0}set dirname(e){S0(this.basename,"dirname"),this.path=Zn.join(e||"",this.basename)}get extname(){return typeof this.path=="string"?Zn.extname(this.path):void 0}set extname(e){if(nf(e,"extname"),S0(this.dirname,"extname"),e){if(e.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(e.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Zn.join(this.dirname,this.stem+(e||""))}get path(){return this.history[this.history.length-1]}set path(e){Fp(e)&&(e=H3(e)),rf(e,"path"),this.path!==e&&this.history.push(e)}get stem(){return typeof this.path=="string"?Zn.basename(this.path,this.extname):void 0}set stem(e){rf(e,"stem"),nf(e,"stem"),this.path=Zn.join(this.dirname||"",e+(this.extname||""))}fail(e,n,r){const i=this.message(e,n,r);throw i.fatal=!0,i}info(e,n,r){const i=this.message(e,n,r);return i.fatal=void 0,i}message(e,n,r){const i=new jt(e,n,r);return this.path&&(i.name=this.path+":"+i.name,i.file=this.path),i.fatal=!1,this.messages.push(i),i}toString(e){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(e||void 0).decode(this.value)}}function nf(t,e){if(t&&t.includes(Zn.sep))throw new Error("`"+e+"` cannot be a path: did not expect `"+Zn.sep+"`")}function rf(t,e){if(!t)throw new Error("`"+e+"` cannot be empty")}function S0(t,e){if(!t)throw new Error("Setting `"+e+"` requires `path` to be set too")}function G3(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const K3=function(t){const r=this.constructor.prototype,i=r[t],s=function(){return i.apply(s,arguments)};return Object.setPrototypeOf(s,r),s},Q3={}.hasOwnProperty;class iy extends K3{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=O3()}copy(){const e=new iy;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];e.use(...r)}return e.data(ef(!0,{},this.namespace)),e}data(e,n){return typeof e=="string"?arguments.length===2?(af("data",this.frozen),this.namespace[e]=n,this):Q3.call(this.namespace,e)&&this.namespace[e]||void 0:e?(af("data",this.frozen),this.namespace=e,this):this.namespace}freeze(){if(this.frozen)return this;const e=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const i=n.call(e,...r);typeof i=="function"&&this.transformers.use(i)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(e){this.freeze();const n=bu(e),r=this.parser||this.Parser;return sf("parse",r),r(String(n),n)}process(e,n){const r=this;return this.freeze(),sf("process",this.parser||this.Parser),of("process",this.compiler||this.Compiler),n?i(void 0,n):new Promise(i);function i(s,o){const a=bu(e),u=r.parse(a);r.run(u,a,function(d,f,m){if(d||!f||!m)return c(d);const g=f,_=r.stringify(g,m);J3(_)?m.value=_:m.result=_,c(d,m)});function c(d,f){d||!f?o(d):s?s(f):n(void 0,f)}}}processSync(e){let n=!1,r;return this.freeze(),sf("processSync",this.parser||this.Parser),of("processSync",this.compiler||this.Compiler),this.process(e,i),C0("processSync","process",n),r;function i(s,o){n=!0,v0(s),r=o}}run(e,n,r){A0(e),this.freeze();const i=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?s(void 0,r):new Promise(s);function s(o,a){const u=bu(n);i.run(e,u,c);function c(d,f,m){const g=f||e;d?a(d):o?o(g):r(void 0,g,m)}}}runSync(e,n){let r=!1,i;return this.run(e,n,s),C0("runSync","run",r),i;function s(o,a){v0(o),i=a,r=!0}}stringify(e,n){this.freeze();const r=bu(n),i=this.compiler||this.Compiler;return of("stringify",i),A0(e),i(e,r)}use(e,...n){const r=this.attachers,i=this.namespace;if(af("use",this.frozen),e!=null)if(typeof e=="function")u(e,n);else if(typeof e=="object")Array.isArray(e)?a(e):o(e);else throw new TypeError("Expected usable value, not `"+e+"`");return this;function s(c){if(typeof c=="function")u(c,[]);else if(typeof c=="object")if(Array.isArray(c)){const[d,...f]=c;u(d,f)}else o(c);else throw new TypeError("Expected usable value, not `"+c+"`")}function o(c){if(!("plugins"in c)&&!("settings"in c))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");a(c.plugins),c.settings&&(i.settings=ef(!0,i.settings,c.settings))}function a(c){let d=-1;if(c!=null)if(Array.isArray(c))for(;++d<c.length;){const f=c[d];s(f)}else throw new TypeError("Expected a list of plugins, not `"+c+"`")}function u(c,d){let f=-1,m=-1;for(;++f<r.length;)if(r[f][0]===c){m=f;break}if(m===-1)r.push([c,...d]);else if(d.length>0){let[g,..._]=d;const b=r[m][1];Vp(b)&&Vp(g)&&(g=ef(!0,b,g)),r[m]=[c,g,..._]}}}}const X3=new iy().freeze();function sf(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `parser`")}function of(t,e){if(typeof e!="function")throw new TypeError("Cannot `"+t+"` without `compiler`")}function af(t,e){if(e)throw new Error("Cannot call `"+t+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function A0(t){if(!Vp(t)||typeof t.type!="string")throw new TypeError("Expected node, got `"+t+"`")}function C0(t,e,n){if(!n)throw new Error("`"+t+"` finished async. Use `"+e+"` instead")}function bu(t){return Y3(t)?t:new bT(t)}function Y3(t){return!!(t&&typeof t=="object"&&"message"in t&&"messages"in t)}function J3(t){return typeof t=="string"||Z3(t)}function Z3(t){return!!(t&&typeof t=="object"&&"byteLength"in t&&"byteOffset"in t)}const e6="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",N0=[],R0={allowDangerousHtml:!0},t6=/^(https?|ircs?|mailto|xmpp)$/i,n6=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"className",id:"remove-classname"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function sy(t){const e=r6(t),n=i6(t);return s6(e.runSync(e.parse(n),n),t)}function r6(t){const e=t.rehypePlugins||N0,n=t.remarkPlugins||N0,r=t.remarkRehypeOptions?{...t.remarkRehypeOptions,...R0}:R0;return X3().use(FV).use(n).use(D3,r).use(e)}function i6(t){const e=t.children||"",n=new bT;return typeof e=="string"&&(n.value=e),n}function s6(t,e){const n=e.allowedElements,r=e.allowElement,i=e.components,s=e.disallowedElements,o=e.skipHtml,a=e.unwrapDisallowed,u=e.urlTransform||o6;for(const d of n6)Object.hasOwn(e,d.from)&&(""+d.from+(d.to?"use `"+d.to+"` instead":"remove it")+e6+d.id,void 0);return IT(t,c),wL(t,{Fragment:h.Fragment,components:i,ignoreInvalidStyle:!0,jsx:h.jsx,jsxs:h.jsxs,passKeys:!0,passNode:!0});function c(d,f,m){if(d.type==="raw"&&m&&typeof f=="number")return o?m.children.splice(f,1):m.children[f]={type:"text",value:d.value},f;if(d.type==="element"){let g;for(g in Yd)if(Object.hasOwn(Yd,g)&&Object.hasOwn(d.properties,g)){const _=d.properties[g],b=Yd[g];(b===null||b.includes(d.tagName))&&(d.properties[g]=u(String(_||""),g,d))}}if(d.type==="element"){let g=n?!n.includes(d.tagName):s?s.includes(d.tagName):!1;if(!g&&r&&typeof f=="number"&&(g=!r(d,f,m)),g&&m&&typeof f=="number")return a&&d.children?m.children.splice(f,1,...d.children):m.children.splice(f,1),f}}}function o6(t){const e=t.indexOf(":"),n=t.indexOf("?"),r=t.indexOf("#"),i=t.indexOf("/");return e===-1||i!==-1&&e>i||n!==-1&&e>n||r!==-1&&e>r||t6.test(t.slice(0,e))?t:""}function a6({post:t,onClick:e,onToggleSave:n,isSaved:r,onUpdatePost:i}){var m;const{user:s,toggleLikePost:o}=_n(),[a,u]=F.useState(t.likes||0),c=(m=s==null?void 0:s.likedPosts)==null?void 0:m.includes(t.id);F.useEffect(()=>{u(t.likes||0)},[t.likes]);const d=async g=>{if(g.stopPropagation(),!s)return;const _=c?a-1:a+1;u(_),i(t.id,_),await o(t.id)},f=g=>{g.stopPropagation(),n(t.id)};return h.jsx("article",{onClick:e,className:"group relative border-b border-white/10 bg-black transition-colors hover:bg-neutral-900/50 cursor-pointer",children:h.jsxs("div",{className:"flex flex-row gap-4 md:gap-6 p-4 md:p-6",children:[h.jsxs("div",{className:"w-24 h-24 md:w-48 md:h-auto md:aspect-[4/3] shrink-0 overflow-hidden bg-neutral-900 border border-white/5 relative",children:[h.jsx("img",{src:t.image,alt:t.title,className:"w-full h-full object-cover transition-transform duration-700 group-hover:scale-105 opacity-80 group-hover:opacity-100"}),t.isLocked&&h.jsx("div",{className:"absolute inset-0 flex items-center justify-center bg-black/60 backdrop-blur-[2px]",children:h.jsx(ah,{className:"w-6 h-6 text-white/50"})})]}),h.jsxs("div",{className:"flex-1 flex flex-col justify-between py-1",children:[h.jsxs("div",{children:[h.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[h.jsx("span",{className:"text-[9px] font-bold tracking-[0.2em] text-neutral-500 uppercase",children:t.category}),h.jsx("span",{className:"w-px h-2 bg-neutral-800"}),h.jsx("span",{className:"text-[9px] tracking-widest text-neutral-600 uppercase",children:t.date})]}),h.jsx("h3",{className:"text-lg md:text-xl font-light text-white uppercase tracking-wider leading-tight mb-3 group-hover:text-neutral-300 transition-colors",children:t.title}),h.jsx("div",{className:"text-xs text-neutral-500 font-serif leading-relaxed line-clamp-2 mb-4",children:h.jsx(sy,{components:{p:({node:g,..._})=>h.jsx("p",{..._}),strong:({node:g,..._})=>h.jsx("span",{className:"font-normal text-neutral-400",..._}),em:({node:g,..._})=>h.jsx("span",{className:"italic text-neutral-600",..._})},children:t.content})})]}),h.jsxs("div",{className:"flex items-center justify-between mt-4 md:mt-0",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex items-center gap-1.5 text-neutral-600",children:[h.jsx(G1,{size:12}),h.jsx("span",{className:"text-[9px] tracking-widest uppercase leading-none",children:t.readTime})]}),h.jsxs("button",{onClick:d,className:"flex items-center gap-1.5 group/like z-10",children:[h.jsx(K1,{size:12,className:`transition-colors ${c?"fill-white text-white":"text-neutral-600 group-hover/like:text-white"}`}),h.jsx("span",{className:"text-[9px] tracking-widest uppercase text-neutral-600 group-hover/like:text-white transition-colors leading-none",children:a})]})]}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("button",{onClick:f,className:"text-neutral-600 hover:text-white transition-colors z-10",children:h.jsx(Om,{size:14,className:r?"fill-white text-white":""})}),h.jsxs("span",{className:"flex items-center gap-1 text-[9px] font-bold tracking-[0.2em] text-white uppercase group-hover:translate-x-1 transition-transform leading-none",children:["Ler Agora",h.jsx(W1,{size:12})]})]})]})]})]})})}function l6({posts:t,setReadingPost:e,onLoadMore:n,hasMore:r,onUpdatePost:i}){const{savedPosts:s,toggleSavePost:o}=_n();return h.jsxs("div",{className:"animate-in fade-in duration-700",children:[h.jsx("div",{className:"divide-y divide-white/10",children:t.map(a=>h.jsx(a6,{post:a,onClick:()=>e(a),onToggleSave:o,isSaved:s.includes(a.id),onUpdatePost:i},a.id))}),r&&h.jsx("div",{className:"p-8 flex justify-center",children:h.jsx("button",{onClick:n,className:"text-[10px] uppercase tracking-[0.2em] text-neutral-500 hover:text-white transition-colors border border-white/10 px-6 py-3 hover:border-white/30",children:"Carregar Mais"})})]})}function u6({toggleRitual:t}){const{addXp:e,checkAndIncrementStreak:n}=_n(),[r,i]=F.useState([]),[s,o]=F.useState(!0);F.useEffect(()=>{(async()=>{try{const d=new Date().getDay(),f=mn(Ie(ie,"habits"),jg("isActive","==",!0)),_=(await dt(f)).docs.map(b=>({id:b.id,...b.data(),completed:!1})).filter(b=>b.type==="FIXED"||b.type==="DYNAMIC"&&b.daysOfWeek.includes(d));i(_)}catch(d){console.error("Error fetching rituals:",d)}finally{o(!1)}})()},[]);const a=c=>{i(r.map(d=>{if(d.id===c){const f=!d.completed;return f&&(e(10),n()),{...d,completed:f}}return d}))},u=r.length>0?Math.round(r.filter(c=>c.completed).length/r.length*100):0;return h.jsxs("div",{className:"px-8 pt-10 animate-in fade-in duration-500",children:[h.jsxs("div",{className:"mb-12",children:[h.jsxs("div",{className:"flex justify-between text-[9px] uppercase tracking-widest text-neutral-500 mb-2",children:[h.jsx("span",{children:"Progresso do Dia"}),h.jsxs("span",{children:[u,"%"]})]}),h.jsx("div",{className:"h-1 bg-neutral-900 w-full overflow-hidden",children:h.jsx("div",{className:"h-full bg-white transition-all duration-1000 ease-out",style:{width:`${u}% `}})})]}),h.jsx("div",{className:"space-y-6",children:s?h.jsx("p",{className:"text-neutral-500 text-xs text-center",children:"Carregando rituais..."}):r.length===0?h.jsx("p",{className:"text-neutral-500 text-xs text-center",children:"Nenhum ritual programado para hoje."}):r.map(c=>h.jsxs("div",{onClick:()=>a(c.id),className:`
                                group flex items - center justify - between p - 4 border transition - all cursor - pointer
                                ${c.completed?"bg-white border-white":"bg-transparent border-white/10 hover:border-white/30"}
`,children:[h.jsx("span",{className:`
text - xs font - bold uppercase tracking - widest transition - colors
                                ${c.completed?"text-black":"text-white"}
`,children:c.title}),h.jsx("div",{className:`
w - 5 h - 5 border flex items - center justify - center transition - all
                                ${c.completed?"border-black bg-black text-white":"border-white/30 text-transparent"}
`,children:h.jsx(LA,{size:12,strokeWidth:4})})]},c.id))}),h.jsx("div",{className:"mt-16 text-center",children:h.jsx("p",{className:"text-[9px] text-neutral-600 uppercase tracking-[0.2em] italic",children:'"Ns somos o que fazemos repetidamente."'})})]})}const qa=async(t,e)=>{if(!t)return null;try{const n=fO(BI,e),r=await hO(n,t);return await dO(r.ref)}catch(n){throw console.error("Error uploading image:",n),n}};function oy({isOpen:t,onClose:e,userId:n,isEditable:r=!1,onStartChat:i}){const{user:s,logout:o}=_n(),[a,u]=F.useState(!0),[c,d]=F.useState(!1),[f,m]=F.useState(r),[g,_]=F.useState({displayName:"",photoURL:"",profession:"",bio:"",whatsapp:"",email:"",instagram:"",linkedin:"",xp:0,streak:0,createdAt:null}),[b,P]=F.useState(null),[x,k]=F.useState("");F.useEffect(()=>{t&&n?(E(),m(r)):(k(""),P(null),m(!1))},[t,n,r]);const E=async()=>{u(!0);try{const w=await Ll(Xe(ie,"users",n));if(w.exists()){const I=w.data();_({...I,createdAt:I.createdAt?I.createdAt.toDate():new Date}),k(I.photoURL||"")}}catch(w){console.error("Error fetching profile:",w)}finally{u(!1)}},O=w=>{const I=w.target.files[0];if(I){P(I);const S=new FileReader;S.onloadend=()=>{k(S.result)},S.readAsDataURL(I)}},M=async w=>{w.preventDefault(),d(!0);try{let I=g.photoURL;b&&(I=await qa(b,`profiles/${n}_${Date.now()}`));const S={displayName:g.displayName,profession:g.profession,bio:g.bio,whatsapp:g.whatsapp,email:g.email,photoURL:I,updatedAt:new Date().toISOString()};await fs(Xe(ie,"users",n),S),m(!1)}catch(I){console.error("Error updating profile:",I),alert("Erro ao salvar perfil.")}finally{d(!1)}},D=yl.slice().reverse().find(w=>(g.streak||0)>=w.min)||yl[0],v=(s==null?void 0:s.uid)===n;return t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/80 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsxs("div",{className:"bg-neutral-900 border border-white/10 w-full max-w-md relative shadow-2xl overflow-hidden flex flex-col max-h-[90vh]",children:[h.jsx("div",{className:"h-32 bg-gradient-to-b from-neutral-800 to-neutral-900 relative",children:h.jsx("button",{onClick:e,className:"absolute top-4 right-4 text-white/50 hover:text-white transition-colors z-10",children:h.jsx(Bn,{size:24})})}),h.jsx("div",{className:"px-8 relative -mt-16 mb-6 text-center",children:h.jsxs("div",{className:"relative inline-block group",children:[h.jsx("div",{className:"w-32 h-32 rounded-full border-4 border-neutral-900 overflow-hidden bg-neutral-800",children:x?h.jsx("img",{src:x,alt:"Profile",className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-600",children:h.jsx(ys,{size:48})})}),f&&h.jsxs("label",{className:"absolute bottom-2 right-2 bg-white text-black p-2 rounded-full cursor-pointer hover:bg-neutral-200 transition-colors shadow-lg",children:[h.jsx(DA,{size:16}),h.jsx("input",{type:"file",onChange:O,className:"hidden",accept:"image/*"})]})]})}),h.jsx("div",{className:"px-8 pb-8 overflow-y-auto custom-scrollbar",children:a?h.jsx("div",{className:"text-center text-neutral-500 py-8",children:"Carregando..."}):f?h.jsxs("form",{onSubmit:M,className:"space-y-6",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase tracking-widest text-neutral-500 block mb-1",children:"Nome"}),h.jsx("input",{type:"text",value:g.displayName||"",onChange:w=>_({...g,displayName:w.target.value}),className:"w-full bg-black/50 border border-white/10 p-3 text-white focus:border-white/30 outline-none text-sm",placeholder:"Seu nome"})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase tracking-widest text-neutral-500 block mb-1",children:"Profisso / Ttulo"}),h.jsx("input",{type:"text",value:g.profession||"",onChange:w=>_({...g,profession:w.target.value}),className:"w-full bg-black/50 border border-white/10 p-3 text-white focus:border-white/30 outline-none text-sm",placeholder:"Ex: Investidor, Advogado..."})]}),h.jsxs("div",{children:[h.jsx("label",{className:"text-[10px] uppercase tracking-widest text-neutral-500 block mb-1",children:"Bio"}),h.jsx("textarea",{value:g.bio||"",onChange:w=>_({...g,bio:w.target.value}),className:"w-full bg-black/50 border border-white/10 p-3 text-white focus:border-white/30 outline-none text-sm resize-none",rows:3,placeholder:"Uma breve descrio sobre voc..."})]}),h.jsxs("div",{className:"pt-4 border-t border-white/5 space-y-4",children:[h.jsx("h4",{className:"text-xs font-bold text-white uppercase tracking-widest",children:"Contatos"}),h.jsxs("div",{className:"grid grid-cols-1 gap-3",children:[h.jsxs("div",{className:"flex items-center gap-2 bg-black/30 border border-white/5 p-2",children:[h.jsx(o_,{size:16,className:"text-neutral-500"}),h.jsx("input",{type:"text",value:g.whatsapp||"",onChange:w=>_({...g,whatsapp:w.target.value}),className:"w-full bg-transparent outline-none text-white text-sm",placeholder:"WhatsApp (com DDD)"})]}),h.jsxs("div",{className:"flex items-center gap-2 bg-black/30 border border-white/5 p-2",children:[h.jsx(QA,{size:16,className:"text-neutral-500"}),h.jsx("input",{type:"text",value:g.email||"",onChange:w=>_({...g,email:w.target.value}),className:"w-full bg-transparent outline-none text-white text-sm",placeholder:"Email de contato"})]})]})]})]}),h.jsxs("div",{className:"flex gap-3",children:[h.jsx("button",{type:"button",onClick:()=>m(!1),className:"flex-1 bg-transparent border border-white/10 text-white py-3 text-xs font-bold uppercase tracking-widest hover:bg-white/5 transition-colors",children:"Cancelar"}),h.jsx("button",{type:"submit",disabled:c,className:"flex-1 bg-white text-black py-3 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors disabled:opacity-50",children:c?"Salvando...":"Salvar"})]})]}):h.jsxs("div",{className:"text-center space-y-6",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-2xl text-white font-light uppercase tracking-wide mb-1",children:g.displayName}),h.jsx("p",{className:"text-xs text-[#D4AF37] uppercase tracking-widest font-medium",children:g.profession||"Membro"})]}),h.jsxs("div",{className:"grid grid-cols-3 gap-2 border-y border-white/10 py-4",children:[h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx(Ec,{size:16,className:D.color}),h.jsx("span",{className:`text-[9px] font-bold uppercase tracking-widest ${D.color}`,children:D.name})]}),h.jsxs("div",{className:"flex flex-col items-center gap-1 border-x border-white/10",children:[h.jsx(nC,{size:16,className:"text-yellow-500"}),h.jsxs("span",{className:"text-[9px] font-bold uppercase tracking-widest text-white",children:[g.xp||0," XP"]})]}),h.jsxs("div",{className:"flex flex-col items-center gap-1",children:[h.jsx(PA,{size:16,className:"text-neutral-500"}),h.jsx("span",{className:"text-[9px] font-bold uppercase tracking-widest text-neutral-400",children:g.createdAt?g.createdAt.toLocaleDateString("pt-BR",{month:"short",year:"2-digit"}).toUpperCase():"N/A"})]})]}),g.bio&&h.jsxs("p",{className:"text-neutral-400 text-sm font-serif italic leading-relaxed max-w-xs mx-auto",children:['"',g.bio,'"']}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("h4",{className:"text-[9px] uppercase tracking-widest text-neutral-600",children:"Crculos Ativos"}),h.jsxs("div",{className:"flex justify-center gap-2 flex-wrap",children:[h.jsx("span",{className:"px-3 py-1 border border-white/10 rounded-full text-[10px] text-neutral-300 uppercase tracking-wider",children:"Principal"}),h.jsx("span",{className:"px-3 py-1 border border-white/10 rounded-full text-[10px] text-neutral-300 uppercase tracking-wider",children:"Leitura"})]})]}),h.jsx("div",{className:"flex justify-center gap-4 pt-4",children:v?h.jsxs(h.Fragment,{children:[h.jsxs("button",{onClick:()=>m(!0),className:"p-3 bg-white text-black rounded-full hover:bg-neutral-200 transition-all group flex items-center gap-2 px-6",children:[h.jsx(lh,{size:16}),h.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Editar"})]}),h.jsxs("button",{onClick:()=>{e(),o()},className:"p-3 bg-red-900/20 border border-red-900/50 text-red-400 rounded-full hover:bg-red-900/40 transition-all group flex items-center gap-2 px-6",children:[h.jsx(Lm,{size:16}),h.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Sair"})]})]}):h.jsxs(h.Fragment,{children:[i&&h.jsxs("button",{onClick:()=>i(g),className:"p-3 bg-white text-black rounded-full hover:bg-neutral-200 transition-all group flex items-center gap-2 px-6",title:"Enviar Mensagem",children:[h.jsx(Q1,{size:16}),h.jsx("span",{className:"text-xs font-bold uppercase tracking-widest",children:"Conversar"})]}),g.whatsapp&&h.jsx("a",{href:`https://wa.me/${g.whatsapp.replace(/\D/g,"")}`,target:"_blank",rel:"noopener noreferrer",className:"p-3 bg-white/5 border border-white/10 rounded-full text-white hover:bg-white hover:text-black transition-all group",title:"WhatsApp",children:h.jsx(o_,{size:20})})]})})]})})]})}):null}function c6({isOpen:t,onClose:e,onReadPost:n}){const{savedPosts:r,toggleSavePost:i}=_n(),[s,o]=F.useState([]),[a,u]=F.useState(!1);F.useEffect(()=>{t&&r.length>0?c():o([])},[t,r]);const c=async()=>{u(!0);try{const d=await Promise.all(r.map(async f=>{const m=Xe(ie,"posts",f),g=await Ll(m);return g.exists()?{id:g.id,...g.data()}:null}));o(d.filter(f=>f!==null))}catch(d){console.error("Error fetching saved posts:",d)}finally{u(!1)}};return t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-neutral-900 border border-white/10 shadow-2xl relative flex flex-col max-h-[80vh]",children:[h.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-neutral-900 sticky top-0 z-10",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Om,{className:"w-5 h-5 text-white"}),h.jsx("h2",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Meu Acervo"})]}),h.jsx("button",{onClick:e,className:"text-neutral-500 hover:text-white transition-colors",children:h.jsx(Bn,{size:20})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:a?h.jsx("div",{className:"flex justify-center py-12",children:h.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"})}):s.length===0?h.jsx("div",{className:"text-center py-12",children:h.jsx("p",{className:"text-neutral-500 text-xs uppercase tracking-widest",children:"Nenhum item salvo"})}):h.jsx("div",{className:"space-y-4",children:s.map(d=>h.jsxs("div",{className:"group bg-black border border-white/5 hover:border-white/20 transition-all p-4 flex gap-4",children:[h.jsx("div",{className:"w-20 h-20 bg-neutral-800 flex-shrink-0 overflow-hidden",children:h.jsx("img",{src:d.image,alt:d.title,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-700"})}),h.jsxs("div",{className:"flex-1 flex flex-col justify-between",children:[h.jsxs("div",{children:[h.jsx("span",{className:"text-[8px] font-bold uppercase tracking-[0.2em] text-neutral-500 mb-1 block",children:d.category}),h.jsx("h3",{className:"text-sm text-white font-light leading-tight line-clamp-2 mb-2",children:d.title})]}),h.jsxs("div",{className:"flex justify-between items-end",children:[h.jsxs("button",{onClick:()=>{e(),n(d)},className:"text-[9px] font-bold uppercase tracking-widest text-white hover:text-neutral-300 flex items-center gap-1",children:["Ler Agora ",h.jsx(AA,{size:10})]}),h.jsx("button",{onClick:()=>i(d.id),className:"text-neutral-600 hover:text-red-400 transition-colors",title:"Remover",children:h.jsx(Bn,{size:14})})]})]})]},d.id))})})]})}):null}function h6({isOpen:t,onClose:e,currentStreak:n}){if(!t)return null;const r=[...yl].sort((i,s)=>i.min-s.min);return h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-neutral-900 border border-white/10 shadow-2xl relative flex flex-col max-h-[80vh]",children:[h.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-neutral-900 sticky top-0 z-10",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ec,{className:"w-5 h-5 text-white"}),h.jsx("h2",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Classificao"})]}),h.jsx("button",{onClick:e,className:"text-neutral-500 hover:text-white transition-colors",children:h.jsx(Bn,{size:20})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar space-y-6",children:[h.jsx("p",{className:"text-xs text-neutral-400 leading-relaxed mb-6",children:"A hierarquia da Sociedade Privada  baseada na constncia. Sua ascenso depende exclusivamente dos seus dias de foco consecutivos."}),h.jsx("div",{className:"space-y-4",children:r.map((i,s)=>{const o=n>=i.min,a=!o&&(s===0||n>=r[s-1].min);return h.jsxs("div",{className:`
                                        relative border p-5 transition-all duration-300
                                        ${o?"bg-white/5 border-white/20":"bg-black border-white/5 opacity-60"}
                                    `,children:[h.jsxs("div",{className:"flex justify-between items-start mb-2",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(Ec,{className:`w-4 h-4 ${i.color}`}),h.jsx("h3",{className:`text-sm font-bold uppercase tracking-[0.2em] ${i.color}`,children:i.name})]}),o?h.jsx(jA,{className:"w-4 h-4 text-green-500"}):h.jsx(ah,{className:"w-4 h-4 text-neutral-600"})]}),h.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[h.jsx("div",{className:`h-px flex-1 ${o?"bg-white/20":"bg-white/5"}`}),h.jsxs("span",{className:"text-[9px] font-bold uppercase tracking-widest text-neutral-500",children:[i.min," Dias"]}),h.jsx("div",{className:`h-px flex-1 ${o?"bg-white/20":"bg-white/5"}`})]}),h.jsx("p",{className:"text-[10px] text-neutral-400 leading-relaxed",children:d6(i.name)}),a&&h.jsx("div",{className:"mt-4 bg-neutral-800 h-1 w-full rounded-full overflow-hidden",children:h.jsx("div",{className:"bg-white h-full transition-all duration-500",style:{width:`${Math.min(100,n/i.min*100)}%`}})})]},i.name)})})]})]})})}function d6(t){switch(t){case"INICIADO":return"O primeiro passo. Voc decidiu deixar a mediocridade para trs e iniciar sua jornada de autoaperfeioamento.";case"ASSOCIADO":return"A primeira semana de constncia. Voc provou que sua inteno no era passageira. Voc faz parte do crculo.";case"CAVALHEIRO":return"Um ms de disciplina. A constncia comea a moldar seu carter. O respeito  conquistado com aes, no palavras.";case"EMBAIXADOR":return"Trs meses de foco ininterrupto. Voc representa os valores da Sociedade. Sua presena inspira os iniciados.";case"MINISTRO":return"Meio ano de excelncia. Voc  um pilar da nossa comunidade. Sua sabedoria guia os outros.";case"SOBERANO":return"O topo da hierarquia. Um ano de domnio prprio. Sua disciplina  inabalvel. Voc governa seu prprio destino.";default:return"Um nvel de prestgio na sociedade."}}function f6({isOpen:t,onClose:e}){const[n,r]=F.useState([]),[i,s]=F.useState(!0);F.useEffect(()=>{t&&o()},[t]);const o=async()=>{s(!0);try{const a=mn(Ie(ie,"users"),Un("xp","desc"),Bc(10)),c=(await dt(a)).docs.map(d=>({id:d.id,...d.data()}));r(c)}catch(a){console.error("Error fetching leaderboard:",a)}finally{s(!1)}};return t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-neutral-900 border border-white/10 shadow-2xl relative flex flex-col max-h-[80vh]",children:[h.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-neutral-900 sticky top-0 z-10",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(tC,{className:"w-5 h-5 text-yellow-500"}),h.jsx("h2",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"Ranking Semanal"})]}),h.jsx("button",{onClick:e,className:"text-neutral-500 hover:text-white transition-colors",children:h.jsx(Bn,{size:20})})]}),h.jsx("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar",children:i?h.jsx("div",{className:"flex justify-center py-12",children:h.jsx("div",{className:"w-6 h-6 border-2 border-white/20 border-t-white rounded-full animate-spin"})}):h.jsx("div",{className:"space-y-4",children:n.map((a,u)=>{var d;let c="text-neutral-500";return u===0&&(c="text-[#D4AF37]"),u===1&&(c="text-neutral-300"),u===2&&(c="text-amber-700"),h.jsxs("div",{className:"flex items-center gap-4 p-4 bg-black border border-white/5 rounded-lg",children:[h.jsx("div",{className:`flex-shrink-0 w-8 text-center font-bold text-lg ${c}`,children:u+1}),h.jsx("div",{className:"w-10 h-10 rounded-full overflow-hidden border border-white/10 flex items-center justify-center bg-neutral-900",children:a.photoURL?h.jsx("img",{src:a.photoURL,alt:a.displayName,className:"w-full h-full object-cover"}):h.jsx("span",{className:"text-white font-bold text-xs",children:((d=a.displayName)==null?void 0:d[0])||"?"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-xs font-bold text-white uppercase tracking-wider",children:a.displayName||"Membro"}),h.jsx("p",{className:"text-[9px] text-neutral-500 uppercase tracking-widest",children:a.profession||"Membro"})]}),h.jsx("div",{className:"text-right",children:h.jsxs("span",{className:"text-xs font-bold text-[#D4AF37]",children:[a.xp||0," XP"]})})]},a.id)})})})]})}):null}function p6({isOpen:t,onClose:e}){return t?h.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/90 backdrop-blur-sm animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-md bg-neutral-900 border border-white/10 shadow-2xl relative flex flex-col max-h-[80vh]",children:[h.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center bg-neutral-900 sticky top-0 z-10",children:[h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx(HA,{className:"w-5 h-5 text-white"}),h.jsx("h2",{className:"text-sm font-bold uppercase tracking-[0.2em] text-white",children:"O que  o Virtus?"})]}),h.jsx("button",{onClick:e,className:"text-neutral-500 hover:text-white transition-colors",children:h.jsx(Bn,{size:20})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 custom-scrollbar text-neutral-300 space-y-6 font-serif leading-relaxed",children:[h.jsxs("p",{children:[h.jsx("strong",{className:"text-white font-sans uppercase tracking-wider text-xs block mb-2",children:"A Essncia"}),"O Virtus no  apenas um aplicativo,  um sistema de desenvolvimento pessoal focado na construo de hbitos angulares, networking de alto nvel e aprimoramento contnuo."]}),h.jsxs("p",{children:[h.jsx("strong",{className:"text-white font-sans uppercase tracking-wider text-xs block mb-2",children:"Os Pilares"}),"Baseado em trs pilares fundamentais:",h.jsxs("ul",{className:"list-disc pl-5 mt-2 space-y-1 text-sm",children:[h.jsxs("li",{children:[h.jsx("span",{className:"text-white",children:"Intelecto:"})," Atravs da leitura e estudo constante."]}),h.jsxs("li",{children:[h.jsx("span",{className:"text-white",children:"Corpo:"})," Atravs de rituais fsicos e disciplina."]}),h.jsxs("li",{children:[h.jsx("span",{className:"text-white",children:"Esprito:"})," Atravs da conexo e propsito."]})]})]}),h.jsxs("p",{children:[h.jsx("strong",{className:"text-white font-sans uppercase tracking-wider text-xs block mb-2",children:"O Sistema"}),"Cada ao positiva gera XP (Experincia), elevando seu nvel e desbloqueando novas patentes. Mantenha sua ofensiva (foguinho) ativa para demonstrar sua constncia e disciplina."]}),h.jsxs("div",{className:"p-4 bg-white/5 border border-white/10 rounded-lg text-center",children:[h.jsx("p",{className:"text-xs uppercase tracking-widest text-white",children:'"A excelncia no  um ato, mas um hbito."'}),h.jsx("p",{className:"text-[10px] text-neutral-500 mt-1 uppercase",children:"- Aristteles"})]})]})]})}):null}function m6({streak:t,currentRank:e,onReadPost:n}){var b;const{user:r,logout:i}=_n(),[s,o]=F.useState(!1),[a,u]=F.useState(!1),[c,d]=F.useState(!1),[f,m]=F.useState(!1),[g,_]=F.useState(!1);return h.jsxs("div",{className:"px-8 pt-10 animate-in fade-in duration-500",children:[h.jsxs("div",{className:"flex flex-col items-center mb-16",children:[h.jsxs("div",{className:"w-24 h-24 border border-white/10 flex items-center justify-center mb-6 relative overflow-hidden",children:[h.jsx("div",{className:"absolute inset-0 bg-white/5 blur-xl rounded-full opacity-20"}),r!=null&&r.photoURL?h.jsx("img",{src:r.photoURL,alt:r.displayName,className:"w-full h-full object-cover relative z-10"}):h.jsx("span",{className:"text-3xl font-light text-white relative z-10 uppercase",children:((b=r==null?void 0:r.displayName)==null?void 0:b[0])||h.jsx(ys,{className:"w-8 h-8 text-neutral-400"})})]}),h.jsx("h2",{className:"text-xl font-light text-white uppercase tracking-[0.2em] mb-2 text-center",children:(r==null?void 0:r.displayName)||"Membro"}),h.jsxs("div",{className:"flex items-center gap-2 px-3 py-1 border border-white/10 bg-white/5",children:[h.jsx(Ec,{className:`w - 3 h - 3 ${e.color} `}),h.jsx("span",{className:`text - [9px] font - bold uppercase tracking - [0.2em] ${e.color} `,children:e.name})]})]}),h.jsxs("div",{className:"grid grid-cols-2 gap-px bg-white/10 border border-white/10 mb-12",children:[h.jsxs("div",{className:"bg-black p-6 text-center hover:bg-neutral-900/50 transition-colors",children:[h.jsx("p",{className:"text-3xl font-light text-white mb-2",children:t}),h.jsx("p",{className:"text-[9px] text-neutral-500 uppercase tracking-widest",children:"Dias de Foco"})]}),h.jsxs("div",{className:"bg-black p-6 text-center hover:bg-neutral-900/50 transition-colors",children:[h.jsx("p",{className:"text-3xl font-light text-white mb-2",children:"14"}),h.jsx("p",{className:"text-[9px] text-neutral-500 uppercase tracking-widest",children:"Artigos Lidos"})]})]}),h.jsxs("div",{className:"space-y-px bg-white/10 border-t border-b border-white/10",children:[h.jsxs("button",{onClick:()=>u(!0),className:"w-full bg-black text-left p-5 hover:bg-neutral-900 transition-colors flex justify-between items-center group",children:[h.jsx("span",{className:"uppercase text-[10px] font-bold tracking-[0.2em] text-neutral-300 group-hover:text-white",children:"Meu Acervo"}),h.jsx(Hi,{className:"w-4 h-4 rotate-180 text-neutral-600 group-hover:text-white transition-colors"})]}),h.jsxs("button",{onClick:()=>o(!0),className:"w-full bg-black text-left p-5 hover:bg-neutral-900 transition-colors flex justify-between items-center group",children:[h.jsx("span",{className:"uppercase text-[10px] font-bold tracking-[0.2em] text-neutral-300 group-hover:text-white",children:"Ajustes"}),h.jsx(Hi,{className:"w-4 h-4 rotate-180 text-neutral-600 group-hover:text-white transition-colors"})]}),h.jsxs("button",{onClick:()=>d(!0),className:"w-full bg-black text-left p-5 hover:bg-neutral-900 transition-colors flex justify-between items-center group",children:[h.jsx("span",{className:"uppercase text-[10px] font-bold tracking-[0.2em] text-neutral-300 group-hover:text-white",children:"Classificao"}),h.jsx(Hi,{className:"w-4 h-4 rotate-180 text-neutral-600 group-hover:text-white transition-colors"})]}),h.jsxs("button",{onClick:()=>m(!0),className:"w-full bg-black text-left p-5 hover:bg-neutral-900 transition-colors flex justify-between items-center group",children:[h.jsx("span",{className:"uppercase text-[10px] font-bold tracking-[0.2em] text-neutral-300 group-hover:text-white",children:"Ranking Semanal"}),h.jsx(Hi,{className:"w-4 h-4 rotate-180 text-neutral-600 group-hover:text-white transition-colors"})]}),h.jsxs("button",{onClick:()=>_(!0),className:"w-full bg-black text-left p-5 hover:bg-neutral-900 transition-colors flex justify-between items-center group",children:[h.jsx("span",{className:"uppercase text-[10px] font-bold tracking-[0.2em] text-neutral-300 group-hover:text-white",children:"Sobre o Virtus"}),h.jsx(Hi,{className:"w-4 h-4 rotate-180 text-neutral-600 group-hover:text-white transition-colors"})]}),h.jsxs("button",{onClick:i,className:"w-full bg-black text-left p-5 hover:bg-red-900/10 transition-colors flex justify-between items-center group border-t border-white/10",children:[h.jsx("span",{className:"uppercase text-[10px] font-bold tracking-[0.2em] text-red-400 group-hover:text-red-300",children:"Sair"}),h.jsx(Lm,{className:"w-4 h-4 text-red-400 group-hover:text-red-300 transition-colors"})]})]}),h.jsx(oy,{isOpen:s,onClose:()=>o(!1),userId:r==null?void 0:r.uid,isEditable:!1}),h.jsx(c6,{isOpen:a,onClose:()=>u(!1),onReadPost:n}),h.jsx(h6,{isOpen:c,onClose:()=>d(!1),currentStreak:t}),h.jsx(f6,{isOpen:f,onClose:()=>m(!1)}),h.jsx(p6,{isOpen:g,onClose:()=>_(!1)})]})}function g6(t){if(typeof t!="string")throw new TypeError("Expected a string");return t.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function y6(t,e,n){const i=ry({}.ignore||[]),s=w6(e);let o=-1;for(;++o<s.length;)kT(t,"text",a);function a(c,d){let f=-1,m;for(;++f<d.length;){const g=d[f],_=m?m.children:void 0;if(i(g,_?_.indexOf(g):void 0,m))return;m=g}if(m)return u(c,d)}function u(c,d){const f=d[d.length-1],m=s[o][0],g=s[o][1];let _=0;const P=f.children.indexOf(c);let x=!1,k=[];m.lastIndex=0;let E=m.exec(c.value);for(;E;){const O=E.index,M={index:E.index,input:E.input,stack:[...d,c]};let D=g(...E,M);if(typeof D=="string"&&(D=D.length>0?{type:"text",value:D}:void 0),D===!1?m.lastIndex=O+1:(_!==O&&k.push({type:"text",value:c.value.slice(_,O)}),Array.isArray(D)?k.push(...D):D&&k.push(D),_=O+E[0].length,x=!0),!m.global)break;E=m.exec(c.value)}return x?(_<c.value.length&&k.push({type:"text",value:c.value.slice(_)}),f.children.splice(P,1,...k)):k=[c],P+k.length}}function w6(t){const e=[];if(!Array.isArray(t))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!t[0]||Array.isArray(t[0])?t:[t];let r=-1;for(;++r<n.length;){const i=n[r];e.push([_6(i[0]),v6(i[1])])}return e}function _6(t){return typeof t=="string"?new RegExp(g6(t),"g"):t}function v6(t){return typeof t=="function"?t:function(){return t}}function x6(t){y6(t,[/\r?\n|\r/g,E6])}function E6(){return{type:"break"}}function k6(){return function(t){x6(t)}}function I6({readingPost:t,setReadingPost:e,onUpdatePost:n}){var g;const{savedPosts:r,toggleSavePost:i,user:s,toggleLikePost:o,checkAndIncrementStreak:a}=_n(),u=r.includes(t.id),[c,d]=F.useState(t.likes||0),f=(g=s==null?void 0:s.likedPosts)==null?void 0:g.includes(t.id);F.useEffect(()=>{a()},[]),F.useEffect(()=>{d(t.likes||0)},[t.likes]);const m=async()=>{if(!s)return;const _=f?c-1:c+1;d(_),n&&n(t.id,_),await o(t.id)};return h.jsxs("div",{className:"min-h-screen bg-black text-white animate-in slide-in-from-right duration-500",children:[h.jsx("div",{className:"fixed top-0 left-0 right-0 z-50 bg-black/80 backdrop-blur-md border-b border-white/10",children:h.jsxs("div",{className:"max-w-3xl mx-auto px-6 h-16 flex items-center justify-between",children:[h.jsx("button",{onClick:()=>e(null),className:"p-2 -ml-2 text-neutral-400 hover:text-white transition-colors",children:h.jsx(Hi,{size:20})}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("button",{onClick:m,className:"flex items-center gap-2 text-neutral-400 hover:text-white transition-colors",children:[h.jsx(K1,{size:20,className:f?"fill-white text-white":""}),h.jsx("span",{className:"text-xs font-bold",children:c})]}),h.jsx("button",{onClick:()=>i(t.id),className:"p-2 text-neutral-400 hover:text-white transition-colors",children:h.jsx(Om,{size:20,className:u?"fill-white text-white":""})}),h.jsx("button",{className:"p-2 text-neutral-400 hover:text-white transition-colors",children:h.jsx(eC,{size:20})})]})]})}),h.jsxs("div",{className:"pb-32",children:[h.jsxs("div",{className:"w-full h-[50vh] relative",children:[h.jsx("img",{src:t.image,className:"w-full h-full object-cover filter brightness-[0.6] grayscale contrast-125"}),h.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black via-transparent to-transparent"}),h.jsxs("div",{className:"absolute bottom-10 left-8 right-8",children:[h.jsxs("div",{className:"flex items-center gap-3 mb-4 animate-in fade-in slide-in-from-left-4 duration-700 delay-300",children:[h.jsx("span",{className:"w-8 h-[2px] bg-white"}),h.jsx("span",{className:"text-white text-xs font-bold uppercase tracking-[0.3em] drop-shadow-md",children:t.category||"GERAL"})]}),h.jsx("h1",{className:"text-3xl md:text-4xl font-light text-white uppercase tracking-wide leading-tight",children:t.title})]})]}),h.jsxs("div",{className:"px-8 mt-10 max-w-2xl mx-auto",children:[h.jsxs("div",{className:"flex justify-between items-center text-neutral-500 text-[10px] font-medium tracking-widest mb-12 border-b border-white/10 pb-4",children:[h.jsxs("span",{className:"flex items-center gap-2",children:[h.jsx(G1,{className:"w-3 h-3"})," TEMPO DE LEITURA: ",t.readTime]}),h.jsx("span",{children:t.date})]}),h.jsx("div",{className:"text-neutral-300 leading-loose space-y-4 font-serif text-lg text-justify",children:h.jsx(sy,{remarkPlugins:[k6],children:t.content})})]})]})]})}function T6({message:t,isOwn:e}){var r;const n=((r=t.createdAt)==null?void 0:r.toDate().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}))||"";return h.jsx("div",{className:`flex ${e?"justify-end":"justify-start"} mb-4 animate-in fade-in slide-in-from-bottom-2 duration-300`,children:h.jsxs("div",{className:`max-w-[75%] ${e?"items-end":"items-start"} flex flex-col`,children:[!e&&h.jsx("span",{className:"text-[10px] text-neutral-500 uppercase tracking-wider mb-1 ml-1",children:t.senderName}),h.jsx("div",{className:`
                        p-3 rounded-2xl text-sm leading-relaxed relative
                        ${e?"bg-white text-black rounded-tr-none":"bg-neutral-800 text-white rounded-tl-none border border-white/10"}
                    `,children:t.text}),h.jsx("span",{className:"text-[9px] text-neutral-600 mt-1 px-1",children:n})]})})}function b6({chatId:t,type:e,recipient:n,onClose:r}){var g;const{user:i,checkAndIncrementStreak:s}=_n(),[o,a]=F.useState([]),[u,c]=F.useState(""),d=F.useRef(null);F.useEffect(()=>{if(!t)return;const _=mn(Ie(ie,collectionPath),Un("createdAt","asc")),b=Ml(_,P=>{const x=P.docs.map(k=>({id:k.id,...k.data()}));a(x),f()});return()=>b()},[t,e]);const f=()=>{setTimeout(()=>{var _;(_=d.current)==null||_.scrollIntoView({behavior:"smooth"})},100)},m=async _=>{if(_.preventDefault(),!u.trim())return;const b=e==="group"?`circles/${t}/messages`:`chats/${t}/messages`;try{await Sr(Ie(ie,b),{text:u,senderId:i.uid,senderName:i.displayName||"Membro",createdAt:zh()}),c(""),s()}catch(P){console.error("Error sending message:",P)}};return h.jsx("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-4 md:p-8 animate-in fade-in duration-300",children:h.jsxs("div",{className:"w-full max-w-4xl h-[85vh] bg-neutral-900 border border-white/10 flex flex-col shadow-2xl relative",children:[h.jsxs("div",{className:"p-4 border-b border-white/10 flex justify-between items-center bg-neutral-900/95 backdrop-blur absolute top-0 left-0 right-0 z-10 rounded-t-lg",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 bg-neutral-800 rounded-full overflow-hidden border border-white/10",children:n!=null&&n.photoURL?h.jsx("img",{src:n.photoURL,alt:n.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center text-neutral-500 font-bold",children:((g=n==null?void 0:n.name)==null?void 0:g[0])||"#"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-medium uppercase tracking-wider text-sm",children:(n==null?void 0:n.name)||"Chat"}),h.jsx("p",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:e==="group"?"Grupo Privado":"Online"})]})]}),h.jsx("div",{className:"flex items-center gap-2",children:h.jsx("button",{onClick:r,className:"p-2 text-neutral-500 hover:text-white transition-colors",children:h.jsx(Bn,{size:20})})})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-6 pt-24 pb-24 custom-scrollbar bg-black/20",children:[o.length===0?h.jsxs("div",{className:"h-full flex flex-col items-center justify-center text-neutral-600 space-y-4",children:[h.jsx("p",{className:"text-xs uppercase tracking-widest",children:"Incio da conversa"}),h.jsx("div",{className:"w-16 h-[1px] bg-neutral-800"})]}):o.map(_=>h.jsx(T6,{message:_,isOwn:_.senderId===i.uid},_.id)),h.jsx("div",{ref:d})]}),h.jsx("div",{className:"p-4 bg-neutral-900 border-t border-white/10 absolute bottom-0 left-0 right-0",children:h.jsxs("form",{onSubmit:m,className:"flex gap-4 items-end",children:[h.jsx("textarea",{value:u,onChange:_=>c(_.target.value),placeholder:"Digite sua mensagem...",className:"flex-1 bg-black border border-white/10 p-4 text-white text-sm focus:border-white/30 outline-none resize-none rounded-lg custom-scrollbar",rows:1,onKeyDown:_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),m(_))}}),h.jsx("button",{type:"submit",disabled:!u.trim(),className:"p-4 bg-white text-black rounded-lg hover:bg-neutral-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:h.jsx(ZA,{size:20})})]})})]})})}const Su=20;function S6(){const{user:t}=_n(),[e,n]=F.useState("members"),[r,i]=F.useState([]),[s,o]=F.useState([]),[a,u]=F.useState(null),[c,d]=F.useState(!0),[f,m]=F.useState(!1),[g,_]=F.useState(null),[b,P]=F.useState(!1),[x,k]=F.useState(null);F.useEffect(()=>{E()},[]);const E=async()=>{m(!0);try{const v=mn(Ie(ie,"users"),Un("displayName"),Bc(Su)),w=await dt(v),I=w.docs.map(A=>({id:A.id,...A.data()}));i(I),u(w.docs[w.docs.length-1]),d(w.docs.length===Su);const S=await dt(Ie(ie,"circles"));o(S.docs.map(A=>({id:A.id,...A.data()})))}catch(v){console.error("Error fetching networking data:",v)}finally{m(!1)}},O=async()=>{if(!(!a||f)){m(!0);try{const v=mn(Ie(ie,"users"),Un("displayName"),vI(a),Bc(Su)),w=await dt(v),I=w.docs.map(S=>({id:S.id,...S.data()}));i(S=>[...S,...I]),u(w.docs[w.docs.length-1]),d(w.docs.length===Su)}catch(v){console.error("Error loading more members:",v)}finally{m(!1)}}},M=v=>{_(v),P(!0)},D=v=>{k({id:v.id,type:"group",recipient:{name:v.name,photoURL:v.image}})};return h.jsxs("div",{className:"px-8 pt-0 animate-in fade-in duration-500",children:[h.jsx("div",{className:"sticky top-[105px] z-30 bg-black/95 backdrop-blur py-4 -mx-8 px-8 border-b border-white/10 mb-8 flex justify-end",children:h.jsxs("div",{className:"flex gap-6",children:[h.jsx("button",{onClick:()=>n("members"),className:`pb-2 text-[10px] font-bold uppercase tracking-[0.2em] transition-colors ${e==="members"?"text-white border-b border-white":"text-neutral-600 hover:text-neutral-400 border-transparent"}`,children:"Membros"}),h.jsx("button",{onClick:()=>n("groups"),className:`pb-2 text-[10px] font-bold uppercase tracking-[0.2em] transition-colors ${e==="groups"?"text-white border-b border-white":"text-neutral-600 hover:text-neutral-400 border-transparent"}`,children:"Grupos"})]})}),h.jsx("div",{className:"grid grid-cols-1 gap-4",children:e==="members"?r.map(v=>h.jsxs("div",{onClick:()=>M(v.id),className:"bg-white/5 border border-white/10 p-4 flex items-center gap-4 hover:bg-white/10 transition-colors cursor-pointer group",children:[h.jsx("div",{className:"w-12 h-12 bg-neutral-800 rounded-full flex items-center justify-center overflow-hidden border border-white/10",children:v.photoURL?h.jsx("img",{src:v.photoURL,alt:v.displayName,className:"w-full h-full object-cover"}):h.jsx(ys,{className:"w-5 h-5 text-neutral-500 group-hover:text-white transition-colors"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-sm text-white font-medium uppercase tracking-wider",children:v.displayName||"Membro"}),h.jsx("p",{className:"text-[9px] text-neutral-500 uppercase tracking-widest",children:v.profession||"Membro"})]})]},v.id)):s.map(v=>h.jsxs("div",{onClick:()=>D(v),className:"bg-white/5 border border-white/10 p-4 flex items-center gap-4 hover:bg-white/10 transition-colors cursor-pointer group",children:[h.jsx("div",{className:"w-12 h-12 bg-neutral-800 rounded-full flex items-center justify-center overflow-hidden border border-white/10",children:v.image?h.jsx("img",{src:v.image,alt:v.name,className:"w-full h-full object-cover"}):h.jsx(ts,{className:"w-5 h-5 text-neutral-500 group-hover:text-white transition-colors"})}),h.jsxs("div",{className:"flex-1",children:[h.jsx("h3",{className:"text-sm text-white font-medium uppercase tracking-wider",children:v.name}),h.jsx("p",{className:"text-[9px] text-neutral-500 uppercase tracking-widest",children:v.role||"Grupo Oficial"})]}),h.jsx(Q1,{className:"w-4 h-4 text-neutral-600 group-hover:text-white transition-colors"})]},v.id))}),e==="members"&&c&&h.jsx("div",{className:"mt-8 flex justify-center",children:h.jsx("button",{onClick:O,disabled:f,className:"bg-white/5 border border-white/10 text-white px-6 py-3 text-xs font-bold uppercase tracking-widest hover:bg-white/10 transition-colors disabled:opacity-50",children:f?"Carregando...":"Carregar Mais"})}),h.jsxs("div",{className:"mt-12 p-6 border border-white/10 bg-gradient-to-b from-white/5 to-transparent text-center",children:[h.jsx(ah,{className:"w-6 h-6 text-neutral-400 mx-auto mb-4"}),h.jsx("h3",{className:"text-sm text-white font-medium uppercase tracking-wider mb-2",children:"Acesso Restrito"}),h.jsxs("p",{className:"text-[10px] text-neutral-500 leading-relaxed max-w-xs mx-auto",children:["O acesso completo  lista de membros  reservado para aqueles que atingem o rank de ",h.jsx("strong",{children:"Soberano"}),". Continue sua jornada."]})]}),h.jsx(oy,{isOpen:b,onClose:()=>P(!1),userId:g,isEditable:!1,onStartChat:v=>{P(!1);const w=[t.uid,g].sort().join("_");k({id:w,type:"dm",recipient:{name:v.displayName,photoURL:v.photoURL}})}}),x&&h.jsx(b6,{chatId:x.id,type:x.type,recipient:x.recipient,onClose:()=>k(null)})]})}function A6(){const{loginWithGoogle:t,loginWithEmail:e}=_n(),[n,r]=F.useState(!1),[i,s]=F.useState(""),[o,a]=F.useState(""),[u,c]=F.useState(""),[d,f]=F.useState(!1),m=async()=>{f(!0),c("");try{await t()}catch{c("Falha ao entrar com Google."),f(!1)}},g=async _=>{_.preventDefault(),f(!0),c("");try{await e(i,o)}catch{c("Credenciais invlidas."),f(!1)}};return h.jsx("div",{className:"min-h-screen bg-black flex items-center justify-center p-8",children:h.jsxs("div",{className:"w-full max-w-md space-y-12",children:[h.jsxs("div",{className:"text-center",children:[h.jsx("p",{className:"text-[9px] text-neutral-500 font-bold uppercase tracking-[0.3em] mb-4",children:"Sociedade Privada"}),h.jsxs("h1",{className:"text-4xl font-light text-white uppercase tracking-[0.2em]",children:["VIRTUS",h.jsx("span",{className:"text-neutral-600",children:"."})]})]}),h.jsxs("div",{className:"space-y-6",children:[u&&h.jsx("div",{className:"bg-red-900/20 border border-red-900/50 p-4 text-center animate-in fade-in slide-in-from-top-2",children:h.jsx("p",{className:"text-red-400 text-xs uppercase tracking-widest",children:u})}),n?h.jsxs("form",{onSubmit:g,className:"space-y-6 animate-in fade-in slide-in-from-bottom-4",children:[h.jsxs("div",{className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-neutral-500 uppercase tracking-widest mb-2",children:"Email"}),h.jsx("input",{type:"email",value:i,onChange:_=>s(_.target.value),className:"w-full bg-neutral-900/50 border border-white/10 p-4 text-white text-sm focus:border-white/30 outline-none transition-colors disabled:opacity-50",placeholder:"admin@virtus.com",disabled:d})]}),h.jsxs("div",{children:[h.jsx("label",{className:"block text-[9px] text-neutral-500 uppercase tracking-widest mb-2",children:"Senha"}),h.jsx("input",{type:"password",value:o,onChange:_=>a(_.target.value),className:"w-full bg-neutral-900/50 border border-white/10 p-4 text-white text-sm focus:border-white/30 outline-none transition-colors disabled:opacity-50",placeholder:"",disabled:d})]})]}),h.jsxs("div",{className:"space-y-4",children:[h.jsxs("button",{type:"submit",disabled:d,className:"w-full bg-white text-black py-4 px-6 flex items-center justify-center gap-3 hover:bg-neutral-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d&&h.jsx(s_,{className:"w-4 h-4 animate-spin"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em]",children:d?"Acessando...":"Acessar Painel"})]}),h.jsx("button",{type:"button",onClick:()=>r(!1),disabled:d,className:"w-full text-neutral-500 text-[9px] uppercase tracking-widest hover:text-white transition-colors disabled:opacity-50",children:"Voltar"})]})]}):h.jsxs("div",{className:"space-y-4",children:[h.jsxs("button",{onClick:m,disabled:d,className:"w-full bg-white text-black py-4 px-6 flex items-center justify-center gap-3 hover:bg-neutral-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[d?h.jsx(s_,{className:"w-4 h-4 animate-spin"}):h.jsx(ys,{className:"w-4 h-4"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em]",children:d?"Entrando...":"Entrar como Membro"})]}),h.jsxs("button",{onClick:()=>r(!0),disabled:d,className:"w-full bg-transparent border border-white/10 text-neutral-400 py-4 px-6 flex items-center justify-center gap-3 hover:text-white hover:border-white/30 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx(ah,{className:"w-4 h-4"}),h.jsx("span",{className:"text-[10px] font-bold uppercase tracking-[0.2em]",children:"Acesso Administrativo"})]})]})]}),h.jsx("div",{className:"text-center",children:h.jsx("p",{className:"text-[9px] text-neutral-700 uppercase tracking-[0.2em]",children:"Somente Convidados"})})]})})}function C6({activeTab:t,setActiveTab:e,isCollapsed:n,toggleSidebar:r,isMobileOpen:i,toggleMobileSidebar:s}){const{logout:o,user:a}=_n(),[u,c]=F.useState(!1),d=[{id:"dashboard",label:"Dashboard",icon:h.jsx(WA,{size:20})},{id:"posts",label:"Postagens",icon:h.jsx(zA,{size:20})},{id:"categories",label:"Categorias",icon:h.jsx(X1,{size:20})},{id:"circles",label:"Networking",icon:h.jsx(ts,{size:20})},{id:"habits",label:"Rituais",icon:h.jsx(OA,{size:20})},{id:"users",label:"Membros",icon:h.jsx(ts,{size:20})}];return h.jsxs("aside",{className:`
                bg-neutral-900 border-r border-white/10 h-screen fixed left-0 top-0 flex flex-col transition-all duration-300 z-50
                ${n?"md:w-20":"md:w-64"}
                ${i?"translate-x-0 w-64":"-translate-x-full md:translate-x-0"}
            `,children:[h.jsxs("div",{className:"p-6 border-b border-white/10 flex items-center justify-between",children:[(!n||i)&&h.jsxs("div",{children:[h.jsxs("h2",{className:"text-xl font-light text-white uppercase tracking-[0.15em] whitespace-nowrap",children:["VIRTUS",h.jsx("span",{className:"text-neutral-600",children:"."})]}),h.jsx("p",{className:"text-[9px] text-neutral-500 font-bold uppercase tracking-[0.3em] mt-2 whitespace-nowrap",children:"Admin Panel"})]}),h.jsx("button",{onClick:r,className:`hidden md:block text-neutral-500 hover:text-white transition-colors ${n?"mx-auto":""}`,children:n?h.jsx(W1,{size:20}):h.jsx(MA,{size:20})}),h.jsx("button",{onClick:s,className:"md:hidden text-neutral-500 hover:text-white transition-colors",children:h.jsx(Bn,{size:20})})]}),h.jsx("nav",{className:"flex-1 py-8 px-3 space-y-2 overflow-y-auto",children:d.map(f=>h.jsxs("button",{onClick:()=>e(f.id),className:`
                            w-full flex items-center gap-4 px-3 py-3 rounded-lg transition-all group relative
                            ${t===f.id?"bg-white text-black":"text-neutral-400 hover:bg-white/5 hover:text-white"}
                            ${n&&!i?"justify-center":""}
                        `,title:n?f.label:"",children:[f.icon,(!n||i)&&h.jsx("span",{className:"text-xs font-bold uppercase tracking-wider whitespace-nowrap",children:f.label}),n&&!i&&h.jsx("div",{className:"absolute left-full ml-4 bg-neutral-800 text-white text-[10px] font-bold uppercase tracking-widest px-3 py-2 rounded opacity-0 group-hover:opacity-100 pointer-events-none whitespace-nowrap z-50 border border-white/10",children:f.label})]},f.id))}),h.jsxs("div",{className:"p-4 border-t border-white/10 space-y-2",children:[h.jsxs("button",{onClick:()=>c(!0),className:`
                        w-full flex items-center gap-4 px-3 py-3 text-neutral-400 hover:text-white hover:bg-white/5 rounded-lg transition-colors
                        ${n&&!i?"justify-center":""}
                    `,title:n?"Meu Perfil":"",children:[h.jsx(ys,{size:20}),(!n||i)&&h.jsx("span",{className:"text-xs font-bold uppercase tracking-wider whitespace-nowrap",children:"Meu Perfil"})]}),h.jsxs("button",{onClick:o,className:`
                        w-full flex items-center gap-4 px-3 py-3 text-red-400 hover:bg-red-900/10 rounded-lg transition-colors
                        ${n&&!i?"justify-center":""}
                    `,title:n?"Sair":"",children:[h.jsx(Lm,{size:20}),(!n||i)&&h.jsx("span",{className:"text-xs font-bold uppercase tracking-wider whitespace-nowrap",children:"Sair"})]})]}),h.jsx(oy,{isOpen:u,onClose:()=>c(!1),userId:a==null?void 0:a.uid,isEditable:!0})]})}const N6=async()=>{const t=["users","posts","categories","habits","stats"];try{for(const e of t){const n=await dt(Ie(ie,e));if(n.empty)continue;const r=[];let i=Sp(ie),s=0;n.docs.forEach(o=>{i.delete(Xe(ie,e,o.id)),s++,s>=400&&(r.push(i.commit()),i=Sp(ie),s=0)}),s>0&&r.push(i.commit()),await Promise.all(r),console.log(`Coleo ${e} limpa.`)}return!0}catch(e){throw console.error("Erro ao resetar banco de dados:",e),e}},ST=async t=>{try{await Ao(Xe(ie,"posts",t));const e=Xe(ie,"stats","global");return(await Ll(e)).exists()&&await Uh(e,{totalPosts:Bh(-1)},{merge:!0}),!0}catch(e){throw console.error("Error deleting post:",e),e}},AT=async t=>{try{await Ao(Xe(ie,"users",t));const e=Xe(ie,"stats","global");return(await Ll(e)).exists()&&await Uh(e,{totalUsers:Bh(-1)},{merge:!0}),!0}catch(e){throw console.error("Error deleting user:",e),e}},R6=Object.freeze(Object.defineProperty({__proto__:null,deletePostWithCleanup:ST,deleteUserWithCleanup:AT,resetDatabase:N6},Symbol.toStringTag,{value:"Module"}));function P6(){const[t,e]=F.useState([]),[n,r]=F.useState([]),[i,s]=F.useState(!1),[o,a]=F.useState(!1),[u,c]=F.useState(!1),[d,f]=F.useState(null),[m,g]=F.useState(!1),[_,b]=F.useState(""),[P,x]=F.useState(""),[k,E]=F.useState(""),[O,M]=F.useState(""),[D,v]=F.useState(null);F.useEffect(()=>{I(),w()},[]);const w=async()=>{const X=mn(Ie(ie,"categories"),Un("order","asc")),B=(await dt(X)).docs.map(Y=>Y.data());r(B),B.length>0&&!P&&x(B[0].name)},I=async()=>{const X=await dt(Ie(ie,"posts"));e(X.docs.map(W=>({id:W.id,...W.data()})))},S=X=>{const W=X.target.files[0];if(W){v(W);const B=new FileReader;B.onloadend=()=>{M(B.result)},B.readAsDataURL(W)}},A=(X,W="")=>{const B=document.getElementById("content-textarea");if(!B)return;const Y=B.selectionStart,N=B.selectionEnd,ue=k,me=ue.substring(0,Y),j=ue.substring(Y,N),be=ue.substring(N),De=me+X+j+W+be;E(De),setTimeout(()=>{B.focus(),B.setSelectionRange(Y+X.length,N+X.length)},0)},R=async X=>{X.preventDefault(),g(!0);try{let W=O;D&&(W=await qa(D,`posts/${Date.now()}_${D.name}`));const B={title:_,category:P,content:k,image:W,date:new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}).toUpperCase(),readTime:"3 MIN",likes:0,isLocked:!1};o&&d?await fs(Xe(ie,"posts",d),B):await Sr(Ie(ie,"posts"),{...B,createdAt:zh()}),ne(),I()}catch(W){console.error("Error saving post:",W),alert("Erro ao salvar post. Tente novamente.")}finally{g(!1)}},C=X=>{b(X.title),x(X.category),E(X.content),M(X.image),f(X.id),a(!0),s(!0),v(null)},te=async X=>{if(window.confirm("Tem certeza que deseja excluir este post?"))try{await ST(X),I()}catch{alert("Erro ao excluir post.")}},ne=()=>{s(!1),a(!1),f(null),b(""),E(""),M(""),v(null),n.length>0&&x(n[0].name)};return h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-light text-white uppercase tracking-wide",children:"Gerenciar Postagens"}),!i&&h.jsxs("button",{onClick:()=>{ne(),s(!0)},className:"bg-white text-black px-6 py-3 flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:[h.jsx(es,{size:16})," Novo Post"]})]}),i&&h.jsxs("div",{className:"mb-12 bg-neutral-900 border border-white/10 p-6 animate-in fade-in slide-in-from-top-4",children:[h.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest mb-6",children:o?"Editar Artigo":"Criar Novo Artigo"}),h.jsxs("form",{onSubmit:R,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Ttulo"}),h.jsx("input",{type:"text",value:_,onChange:X=>b(X.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none"})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Categoria"}),h.jsx("select",{value:P,onChange:X=>x(X.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none",children:n.length>0?n.map((X,W)=>h.jsx("option",{value:X.name,children:X.name},W)):h.jsx("option",{value:"GERAL",children:"GERAL"})})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Imagem de Capa"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"cursor-pointer bg-black border border-white/10 px-4 py-3 text-neutral-400 hover:text-white hover:border-white/30 transition-all flex items-center gap-2",children:[h.jsx(tp,{size:16}),h.jsx("span",{className:"text-xs uppercase tracking-wider",children:"Escolher Arquivo"}),h.jsx("input",{type:"file",onChange:S,className:"hidden",accept:"image/*"})]}),O&&h.jsx("span",{className:"text-green-500 text-xs uppercase tracking-wider",children:"Imagem Carregada"})]}),O&&h.jsx("div",{className:"mt-2 w-full h-48 overflow-hidden border border-white/10",children:h.jsx("img",{src:O,alt:"Preview",className:"w-full h-full object-cover"})})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Contedo (Markdown)"}),h.jsx("button",{type:"button",onClick:()=>c(!u),className:"flex items-center gap-2 text-[10px] uppercase tracking-widest text-neutral-400 hover:text-white transition-colors",children:u?h.jsxs(h.Fragment,{children:[h.jsx(VA,{size:14})," Editar"]}):h.jsxs(h.Fragment,{children:[h.jsx(FA,{size:14})," Visualizar"]})})]}),u?h.jsx("div",{className:"w-full bg-black border border-white/10 p-6 min-h-[300px] text-neutral-300 leading-loose space-y-4 font-serif text-lg text-justify",children:h.jsx(sy,{components:{h1:({node:X,...W})=>h.jsx("h1",{className:"text-2xl font-light text-white uppercase tracking-wide mt-8 mb-4",...W}),h2:({node:X,...W})=>h.jsx("h2",{className:"text-xl font-light text-white uppercase tracking-wide mt-6 mb-3",...W}),p:({node:X,...W})=>h.jsx("p",{className:"mb-4",...W}),blockquote:({node:X,...W})=>h.jsx("blockquote",{className:"border-l-2 border-white/30 pl-4 italic text-neutral-400 my-6",...W}),ul:({node:X,...W})=>h.jsx("ul",{className:"list-disc list-inside mb-4 space-y-2",...W}),li:({node:X,...W})=>h.jsx("li",{className:"text-neutral-300",...W}),a:({node:X,...W})=>h.jsx("a",{className:"text-[#D4AF37] underline underline-offset-4 hover:text-white transition-colors",target:"_blank",rel:"noopener noreferrer",...W}),strong:({node:X,...W})=>h.jsx("strong",{className:"font-bold text-white",...W})},children:k||"*Nenhum contedo para visualizar*"})}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"flex gap-2 mb-2",children:[h.jsx("button",{type:"button",onClick:()=>A("**","**"),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-white rounded",title:"Negrito",children:h.jsx(RA,{size:14})}),h.jsx("button",{type:"button",onClick:()=>A("# "),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-white rounded",title:"Ttulo 1",children:h.jsx(BA,{size:14})}),h.jsx("button",{type:"button",onClick:()=>A("## "),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-white rounded",title:"Ttulo 2",children:h.jsx($A,{size:14})}),h.jsx("button",{type:"button",onClick:()=>A("> "),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-white rounded",title:"Citao",children:h.jsx(YA,{size:14})}),h.jsx("button",{type:"button",onClick:()=>A("- "),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-white rounded",title:"Lista",children:h.jsx(KA,{size:14})}),h.jsx("button",{type:"button",onClick:()=>A("[","](url)"),className:"p-2 bg-neutral-800 hover:bg-neutral-700 text-white rounded",title:"Link",children:h.jsx(GA,{size:14})})]}),h.jsx("textarea",{id:"content-textarea",value:k,onChange:X=>E(X.target.value),rows:12,className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none font-serif"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"submit",disabled:m,className:`bg-white text-black px-8 py-3 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Salvando...":o?"Atualizar":"Publicar"}),h.jsx("button",{type:"button",onClick:ne,className:"text-neutral-500 px-6 py-3 text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Cancelar"})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 gap-4",children:t.map(X=>h.jsxs("div",{className:"bg-neutral-900/50 border border-white/5 p-4 flex justify-between items-center group hover:bg-neutral-900 transition-colors",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-16 h-10 bg-neutral-800 overflow-hidden",children:h.jsx("img",{src:X.image,alt:X.title,className:"w-full h-full object-cover"})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-medium uppercase tracking-wider",children:X.title}),h.jsxs("span",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:[X.category,"  ",X.date]})]})]}),h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("button",{onClick:()=>C(X),className:"text-neutral-600 hover:text-white transition-colors p-2",title:"Editar",children:h.jsx(lh,{size:18})}),h.jsx("button",{onClick:()=>te(X.id),className:"text-neutral-600 hover:text-red-500 transition-colors p-2",title:"Excluir",children:h.jsx(yo,{size:18})})]})]},X.id))})]})}function D6(){const[t,e]=F.useState("list"),[n,r]=F.useState(null),[i,s]=F.useState([]),[o,a]=F.useState([]),[u,c]=F.useState(!1),[d,f]=F.useState(!1),[m,g]=F.useState(!1),[_,b]=F.useState(""),[P,x]=F.useState(""),[k,E]=F.useState(""),[O,M]=F.useState(null),[D,v]=F.useState(""),[w,I]=F.useState(""),[S,A]=F.useState(""),[R,C]=F.useState(null),[te,ne]=F.useState([]),[X,W]=F.useState("");F.useEffect(()=>{Y(),B()},[]),F.useEffect(()=>{n&&t==="members"&&N(n.id)},[n,t]);const B=async()=>{const se=await dt(Ie(ie,"users"));ne(se.docs.map(re=>({id:re.id,...re.data()})))},Y=async()=>{const se=await dt(Ie(ie,"circles"));s(se.docs.map(re=>({id:re.id,...re.data()})))},N=async se=>{const re=await dt(Ie(ie,`circles/${se}/members`));a(re.docs.map(Cn=>({id:Cn.id,...Cn.data()})))},ue=(se,re,Cn)=>{const Wn=se.target.files[0];if(Wn){Cn(Wn);const Gn=new FileReader;Gn.onloadend=()=>{re(Gn.result)},Gn.readAsDataURL(Wn)}},me=async se=>{se.preventDefault(),g(!0);try{let re=k;O&&(re=await qa(O,`circles/${Date.now()}_${O.name}`)),await Sr(Ie(ie,"circles"),{name:_,description:P,image:re}),c(!1),Y(),Ee()}catch(re){console.error("Error creating circle:",re),alert("Erro ao criar crculo.")}finally{g(!1)}},j=async se=>{if(se.preventDefault(),!!n){g(!0);try{let re=k;O&&(re=await qa(O,`circles/${Date.now()}_${O.name}`)),await fs(Xe(ie,"circles",n.id),{name:_,description:P,image:re}),f(!1),r(null),Y(),Ee()}catch(re){console.error("Error updating circle:",re),alert("Erro ao atualizar crculo.")}finally{g(!1)}}},be=async se=>{window.confirm("Excluir este grupo e todos os seus membros?")&&(await Ao(Xe(ie,"circles",se)),Y())},De=se=>{r(se),b(se.name),x(se.description||""),E(se.image),f(!0),c(!1)},Ee=()=>{b(""),x(""),E(""),M(null),c(!1),f(!1),r(null)},ft=async se=>{if(se.preventDefault(),!!n){g(!0);try{let re=S;R&&(re=await qa(R,`members/${Date.now()}_${R.name}`)),await Sr(Ie(ie,`circles/${n.id}/members`),{name:D,role:w,image:re,userId:X||null}),c(!1),N(n.id),vn()}catch(re){console.error("Error adding member:",re),alert("Erro ao adicionar membro.")}finally{g(!1)}}},$t=async se=>{window.confirm("Remover este membro do grupo?")&&(await Ao(Xe(ie,`circles/${n.id}/members`,se)),N(n.id))},vn=()=>{v(""),I(""),A(""),W(""),c(!1)},[rn,fr]=F.useState("group"),bs=async se=>{if(n)try{await Sr(Ie(ie,`circles/${n.id}/members`),{name:se.displayName||"Sem Nome",role:"Membro",image:se.photoURL||"",userId:se.id}),N(n.id)}catch(re){console.error("Error adding member:",re)}};if(t==="members"&&n){const se=te.filter(re=>!o.some(Cn=>Cn.userId===re.id));return h.jsxs("div",{className:"p-8 animate-in fade-in slide-in-from-right-4",children:[h.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[h.jsx("button",{onClick:()=>{e("list"),r(null)},className:"p-2 bg-neutral-900 rounded-full text-neutral-400 hover:text-white transition-colors",children:h.jsx(Hi,{size:20})}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-2xl font-light text-white uppercase tracking-wide",children:["Membros: ",n.name]}),h.jsx("p",{className:"text-neutral-500 text-xs uppercase tracking-widest mt-1",children:"Gerencie quem faz parte deste crculo"})]})]}),h.jsxs("div",{className:"flex gap-8 border-b border-white/10 mb-8",children:[h.jsxs("button",{onClick:()=>{fr("group"),c(!1)},className:`pb-4 text-xs font-bold uppercase tracking-widest transition-colors ${rn==="group"?"text-white border-b-2 border-white":"text-neutral-500 hover:text-white"}`,children:["Membros do Grupo (",o.length,")"]}),h.jsx("button",{onClick:()=>{fr("all"),c(!1)},className:`pb-4 text-xs font-bold uppercase tracking-widest transition-colors ${rn==="all"?"text-white border-b-2 border-white":"text-neutral-500 hover:text-white"}`,children:"Todos os Usurios"})]}),rn==="group"&&h.jsxs(h.Fragment,{children:[!u&&h.jsx("div",{className:"flex justify-end mb-6",children:h.jsxs("button",{onClick:()=>c(!0),className:"bg-white text-black px-6 py-3 flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:[h.jsx(es,{size:16})," Adicionar Manualmente"]})}),u&&h.jsxs("div",{className:"mb-8 bg-neutral-900 border border-white/10 p-6 rounded-lg",children:[h.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest mb-6",children:"Novo Membro Manual"}),h.jsxs("form",{onSubmit:ft,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Nome"}),h.jsx("input",{type:"text",value:D,onChange:re=>v(re.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Cargo/Funo"}),h.jsx("input",{type:"text",value:w,onChange:re=>I(re.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none",required:!0,placeholder:"Ex: Membro Fundador"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Foto"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"cursor-pointer bg-black border border-white/10 px-4 py-3 text-neutral-400 hover:text-white hover:border-white/30 transition-all flex items-center gap-2",children:[h.jsx(tp,{size:16}),h.jsx("span",{className:"text-xs uppercase tracking-wider",children:"Escolher Arquivo"}),h.jsx("input",{type:"file",onChange:re=>ue(re,A),className:"hidden",accept:"image/*"})]}),S&&h.jsx("span",{className:"text-green-500 text-xs uppercase tracking-wider",children:"Imagem Carregada"})]})]}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{type:"submit",className:"bg-white text-black px-6 py-3 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:"Salvar"}),h.jsx("button",{type:"button",onClick:vn,className:"text-neutral-500 px-6 py-3 text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Cancelar"})]})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[o.map(re=>h.jsxs("div",{className:"bg-neutral-900 border border-white/10 p-4 flex items-center gap-4 group relative",children:[h.jsx("button",{onClick:()=>$t(re.id),className:"absolute top-2 right-2 text-neutral-600 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100",children:h.jsx(yo,{size:14})}),h.jsx("div",{className:"w-12 h-12 rounded-full bg-neutral-800 overflow-hidden border border-white/10 shrink-0",children:re.image?h.jsx("img",{src:re.image,alt:re.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(ts,{size:20,className:"text-neutral-500"})})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold text-sm uppercase tracking-wider",children:re.name}),h.jsx("p",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:re.role})]})]},re.id)),o.length===0&&!u&&h.jsx("div",{className:"col-span-full text-center py-12 text-neutral-500 text-sm border border-dashed border-white/10 rounded-lg",children:"Nenhum membro neste grupo."})]})]}),rn==="all"&&h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[se.map(re=>h.jsxs("div",{className:"bg-neutral-900 border border-white/10 p-4 flex items-center justify-between group",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-800 overflow-hidden border border-white/10 shrink-0",children:re.photoURL?h.jsx("img",{src:re.photoURL,alt:re.displayName,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(ts,{size:16,className:"text-neutral-500"})})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-bold text-xs uppercase tracking-wider",children:re.displayName||"Sem Nome"}),h.jsx("p",{className:"text-[10px] text-neutral-500",children:re.email})]})]}),h.jsx("button",{onClick:()=>bs(re),className:"bg-white/10 text-white p-2 rounded-full hover:bg-white hover:text-black transition-colors",title:"Adicionar ao Grupo",children:h.jsx(es,{size:16})})]},re.id)),se.length===0&&h.jsx("div",{className:"col-span-full text-center py-12 text-neutral-500 text-sm border border-dashed border-white/10 rounded-lg",children:"Todos os usurios j esto neste grupo."})]})]})}return h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light text-white uppercase tracking-wide",children:"Networking & Crculos"}),h.jsx("p",{className:"text-neutral-500 text-xs uppercase tracking-widest mt-2",children:"Gerencie os grupos e seus membros"})]}),!u&&!d&&h.jsxs("button",{onClick:()=>c(!0),className:"bg-white text-black px-6 py-3 flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:[h.jsx(es,{size:16})," Novo Grupo"]})]}),(u||d)&&h.jsxs("div",{className:"mb-12 bg-neutral-900 border border-white/10 p-6 animate-in fade-in slide-in-from-top-4",children:[h.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest mb-6",children:d?"Editar Grupo":"Criar Novo Grupo"}),h.jsxs("form",{onSubmit:d?j:me,className:"space-y-6",children:[h.jsxs("div",{className:"grid grid-cols-2 gap-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Nome do Grupo"}),h.jsx("input",{type:"text",value:_,onChange:se=>b(se.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none",placeholder:"Ex: Inner Circle",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Descrio"}),h.jsx("input",{type:"text",value:P,onChange:se=>x(se.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none",placeholder:"Ex: Grupo exclusivo para investidores"})]})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Imagem de Capa"}),h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("label",{className:"cursor-pointer bg-black border border-white/10 px-4 py-3 text-neutral-400 hover:text-white hover:border-white/30 transition-all flex items-center gap-2",children:[h.jsx(tp,{size:16}),h.jsx("span",{className:"text-xs uppercase tracking-wider",children:"Escolher Arquivo"}),h.jsx("input",{type:"file",onChange:se=>ue(se,E,M),className:"hidden",accept:"image/*"})]}),k&&h.jsx("span",{className:"text-green-500 text-xs uppercase tracking-wider",children:"Imagem Carregada"})]})]}),h.jsxs("div",{className:"flex gap-4 pt-4",children:[h.jsx("button",{type:"submit",disabled:m,className:`bg-white text-black px-8 py-3 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors ${m?"opacity-50 cursor-not-allowed":""}`,children:m?"Processando...":d?"Atualizar":"Salvar"}),h.jsx("button",{type:"button",onClick:Ee,className:"text-neutral-500 px-6 py-3 text-xs font-bold uppercase tracking-widest hover:text-white transition-colors",children:"Cancelar"})]})]})]}),h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:i.map(se=>h.jsxs("div",{className:"bg-neutral-900 border border-white/10 p-6 flex flex-col items-center text-center relative group hover:border-white/30 transition-all",children:[h.jsxs("div",{className:"absolute top-4 right-4 flex gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>De(se),className:"text-neutral-400 hover:text-white transition-colors",title:"Editar",children:h.jsx(lh,{size:16})}),h.jsx("button",{onClick:()=>be(se.id),className:"text-neutral-600 hover:text-red-500 transition-colors",title:"Excluir",children:h.jsx(yo,{size:16})})]}),h.jsx("div",{className:"w-20 h-20 rounded-full bg-neutral-800 mb-4 overflow-hidden border border-white/10",children:se.image?h.jsx("img",{src:se.image,alt:se.name,className:"w-full h-full object-cover"}):h.jsx("div",{className:"w-full h-full flex items-center justify-center",children:h.jsx(ts,{size:32,className:"text-neutral-500"})})}),h.jsx("h3",{className:"text-white font-medium uppercase tracking-wider mb-1",children:se.name}),h.jsx("p",{className:"text-[10px] text-neutral-500 uppercase tracking-widest mb-6 h-8 line-clamp-2",children:se.description}),h.jsx("button",{onClick:()=>{r(se),e("members")},className:"w-full border border-white/10 py-2 text-[10px] font-bold uppercase tracking-widest text-neutral-400 hover:bg-white hover:text-black hover:border-white transition-all",children:"Ver Membros"})]},se.id))})]})}const P0=[{id:0,label:"DOM"},{id:1,label:"SEG"},{id:2,label:"TER"},{id:3,label:"QUA"},{id:4,label:"QUI"},{id:5,label:"SEX"},{id:6,label:"SB"}];function j6(){const[t,e]=F.useState([]),[n,r]=F.useState(!1),[i,s]=F.useState(""),[o,a]=F.useState("FIXED"),[u,c]=F.useState([]);F.useEffect(()=>{d()},[]);const d=async()=>{const m=await dt(Ie(ie,"habits"));e(m.docs.map(g=>({id:g.id,...g.data()})))},f=async m=>{if(m.preventDefault(),!!i)try{await Sr(Ie(ie,"habits"),{title:i,type:o,daysOfWeek:o==="DYNAMIC"?u:[],isActive:!0,createdAt:new Date}),s(""),c([]),r(!1),d(),alert("Ritual criado com sucesso!")}catch(g){console.error("Error creating habit:",g),alert("Erro ao criar ritual.")}};return h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light text-white uppercase tracking-wide",children:"Gesto de Rituais"}),h.jsx("p",{className:"text-neutral-500 text-xs uppercase tracking-widest mt-2",children:"Crie e gerencie os hbitos dirios"})]}),!n&&h.jsxs("button",{onClick:()=>r(!0),className:"bg-white text-black px-6 py-3 flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:[h.jsx(es,{size:16})," Novo Ritual"]})]}),n&&h.jsxs("div",{className:"mb-12 bg-neutral-900 border border-white/10 p-6 animate-in fade-in slide-in-from-top-4 rounded-lg",children:[h.jsxs("div",{className:"flex justify-between items-start mb-6",children:[h.jsx("h3",{className:"text-white text-sm font-bold uppercase tracking-widest",children:"Adicionar Novo Ritual"}),h.jsx("button",{onClick:()=>r(!1),className:"text-neutral-500 hover:text-white",children:h.jsx(Bn,{size:20})})]}),h.jsxs("form",{onSubmit:f,className:"space-y-6 max-w-2xl",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Ttulo do Hbito"}),h.jsx("input",{type:"text",value:i,onChange:m=>s(m.target.value),className:"w-full bg-black border border-white/10 p-3 text-white focus:border-white/30 outline-none",placeholder:"Ex: Leitura Matinal",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Tipo de Recorrncia"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{type:"button",onClick:()=>a("FIXED"),className:`flex-1 py-3 border text-xs uppercase tracking-widest transition-colors ${o==="FIXED"?"bg-white text-black border-white":"bg-transparent text-neutral-500 border-white/10"}`,children:"Dirio (Fixo)"}),h.jsx("button",{type:"button",onClick:()=>a("DYNAMIC"),className:`flex-1 py-3 border text-xs uppercase tracking-widest transition-colors ${o==="DYNAMIC"?"bg-white text-black border-white":"bg-transparent text-neutral-500 border-white/10"}`,children:"Dias Especficos"})]})]}),o==="DYNAMIC"&&h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-[10px] text-neutral-500 uppercase tracking-widest",children:"Dias da Semana"}),h.jsx("div",{className:"flex gap-2 flex-wrap",children:P0.map(m=>h.jsx("button",{type:"button",onClick:()=>toggleDay(m.id),className:`
                                            w-10 h-10 flex items-center justify-center border text-[10px] font-bold transition-all
                                            ${u.includes(m.id)?"bg-white text-black border-white":"bg-transparent text-neutral-600 border-white/10 hover:border-white/30"}
                                        `,children:m.label},m.id))})]}),h.jsx("button",{type:"submit",className:"w-full bg-white text-black border border-white/10 py-4 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:"Salvar Ritual"})]})]}),h.jsxs("div",{className:"space-y-1",children:[h.jsx("h3",{className:"text-neutral-500 text-xs uppercase tracking-widest mb-4",children:"Rituais Ativos"}),t.map(m=>h.jsxs("div",{className:"bg-neutral-900/50 border border-white/5 p-4 flex justify-between items-center group hover:border-white/20 transition-colors",children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-medium uppercase tracking-wider",children:m.title}),h.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[h.jsx("span",{className:`text-[9px] px-2 py-0.5 border ${m.type==="FIXED"?"border-blue-500/30 text-blue-400":"border-purple-500/30 text-purple-400"} uppercase tracking-widest`,children:m.type==="FIXED"?"Dirio":"Personalizado"}),m.type==="DYNAMIC"&&h.jsx("span",{className:"text-[9px] text-neutral-500 uppercase tracking-widest",children:m.daysOfWeek.map(g=>P0[g].label).join(", ")})]})]}),h.jsx("button",{onClick:()=>handleDeleteHabit(m.id),className:"text-neutral-600 hover:text-red-500 transition-colors p-2 opacity-0 group-hover:opacity-100",children:h.jsx(yo,{size:18})})]},m.id)),t.length===0&&h.jsx("div",{className:"text-center py-12 text-neutral-500 text-sm border border-dashed border-white/10 rounded-lg",children:"Nenhum ritual ativo."})]})]})}function O6(){const[t,e]=F.useState([]);F.useEffect(()=>{n()},[]);const n=async()=>{const s=await dt(Ie(ie,"users"));e(s.docs.map(o=>({id:o.id,...o.data()})))},r=async(s,o)=>{await fs(Xe(ie,"users",s),{isBlocked:!o}),n()},i=async s=>{if(window.confirm("Remover este usurio permanentemente?"))try{await AT(s),n()}catch{alert("Erro ao remover usurio.")}};return h.jsxs("div",{className:"p-8",children:[h.jsx("h1",{className:"text-3xl font-light text-white uppercase tracking-wide mb-8",children:"Gesto de Membros"}),h.jsx("div",{className:"bg-neutral-900 border border-white/10 overflow-hidden",children:h.jsxs("table",{className:"w-full text-left",children:[h.jsx("thead",{className:"bg-black border-b border-white/10",children:h.jsxs("tr",{children:[h.jsx("th",{className:"p-4 text-[10px] text-neutral-500 font-bold uppercase tracking-widest",children:"Membro"}),h.jsx("th",{className:"p-4 text-[10px] text-neutral-500 font-bold uppercase tracking-widest",children:"Email"}),h.jsx("th",{className:"p-4 text-[10px] text-neutral-500 font-bold uppercase tracking-widest",children:"Status"}),h.jsx("th",{className:"p-4 text-[10px] text-neutral-500 font-bold uppercase tracking-widest text-right",children:"Aes"})]})}),h.jsx("tbody",{className:"divide-y divide-white/5",children:t.length===0?h.jsx("tr",{children:h.jsx("td",{colSpan:4,className:"p-8 text-center text-neutral-500 text-xs uppercase tracking-widest",children:"Nenhum membro encontrado."})}):t.map(s=>h.jsxs("tr",{className:"hover:bg-white/5 transition-colors",children:[h.jsxs("td",{className:"p-4 flex items-center gap-3",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-neutral-800 flex items-center justify-center overflow-hidden",children:s.photoURL?h.jsx("img",{src:s.photoURL,className:"w-full h-full object-cover"}):h.jsx(ys,{size:14,className:"text-neutral-500"})}),h.jsx("span",{className:"text-sm text-white font-medium",children:s.displayName||"Sem Nome"})]}),h.jsx("td",{className:"p-4 text-xs text-neutral-400",children:s.email}),h.jsx("td",{className:"p-4",children:h.jsx("span",{className:`text-[9px] px-2 py-1 border ${s.isBlocked?"border-red-500/30 text-red-400":"border-green-500/30 text-green-400"} uppercase tracking-widest`,children:s.isBlocked?"Bloqueado":"Ativo"})}),h.jsxs("td",{className:"p-4 text-right space-x-2",children:[h.jsx("button",{onClick:()=>r(s.id,s.isBlocked),className:"text-neutral-500 hover:text-white transition-colors",title:s.isBlocked?"Desbloquear":"Bloquear",children:h.jsx(NA,{size:16})}),h.jsx("button",{onClick:()=>i(s.id),className:"text-neutral-500 hover:text-red-500 transition-colors",title:"Excluir",children:h.jsx(yo,{size:16})})]})]},s.id))})]})})]})}function L6(){const[t,e]=F.useState([]),[n,r]=F.useState([]),[i,s]=F.useState(!0),[o,a]=F.useState(!1),[u,c]=F.useState(null),[d,f]=F.useState({name:"",order:0});F.useEffect(()=>{m()},[]);const m=async()=>{try{const E=mn(Ie(ie,"categories"),Un("order","asc"));let M=(await dt(E)).docs.map(w=>({id:w.id,...w.data()}));M.length===0&&(M=await g());const v=(await dt(Ie(ie,"posts"))).docs.map(w=>w.data());e(M),r(v)}catch(E){console.error("Error fetching data:",E)}finally{s(!1)}},g=async()=>{try{const{writeBatch:E,doc:O}=await Gt(async()=>{const{writeBatch:w,doc:I}=await Promise.resolve().then(()=>ei);return{writeBatch:w,doc:I}},void 0,import.meta.url),M=E(ie),D=["IMAGEM","INTELECTO","NEGCIOS","CARTER"],v=[];return D.forEach((w,I)=>{const S=Xe(Ie(ie,"categories")),A={name:w,order:I+1};M.set(S,A),v.push({id:S.id,...A})}),await M.commit(),console.log("Categories seeded!"),v}catch(E){return console.error("Error seeding defaults:",E),[]}},_=E=>n.filter(O=>O.category===E).length,b=(E=null)=>{if(E)c(E),f({name:E.name,order:E.order});else{c(null);const O=t.length>0?Math.max(...t.map(M=>M.order||0)):0;f({name:"",order:O+1})}a(!0)},P=async E=>{E.preventDefault();try{u?await fs(Xe(ie,"categories",u.id),d):await Sr(Ie(ie,"categories"),d),a(!1),m()}catch(O){console.error("Error saving category:",O)}},x=async E=>{if(window.confirm("Tem certeza que deseja excluir esta categoria?"))try{await Ao(Xe(ie,"categories",E)),m()}catch(O){console.error("Error deleting category:",O)}},k=async(E,O)=>{if(O==="up"&&E===0||O==="down"&&E===t.length-1)return;const M=[...t],D=O==="up"?E-1:E+1,v=M[E];M[E]=M[D],M[D]=v;const w=M.map((I,S)=>({...I,order:S+1}));e(w);try{await Promise.all(w.map(I=>fs(Xe(ie,"categories",I.id),{order:I.order})))}catch(I){console.error("Error reordering:",I),m()}};return h.jsxs("div",{className:"p-8 max-w-5xl mx-auto animate-in fade-in duration-500",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsxs("div",{children:[h.jsx("h1",{className:"text-3xl font-light text-white uppercase tracking-wide",children:"Categorias"}),h.jsx("p",{className:"text-neutral-500 text-xs uppercase tracking-widest mt-2",children:"Gerencie as sees do contedo"})]}),h.jsxs("button",{onClick:()=>b(),className:"bg-white text-black px-6 py-3 flex items-center gap-2 text-xs font-bold uppercase tracking-widest hover:bg-neutral-200 transition-colors",children:[h.jsx(es,{size:16})," Nova Categoria"]})]}),h.jsxs("div",{className:"grid gap-4",children:[t.map((E,O)=>h.jsxs("div",{className:"bg-neutral-900/50 border border-white/5 p-4 rounded-lg flex items-center justify-between group hover:border-white/10 transition-all",children:[h.jsxs("div",{className:"flex items-center gap-4",children:[h.jsxs("div",{className:"flex flex-col gap-1",children:[h.jsx("button",{onClick:()=>k(O,"up"),disabled:O===0,className:"text-neutral-600 hover:text-white disabled:opacity-30 transition-colors",children:h.jsx(CA,{size:14})}),h.jsx("button",{onClick:()=>k(O,"down"),disabled:O===t.length-1,className:"text-neutral-600 hover:text-white disabled:opacity-30 transition-colors",children:h.jsx(SA,{size:14})})]}),h.jsx("div",{className:"w-10 h-10 rounded-full bg-neutral-800 flex items-center justify-center text-neutral-400",children:h.jsx(X1,{size:18})}),h.jsxs("div",{children:[h.jsx("h3",{className:"text-white font-serif text-lg",children:E.name}),h.jsxs("p",{className:"text-neutral-500 text-[10px] uppercase tracking-wider",children:[_(E.name)," Postagens"]})]})]}),h.jsxs("div",{className:"flex items-center gap-2 opacity-0 group-hover:opacity-100 transition-opacity",children:[h.jsx("button",{onClick:()=>b(E),className:"p-2 text-neutral-400 hover:text-white hover:bg-white/5 rounded-full transition-colors",title:"Editar",children:h.jsx(lh,{size:16})}),h.jsx("button",{onClick:()=>x(E.id),className:"p-2 text-red-900 hover:text-red-500 hover:bg-red-900/10 rounded-full transition-colors",title:"Excluir",children:h.jsx(yo,{size:16})})]})]},E.id)),t.length===0&&h.jsx("div",{className:"text-center py-12 border border-dashed border-white/10 rounded-lg",children:h.jsx("p",{className:"text-neutral-500 text-sm",children:"Nenhuma categoria criada."})})]}),o&&h.jsx("div",{className:"fixed inset-0 bg-black/80 backdrop-blur-sm flex items-center justify-center z-50 p-4",children:h.jsxs("div",{className:"bg-neutral-900 border border-white/10 rounded-xl w-full max-w-md overflow-hidden animate-in zoom-in-95 duration-200",children:[h.jsxs("div",{className:"p-6 border-b border-white/10 flex justify-between items-center",children:[h.jsx("h3",{className:"text-lg font-light text-white uppercase tracking-wider",children:u?"Editar Categoria":"Nova Categoria"}),h.jsx("button",{onClick:()=>a(!1),className:"text-neutral-500 hover:text-white",children:h.jsx(Bn,{size:20})})]}),h.jsxs("form",{onSubmit:P,className:"p-6 space-y-6",children:[h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider",children:"Nome da Categoria"}),h.jsx("input",{type:"text",value:d.name,onChange:E=>f({...d,name:E.target.value}),className:"w-full bg-black border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-white/30 transition-colors",placeholder:"Ex: Filosofia, Negcios...",required:!0})]}),h.jsxs("div",{className:"space-y-2",children:[h.jsx("label",{className:"text-xs font-bold text-neutral-500 uppercase tracking-wider",children:"Ordem de Exibio"}),h.jsx("input",{type:"number",value:d.order,onChange:E=>f({...d,order:parseInt(E.target.value)}),className:"w-full bg-black border border-white/10 rounded-lg px-4 py-3 text-white focus:outline-none focus:border-white/30 transition-colors",required:!0})]}),h.jsx("div",{className:"pt-4",children:h.jsxs("button",{type:"submit",className:"w-full bg-white text-black font-bold uppercase tracking-widest py-4 rounded-lg hover:bg-neutral-200 transition-colors flex items-center justify-center gap-2",children:[h.jsx(JA,{size:18}),h.jsx("span",{children:"Salvar"})]})})]})]})})]})}function M6(){const[t,e]=F.useState({members:0,posts:0,ritualsToday:0}),[n,r]=F.useState(!1);F.useEffect(()=>{const s=Xe(ie,"stats","global"),o=Ml(s,u=>{if(u.exists()){const c=u.data();e(d=>({...d,members:c.totalUsers||0,posts:c.totalPosts||0}))}});return(async()=>{const u=new Date;u.setHours(0,0,0,0);const c=mn(Ie(ie,"users"),jg("lastStreakDate",">=",u)),d=await dt(c);e(f=>({...f,ritualsToday:d.size}))})(),()=>o()},[]);const i=async()=>{if(window.confirm("Isso ir recalcular as estatsticas lendo todo o banco de dados. Continuar?")){r(!0);try{const s=await dt(Ie(ie,"users")),o=await dt(Ie(ie,"posts")),a=s.size,u=o.size,{setDoc:c}=await Gt(async()=>{const{setDoc:d}=await Promise.resolve().then(()=>ei);return{setDoc:d}},void 0,import.meta.url);await c(Xe(ie,"stats","global"),{totalUsers:a,totalPosts:u},{merge:!0}),alert("Estatsticas sincronizadas com sucesso!")}catch(s){console.error("Erro ao sincronizar:",s),alert("Erro ao sincronizar.")}finally{r(!1)}}};return h.jsxs("div",{className:"p-8",children:[h.jsxs("div",{className:"flex justify-between items-center mb-8",children:[h.jsx("h1",{className:"text-3xl font-light text-white uppercase tracking-wide",children:"Viso Geral"}),h.jsxs("div",{className:"flex gap-4",children:[h.jsx("button",{onClick:async()=>{if(window.confirm("PERIGO: Isso apaga TODOS os dados do banco (usurios, posts, rituais, categorias, estatsticas). Tem certeza absoluta?"))try{const{resetDatabase:s}=await Gt(async()=>{const{resetDatabase:o}=await Promise.resolve().then(()=>R6);return{resetDatabase:o}},void 0,import.meta.url);await s(),alert("Banco de dados resetado com sucesso."),window.location.reload()}catch(s){alert("Erro ao resetar: "+s.message)}},className:"text-[10px] text-red-500 hover:text-red-400 uppercase tracking-widest border border-red-900/30 px-3 py-2 rounded hover:bg-red-900/20 transition-colors",children:"Resetar Sistema"}),h.jsx("button",{onClick:i,disabled:n,className:"text-[10px] text-neutral-500 hover:text-white uppercase tracking-widest border border-white/10 px-3 py-2 rounded hover:bg-white/5 transition-colors disabled:opacity-50",children:n?"Sincronizando...":"Sincronizar Estatsticas"})]})]}),h.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[h.jsxs("div",{className:"bg-neutral-900 border border-white/10 p-6",children:[h.jsx("h3",{className:"text-neutral-500 text-xs uppercase tracking-widest mb-2",children:"Total de Membros"}),h.jsx("p",{className:"text-3xl text-white",children:t.members})]}),h.jsxs("div",{className:"bg-neutral-900 border border-white/10 p-6",children:[h.jsx("h3",{className:"text-neutral-500 text-xs uppercase tracking-widest mb-2",children:"Artigos Publicados"}),h.jsx("p",{className:"text-3xl text-white",children:t.posts})]}),h.jsxs("div",{className:"bg-neutral-900 border border-white/10 p-6",children:[h.jsx("h3",{className:"text-neutral-500 text-xs uppercase tracking-widest mb-2",children:"Rituais Completos (Hoje)"}),h.jsx("p",{className:"text-3xl text-white",children:t.ritualsToday})]})]})]})}function V6(){const[t,e]=F.useState("dashboard"),[n,r]=F.useState(!1),[i,s]=F.useState(!1),o=()=>r(!n),a=()=>s(!i),u=()=>{switch(t){case"posts":return h.jsx(P6,{});case"categories":return h.jsx(L6,{});case"circles":return h.jsx(D6,{});case"habits":return h.jsx(j6,{});case"users":return h.jsx(O6,{});default:return h.jsx(M6,{})}};return h.jsxs("div",{className:"min-h-screen bg-black text-white font-sans flex relative",children:[h.jsx("div",{className:"md:hidden fixed top-0 left-0 right-0 h-16 bg-neutral-900 border-b border-white/10 flex items-center justify-between px-4 z-40",children:h.jsxs("div",{className:"flex items-center gap-3",children:[h.jsx("button",{onClick:a,className:"text-white",children:h.jsx(XA,{size:24})}),h.jsx("span",{className:"text-sm font-bold uppercase tracking-widest",children:"Admin Panel"})]})}),h.jsx(C6,{activeTab:t,setActiveTab:c=>{e(c),s(!1)},isCollapsed:n,toggleSidebar:o,isMobileOpen:i,toggleMobileSidebar:a}),h.jsx("main",{className:`
                    flex-1 bg-black transition-all duration-300 pt-16 md:pt-0
                    ${n?"md:ml-20":"md:ml-64"}
                `,children:u()}),i&&h.jsx("div",{className:"fixed inset-0 bg-black/80 z-40 md:hidden",onClick:()=>s(!1)})]})}function F6({onComplete:t}){const[e,n]=F.useState(!1);return F.useEffect(()=>{setTimeout(()=>n(!0),800),setTimeout(t,3e3)},[t]),h.jsx("div",{className:"fixed inset-0 bg-black z-[9999] flex flex-col items-center justify-center text-white",children:h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsxs("h1",{className:"text-6xl md:text-8xl font-light uppercase tracking-[0.15em] leading-none animate-in fade-in zoom-in duration-1000 ease-out",children:["VIRTUS",h.jsx("span",{className:"text-neutral-600",children:"."})]}),h.jsx("div",{className:`mt-4 transition-all duration-1000 ease-out transform ${e?"opacity-100 translate-y-0":"opacity-0 translate-y-4"}`,children:h.jsx("p",{className:"text-xs md:text-sm font-bold uppercase tracking-[0.5em] text-neutral-500",children:"Sociedade Privada"})})]})})}function U6(){const{user:t}=_n(),[e,n]=F.useState("home"),[r,i]=F.useState([]),[s,o]=F.useState("PRINCIPAL"),[a,u]=F.useState(null),[c,d]=F.useState(!1),f=(t==null?void 0:t.streak)||0,[m,g]=F.useState(""),[_,b]=F.useState("IMAGEM"),[P,x]=F.useState(""),[k,E]=F.useState(""),[O,M]=F.useState([]);F.useEffect(()=>{const W=mn(Ie(ie,"categories"),Un("order","asc")),B=Ml(W,Y=>{const N=Y.docs.map(ue=>ue.data().name);M(N),N.length>0&&!_&&b(N[0])});return()=>B()},[]);const D=yl.slice().reverse().find(W=>f>=W.min)||yl[0],[v,w]=F.useState(null),[I,S]=F.useState(!0),[A,R]=F.useState(!1),C=async(W=!1)=>{if(!A){R(!0);try{const{getDocs:B,limit:Y,startAfter:N}=await Gt(async()=>{const{getDocs:De,limit:Ee,startAfter:ft}=await Promise.resolve().then(()=>ei);return{getDocs:De,limit:Ee,startAfter:ft}},void 0,import.meta.url);let ue=mn(Ie(ie,"posts"),Un("createdAt","desc"),Y(10));!W&&v&&(ue=mn(Ie(ie,"posts"),Un("createdAt","desc"),N(v),Y(10)));const me=await B(ue),j=me.docs[me.docs.length-1];w(j);const be=me.docs.map(De=>({id:De.id,...De.data()}));i(W?be:De=>[...De,...be]),me.docs.length<10&&S(!1)}catch(B){console.error("Error fetching posts:",B)}finally{R(!1)}}};F.useEffect(()=>{C(!0)},[]);const te=async W=>{W.preventDefault();try{await Sr(Ie(ie,"posts"),{title:m,category:_||O[0]||"GERAL",content:P,image:k,date:new Date().toLocaleDateString("pt-BR",{day:"2-digit",month:"short"}).toUpperCase(),readTime:"3 MIN",likes:0,isLocked:!1,createdAt:zh()});const B=Xe(ie,"stats","global");await Uh(B,{totalPosts:Bh(1)},{merge:!0}),d(!1),g(""),x(""),E("")}catch(B){console.error("Error adding post: ",B)}},ne=s==="PRINCIPAL"?r:r.filter(W=>W.category===s),X=(W,B)=>{i(Y=>Y.map(N=>N.id===W?{...N,likes:B}:N)),a&&a.id===W&&u(Y=>({...Y,likes:B}))};return a?h.jsx(I6,{readingPost:a,setReadingPost:u,onUpdatePost:X}):h.jsxs("div",{className:"min-h-screen bg-black text-white font-sans selection:bg-white selection:text-black",children:[h.jsx(vO,{activeTab:e,selectedCategory:s,setSelectedCategory:o,streak:f,userImage:(t==null?void 0:t.photoURL)||"https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?auto=format&fit=crop&q=80&w=200"}),h.jsxs("main",{className:"pb-28",children:[e==="home"&&h.jsx(l6,{posts:ne,setReadingPost:u,onLoadMore:()=>C(!1),hasMore:I,onUpdatePost:X}),e==="networking"&&h.jsx(S6,{}),e==="rituals"&&h.jsx(u6,{}),e==="legacy"&&h.jsx(m6,{streak:f,currentRank:D,onReadPost:u})]}),e==="home"&&(t==null?void 0:t.isAdmin)&&h.jsx("button",{onClick:()=>d(!0),className:"fixed bottom-24 right-8 bg-white text-black w-10 h-10 flex items-center justify-center z-30 hover:bg-neutral-200 transition-colors",children:h.jsx(es,{className:"w-4 h-4"})}),h.jsx(xO,{activeTab:e,setActiveTab:n}),c&&h.jsx("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center p-8",children:h.jsxs("div",{className:"w-full max-w-md bg-neutral-900 border border-white/10 p-6",children:[h.jsxs("div",{className:"flex justify-between mb-8 text-white border-b border-white/20 pb-4",children:[h.jsx("span",{className:"text-xs font-bold uppercase tracking-[0.2em]",children:"Novo Artigo"}),h.jsx("button",{onClick:()=>d(!1),children:h.jsx(Bn,{className:"w-5 h-5"})})]}),h.jsxs("form",{onSubmit:te,className:"space-y-4",children:[h.jsx("input",{type:"text",placeholder:"TTULO",value:m,onChange:W=>g(W.target.value),className:"w-full bg-black border border-white/10 p-3 text-xs text-white placeholder-neutral-600 uppercase tracking-widest focus:border-white/30 outline-none"}),h.jsx("select",{value:_,onChange:W=>b(W.target.value),className:"w-full bg-black border border-white/10 p-3 text-xs text-white uppercase tracking-widest focus:border-white/30 outline-none",children:O.map(W=>h.jsx("option",{value:W,children:W},W))}),h.jsx("input",{type:"text",placeholder:"URL DA IMAGEM",value:k,onChange:W=>E(W.target.value),className:"w-full bg-black border border-white/10 p-3 text-xs text-white placeholder-neutral-600 uppercase tracking-widest focus:border-white/30 outline-none"}),h.jsx("textarea",{placeholder:"CONTEDO...",value:P,onChange:W=>x(W.target.value),rows:5,className:"w-full bg-black border border-white/10 p-3 text-xs text-white placeholder-neutral-600 focus:border-white/30 outline-none resize-none font-serif"}),h.jsx("button",{type:"submit",className:"w-full bg-white text-black py-3 text-[10px] font-bold uppercase tracking-[0.2em] hover:bg-neutral-200 transition-colors",children:"Publicar"})]})]})})]})}function z6(){return h.jsx(_O,{children:h.jsx(B6,{})})}function B6(){const{user:t}=_n(),[e,n]=F.useState(!0);return t?e?h.jsx(F6,{onComplete:()=>n(!1)}):t.isAdmin?h.jsx(V6,{}):h.jsx(U6,{}):h.jsx(A6,{})}lf.createRoot(document.getElementById("root")).render(h.jsx($0.StrictMode,{children:h.jsx(z6,{})}));
